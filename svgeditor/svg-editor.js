/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function t(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function e(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const i=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),n=new Map;class r{constructor(t,e){if(this._$cssResult$=!0,e!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){let t=n.get(this.cssText);return i&&void 0===t&&(n.set(this.cssText,t=new CSSStyleSheet),t.replaceSync(this.cssText)),t}toString(){return this.cssText}}const o=(t,...e)=>{const i=1===t.length?t[0]:e.reduce(((e,i,s)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1]),t[0]);return new r(i,s)},h=i?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return(t=>new r("string"==typeof t?t:t+"",s))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var a;const l=window.reactiveElementPolyfillSupport,u={toAttribute(t,e){switch(e){case Boolean:t=t?"":null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},c=(t,e)=>e!==t&&(e==e||t==t),d={attribute:!0,type:String,converter:u,reflect:!1,hasChanged:c};class f extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var e;null!==(e=this.l)&&void 0!==e||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,i)=>{const s=this._$Eh(i,e);void 0!==s&&(this._$Eu.set(s,i),t.push(s))})),t}static createProperty(t,e=d){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const i="symbol"==typeof t?Symbol():"__"+t,s=this.getPropertyDescriptor(t,i,e);void 0!==s&&Object.defineProperty(this.prototype,t,s)}}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(s){const n=this[t];this[e]=s,this.requestUpdate(t,n,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||d}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const i of e)this.createProperty(i,t[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(h(t))}else void 0!==t&&e.push(h(t));return e}static _$Eh(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ev=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Ep(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,i;(null!==(e=this._$Em)&&void 0!==e?e:this._$Em=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(i=t.hostConnected)||void 0===i||i.call(t))}removeController(t){var e;null===(e=this._$Em)||void 0===e||e.splice(this._$Em.indexOf(t)>>>0,1)}_$Ep(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Et.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{i?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const i=document.createElement("style"),s=window.litNonce;void 0!==s&&i.setAttribute("nonce",s),i.textContent=e.cssText,t.appendChild(i)}))})(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Em)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Em)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$Eg(t,e,i=d){var s,n;const r=this.constructor._$Eh(t,i);if(void 0!==r&&!0===i.reflect){const o=(null!==(n=null===(s=i.converter)||void 0===s?void 0:s.toAttribute)&&void 0!==n?n:u.toAttribute)(e,i.type);this._$Ei=t,null==o?this.removeAttribute(r):this.setAttribute(r,o),this._$Ei=null}}_$AK(t,e){var i,s,n;const r=this.constructor,o=r._$Eu.get(t);if(void 0!==o&&this._$Ei!==o){const t=r.getPropertyOptions(o),h=t.converter,a=null!==(n=null!==(s=null===(i=h)||void 0===i?void 0:i.fromAttribute)&&void 0!==s?s:"function"==typeof h?h:null)&&void 0!==n?n:u.fromAttribute;this._$Ei=o,this[o]=a(e,t.type),this._$Ei=null}}requestUpdate(t,e,i){let s=!0;void 0!==t&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||c)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$Ei!==t&&(void 0===this._$ES&&(this._$ES=new Map),this._$ES.set(t,i))):s=!1),!this.isUpdatePending&&s&&(this._$Ev=this._$EC())}async _$EC(){this.isUpdatePending=!0;try{await this._$Ev}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,e)=>this[e]=t)),this._$Et=void 0);let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),null===(t=this._$Em)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(i)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(i)}willUpdate(t){}_$AE(t){var e;null===(e=this._$Em)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ev}shouldUpdate(t){return!0}update(t){void 0!==this._$ES&&(this._$ES.forEach(((t,e)=>this._$Eg(e,this[e],t))),this._$ES=void 0),this._$EU()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var p;f.finalized=!0,f.elementProperties=new Map,f.elementStyles=[],f.shadowRootOptions={mode:"open"},null==l||l({ReactiveElement:f}),(null!==(a=globalThis.reactiveElementVersions)&&void 0!==a?a:globalThis.reactiveElementVersions=[]).push("1.0.1");const m=globalThis.trustedTypes,y=m?m.createPolicy("lit-html",{createHTML:t=>t}):void 0,g=`lit$${(Math.random()+"").slice(9)}$`,w="?"+g,v=`<${w}>`,_=document,x=(t="")=>_.createComment(t),b=t=>null===t||"object"!=typeof t&&"function"!=typeof t,A=Array.isArray,$=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,S=/-->/g,E=/>/g,C=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,T=/'/g,M=/"/g,O=/^(?:script|style|textarea)$/i,k=(t=>(e,...i)=>({_$litType$:t,strings:e,values:i}))(1),N=Symbol.for("lit-noChange"),P=Symbol.for("lit-nothing"),L=new WeakMap,R=_.createTreeWalker(_,129,null,!1),D=(t,e)=>{const i=t.length-1,s=[];let n,r=2===e?"<svg>":"",o=$;for(let e=0;e<i;e++){const i=t[e];let h,a,l=-1,u=0;for(;u<i.length&&(o.lastIndex=u,a=o.exec(i),null!==a);)u=o.lastIndex,o===$?"!--"===a[1]?o=S:void 0!==a[1]?o=E:void 0!==a[2]?(O.test(a[2])&&(n=RegExp("</"+a[2],"g")),o=C):void 0!==a[3]&&(o=C):o===C?">"===a[0]?(o=null!=n?n:$,l=-1):void 0===a[1]?l=-2:(l=o.lastIndex-a[2].length,h=a[1],o=void 0===a[3]?C:'"'===a[3]?M:T):o===M||o===T?o=C:o===S||o===E?o=$:(o=C,n=void 0);const c=o===C&&t[e+1].startsWith("/>")?" ":"";r+=o===$?i+v:l>=0?(s.push(h),i.slice(0,l)+"$lit$"+i.slice(l)+g+c):i+g+(-2===l?(s.push(void 0),e):c)}const h=r+(t[i]||"<?>")+(2===e?"</svg>":"");return[void 0!==y?y.createHTML(h):h,s]};class j{constructor({strings:t,_$litType$:e},i){let s;this.parts=[];let n=0,r=0;const o=t.length-1,h=this.parts,[a,l]=D(t,e);if(this.el=j.createElement(a,i),R.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(s=R.nextNode())&&h.length<o;){if(1===s.nodeType){if(s.hasAttributes()){const t=[];for(const e of s.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(g)){const i=l[r++];if(t.push(e),void 0!==i){const t=s.getAttribute(i.toLowerCase()+"$lit$").split(g),e=/([.?@])?(.*)/.exec(i);h.push({type:1,index:n,name:e[2],strings:t,ctor:"."===e[1]?F:"?"===e[1]?q:"@"===e[1]?B:H})}else h.push({type:6,index:n})}for(const e of t)s.removeAttribute(e)}if(O.test(s.tagName)){const t=s.textContent.split(g),e=t.length-1;if(e>0){s.textContent=m?m.emptyScript:"";for(let i=0;i<e;i++)s.append(t[i],x()),R.nextNode(),h.push({type:2,index:++n});s.append(t[e],x())}}}else if(8===s.nodeType)if(s.data===w)h.push({type:2,index:n});else{let t=-1;for(;-1!==(t=s.data.indexOf(g,t+1));)h.push({type:7,index:n}),t+=g.length-1}n++}}static createElement(t,e){const i=_.createElement("template");return i.innerHTML=t,i}}function z(t,e,i=t,s){var n,r,o,h;if(e===N)return e;let a=void 0!==s?null===(n=i._$Cl)||void 0===n?void 0:n[s]:i._$Cu;const l=b(e)?void 0:e._$litDirective$;return(null==a?void 0:a.constructor)!==l&&(null===(r=null==a?void 0:a._$AO)||void 0===r||r.call(a,!1),void 0===l?a=void 0:(a=new l(t),a._$AT(t,i,s)),void 0!==s?(null!==(o=(h=i)._$Cl)&&void 0!==o?o:h._$Cl=[])[s]=a:i._$Cu=a),void 0!==a&&(e=z(t,a._$AS(t,e.values),a,s)),e}class I{constructor(t,e){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var e;const{el:{content:i},parts:s}=this._$AD,n=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:_).importNode(i,!0);R.currentNode=n;let r=R.nextNode(),o=0,h=0,a=s[0];for(;void 0!==a;){if(o===a.index){let e;2===a.type?e=new U(r,r.nextSibling,this,t):1===a.type?e=new a.ctor(r,a.name,a.strings,this,t):6===a.type&&(e=new X(r,this,t)),this.v.push(e),a=s[++h]}o!==(null==a?void 0:a.index)&&(r=R.nextNode(),o++)}return n}m(t){let e=0;for(const i of this.v)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class U{constructor(t,e,i,s){var n;this.type=2,this._$AH=P,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=s,this._$Cg=null===(n=null==s?void 0:s.isConnected)||void 0===n||n}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=z(this,t,e),b(t)?t===P||null==t||""===t?(this._$AH!==P&&this._$AR(),this._$AH=P):t!==this._$AH&&t!==N&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.S(t):(t=>{var e;return A(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])})(t)?this.M(t):this.$(t)}A(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}S(t){this._$AH!==t&&(this._$AR(),this._$AH=this.A(t))}$(t){this._$AH!==P&&b(this._$AH)?this._$AA.nextSibling.data=t:this.S(_.createTextNode(t)),this._$AH=t}T(t){var e;const{values:i,_$litType$:s}=t,n="number"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=j.createElement(s.h,this.options)),s);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===n)this._$AH.m(i);else{const t=new I(n,this),e=t.p(this.options);t.m(i),this.S(e),this._$AH=t}}_$AC(t){let e=L.get(t.strings);return void 0===e&&L.set(t.strings,e=new j(t)),e}M(t){A(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,s=0;for(const n of t)s===e.length?e.push(i=new U(this.A(x()),this.A(x()),this,this.options)):i=e[s],i._$AI(n),s++;s<e.length&&(this._$AR(i&&i._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cg=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class H{constructor(t,e,i,s,n){this.type=1,this._$AH=P,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=n,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=P}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,i,s){const n=this.strings;let r=!1;if(void 0===n)t=z(this,t,e,0),r=!b(t)||t!==this._$AH&&t!==N,r&&(this._$AH=t);else{const s=t;let o,h;for(t=n[0],o=0;o<n.length-1;o++)h=z(this,s[i+o],e,o),h===N&&(h=this._$AH[o]),r||(r=!b(h)||h!==this._$AH[o]),h===P?t=P:t!==P&&(t+=(null!=h?h:"")+n[o+1]),this._$AH[o]=h}r&&!s&&this.k(t)}k(t){t===P?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class F extends H{constructor(){super(...arguments),this.type=3}k(t){this.element[this.name]=t===P?void 0:t}}class q extends H{constructor(){super(...arguments),this.type=4}k(t){t&&t!==P?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}}class B extends H{constructor(t,e,i,s,n){super(t,e,i,s,n),this.type=5}_$AI(t,e=this){var i;if((t=null!==(i=z(this,t,e,0))&&void 0!==i?i:P)===N)return;const s=this._$AH,n=t===P&&s!==P||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,r=t!==P&&(s===P||n);n&&this.element.removeEventListener(this.name,this,s),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==i?i:this.element,t):this._$AH.handleEvent(t)}}class X{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){z(this,t)}}const Y=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var V,W;null==Y||Y(j,U),(null!==(p=globalThis.litHtmlVersions)&&void 0!==p?p:globalThis.litHtmlVersions=[]).push("2.0.1");class G extends f{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=((t,e,i)=>{var s,n;const r=null!==(s=null==i?void 0:i.renderBefore)&&void 0!==s?s:e;let o=r._$litPart$;if(void 0===o){const t=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:null;r._$litPart$=o=new U(e.insertBefore(x(),t),t,void 0,null!=i?i:{})}return o._$AI(t),o})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return N}}G.finalized=!0,G._$litElement$=!0,null===(V=globalThis.litElementHydrateSupport)||void 0===V||V.call(globalThis,{LitElement:G});const Q=globalThis.litElementPolyfillSupport;null==Q||Q({LitElement:G}),(null!==(W=globalThis.litElementVersions)&&void 0!==W?W:globalThis.litElementVersions=[]).push("3.0.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const J=t=>e=>"function"==typeof e?((t,e)=>(window.customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:i,elements:s}=e;return{kind:i,elements:s,finisher(e){window.customElements.define(t,e)}}})(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,Z=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(i){i.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(i){i.createProperty(e.key,t)}};function K(t){return(e,i)=>void 0!==i?((t,e,i)=>{e.constructor.createProperty(i,t)})(t,e,i):Z(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function tt(t){return K({...t,state:!0})}const et=[o`:host{height:100%;width:100%}`];let it=class extends G{render(){return k`<editor-layout></editor-layout>`}};it.styles=[et],it=t([J("svg-editor")],it);class st{constructor(t,e,i,s){var n;this.shape={},this.shapes=[],this.timesPerSecond=30,this.wait=!1,this.drawing=!1,this.prev=[0,0],this.curr=[0,0],this.getCoords=t=>[t.clientX-this.offset.x,t.clientY-this.offset.y],this.draw=()=>{var t,e,i,s,n;null===(t=this.ctx)||void 0===t||t.beginPath(),null===(e=this.ctx)||void 0===e||e.moveTo(...this.prev),null===(i=this.ctx)||void 0===i||i.lineTo(...this.curr),null===(s=this.ctx)||void 0===s||s.stroke(),null===(n=this.ctx)||void 0===n||n.closePath()},this.executeAction=()=>{throw new Error("unimplemented")},this.destroy=()=>{throw new Error("unimplemented")},this.target=t,this.self=e,this.offset=i,this.previewLayer=s;const r=this.target.getContext("2d");r&&(this.ctx=r);const o=null===(n=this.previewLayer)||void 0===n?void 0:n.getContext("2d");o&&(this.previewCtx=o)}}class nt extends st{constructor(t,e,i){super(t,e,i),this.executeAction=()=>{this.target.addEventListener("mousemove",this.onMove),this.target.addEventListener("mousedown",this.onDown),this.target.addEventListener("mouseup",this.onUp),this.target.addEventListener("mouseout",this.onOut),this.setDrawTool()},this.destroy=()=>(this.target.removeEventListener("mousemove",this.onMove),this.target.removeEventListener("mousedown",this.onDown),this.target.removeEventListener("mouseup",this.onUp),this.target.removeEventListener("mouseout",this.onOut),this.shapes),this.setDrawTool=()=>{this.ctx&&(this.ctx.strokeStyle="red",this.ctx.lineWidth=2,this.ctx.fillStyle="red")},this.onDown=t=>{this.prev=this.curr,console.log("dafuq"),this.curr=this.getCoords(t),this.shape.name=`free-${Date.now()}`,this.shape.coordinates=[{x:this.curr[0],y:this.curr[1]}],this.drawing=!0},this.onUp=()=>{console.log("dafuq"),this.shapes.push(this.shape),this.drawing=!1},this.onOut=()=>{this.drawing=!1},this.onMove=t=>{var e;this.drawing&&!this.wait&&(this.prev=this.curr,this.curr=this.getCoords(t),null===(e=this.shape.coordinates)||void 0===e||e.push({x:this.curr[0],y:this.curr[1]}),this.draw(),this.wait=!0,setTimeout((()=>{this.wait=!1}),1e3/this.timesPerSecond))}}}class rt extends st{constructor(t,e,i,s){super(t,i,s,e),this.executeAction=()=>{this.target.addEventListener("mousemove",this.onMove),this.target.addEventListener("mousedown",this.onDown),this.target.addEventListener("mouseup",this.onUp)},this.destroy=()=>(this.target.removeEventListener("mousemove",this.onMove),this.target.removeEventListener("mousedown",this.onDown),this.target.removeEventListener("mouseup",this.onUp),this.shapes),this.onDown=t=>{this.prev=this.getCoords(t),this.drawing=!0},this.onUp=t=>{this.drawing=!1,this.curr=this.getCoords(t),this.shape.name=`line-${Date.now()}`,this.shape.coordinates=[{x:this.prev[0],y:this.prev[1]},{x:this.curr[0],y:this.curr[1]}],this.shapes.push(this.shape),this.draw()},this.onMove=t=>{var e,i,s,n,r,o;this.drawing&&this.previewLayer&&(this.curr=this.getCoords(t),null===(e=this.previewCtx)||void 0===e||e.clearRect(0,0,null===(i=this.previewLayer)||void 0===i?void 0:i.width,this.previewLayer.height),null===(s=this.previewCtx)||void 0===s||s.beginPath(),null===(n=this.previewCtx)||void 0===n||n.moveTo(...this.prev),null===(r=this.previewCtx)||void 0===r||r.lineTo(...this.curr),null===(o=this.previewCtx)||void 0===o||o.stroke())};const n=this.target.getContext("2d");this.timesPerSecond=1e3,n&&(this.ctx=n)}}var ot;!function(t){t[t.DRAW=0]="DRAW",t[t.LINE=1]="LINE"}(ot||(ot={}));class ht{constructor(t,e,i,s){this.selectedTool=null,this.canvas=null,this.previewLayer=null,this.shapes=[],this.selectTool=t=>{if(this.selectedTool&&this.deselectTool(),this.canvas&&this.previewLayer)switch(t){case ot.DRAW:this.selectedTool=new nt(this.canvas,this.self,this.offset),this.selectedTool.executeAction();break;case ot.LINE:this.selectedTool=new rt(this.canvas,this.previewLayer,this.self,this.offset),this.selectedTool.executeAction()}},this.deselectTool=()=>{var t;this.selectedTool&&(this.shapes.push(...null===(t=this.selectedTool)||void 0===t?void 0:t.destroy()),this.selectedTool=null),console.log(this.shapes)},this.useSelectedTool=t=>{var e,i;return null===(i=null===(e=this.selectedTool)||void 0===e?void 0:e.executeAction)||void 0===i?void 0:i.call(e)},this.canvas=t,this.previewLayer=e,this.self=s,this.offset=i}addElement(t){throw new Error("Not implemented")}}const at=o`:host{height:100%;transition:all 1s;display:flex;flex-direction:column;background-color:#2196f3}#footer{background-color:rgba(255,255,255,.8)}`,lt=o`#header{background-color:rgba(255,255,255,.8);width:100%}`,ut=o`#content{display:flex;flex-wrap:nowrap}#draw-container{margin:0;padding:0;top:0;left:0;position:relative}#drawzone{top:0;left:0;position:absolute}#connection-info{background-color:rgba(255,255,255,.8)}`;let ct=class extends G{constructor(){super(...arguments),this.width=0,this.height=0,this.editor=null,this.handleSelectTool=()=>{console.log("selected")},this.handleSelectDraw=()=>{var t;null===(t=this.editor)||void 0===t||t.selectTool(ot.DRAW)},this.handleSelectLine=()=>{var t;null===(t=this.editor)||void 0===t||t.selectTool(ot.LINE)},this.deselectTool=()=>{var t;null===(t=this.editor)||void 0===t||t.deselectTool()},this.tools=[{title:"Draw Tool",onClick:this.handleSelectDraw,id:"0",isSelected:!1},{title:"Line Tool",onClick:this.handleSelectLine,id:"1",isSelected:!1},{title:"Deselect",onClick:this.deselectTool,id:"2",isSelected:!1}],this.updateResize=()=>{this.width=parseInt(getComputedStyle(this).getPropertyValue("width")),this.height=parseInt(getComputedStyle(this).getPropertyValue("height"))}}firstUpdated(){var t,i;return e(this,void 0,void 0,(function*(){this.updateResize();const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("drawzone"),s=null===(i=this.shadowRoot)||void 0===i?void 0:i.getElementById("preview-layer");s&&console.log(s),e&&(console.log(this.height,this.width),console.log("drin"),console.log(e),new ResizeObserver(this.updateResize).observe(e),this.editor=new ht(e,s,{x:s.offsetLeft,y:s.offsetTop},this))}))}render(){return k`<div id="content"><div id="draw-container"><canvas id="drawzone" height="${window.innerHeight/1.5}" width="${window.innerHeight/1.5}"></canvas><canvas id="preview-layer" height="${window.innerHeight/1.5}" width="${window.innerHeight/1.5}"></canvas></div><tool-box .tools="${this.tools}"></tool-box></div><editor-header></editor-header><div id="footer"></div>`}};ct.styles=[at,lt,ut],t([tt()],ct.prototype,"width",void 0),t([tt()],ct.prototype,"height",void 0),t([tt()],ct.prototype,"editor",void 0),ct=t([J("editor-layout")],ct);const dt=o`:host{min-width:75px;display:block}button{aspect-ratio:1;border-radius:0;padding:5px;display:flex;justify-content:center;align-items:center}button:not(.isSelected){border:1px solid grey;background-color:#fff}button.isSelected{border:1px solid #00f;background-color:#0ff}`;o``;let ft=class extends G{handleClick(){var t;this.buttonId&&(null===(t=this.onClick)||void 0===t||t.call(this,this.buttonId))}render(){return k`<button class="${this.isSelected?"isSelected":""}" @click="${this.handleClick}">${this.title}</button>`}};ft.styles=[dt],t([K({type:Boolean})],ft.prototype,"isSelected",void 0),t([K({type:String})],ft.prototype,"buttonId",void 0),t([K()],ft.prototype,"onClick",void 0),ft=t([J("toolbox-button")],ft);const pt=o`:host{min-width:145px;transition:width 1s,height 1s;background-color:rgba(255,255,255,.8);width:fit-content;display:flex;gap:5px;padding:5px}:host>.col-0,:host>.col-1{flex:.5 1 15%;display:flex;flex-direction:column;gap:5px}`,mt=(t,e)=>null==e?void 0:e.slice(t[0],t[1]).map(((t,e)=>k`<span class="row-${e}"><toolbox-button .onClick="${t.onClick}" .buttonId="${t.id}" .title="${t.title}" .isSelected="${t.isSelected}"></toolbox-button></span>`));let yt=class extends G{render(){var t,e;const i=null!==(e=null===(t=this.tools)||void 0===t?void 0:t.length)&&void 0!==e?e:0,s=[(i+i%2)/2,i];return k`<div class="col-0">${mt([0,(i+i%2)/2],this.tools)}</div><div class="col-1">${mt(s,this.tools)}</div>`}};yt.styles=pt,t([K({type:Array})],yt.prototype,"tools",void 0),t([K({type:String})],yt.prototype,"selectedTool",void 0),yt=t([J("tool-box")],yt);const gt={},wt=[];function vt(t,e){if(Array.isArray(t))for(const i of t)vt(i,e);else if("object"!=typeof t)xt(Object.getOwnPropertyNames(e)),gt[t]=Object.assign(gt[t]||{},e);else for(const e in t)vt(e,t[e])}function _t(t){return gt[t]||{}}function xt(t){wt.push(...t)}function bt(t,e){let i;const s=t.length,n=[];for(i=0;i<s;i++)n.push(e(t[i]));return n}function At(t,e){let i;const s=t.length,n=[];for(i=0;i<s;i++)e(t[i])&&n.push(t[i]);return n}function $t(t){return t%360*Math.PI/180}function St(t){return t.toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function Et(t){return t.replace(/([A-Z])/g,(function(t,e){return"-"+e.toLowerCase()}))}function Ct(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Tt(t,e,i,s){return null!=e&&null!=i||(s=s||t.bbox(),null==e?e=s.width/s.height*i:null==i&&(i=s.height/s.width*e)),{width:e,height:i}}function Mt(t,e){const i=t.origin;let s=null!=t.ox?t.ox:null!=t.originX?t.originX:"center",n=null!=t.oy?t.oy:null!=t.originY?t.originY:"center";null!=i&&([s,n]=Array.isArray(i)?i:"object"==typeof i?[i.x,i.y]:[i,i]);const r="string"==typeof s,o="string"==typeof n;if(r||o){const{height:t,width:i,x:h,y:a}=e.bbox();r&&(s=s.includes("left")?h:s.includes("right")?h+i:h+i/2),o&&(n=n.includes("top")?a:n.includes("bottom")?a+t:a+t/2)}return[s,n]}const Ot="http://www.w3.org/2000/svg",kt="http://www.w3.org/2000/xmlns/",Nt="http://www.w3.org/1999/xlink",Pt={window:"undefined"==typeof window?null:window,document:"undefined"==typeof document?null:document};class Lt{}const Rt={},Dt="___SYMBOL___ROOT___";function jt(t,e=Ot){return Pt.document.createElementNS(e,t)}function zt(t,e=!1){if(t instanceof Lt)return t;if("object"==typeof t)return Ht(t);if(null==t)return new Rt[Dt];if("string"==typeof t&&"<"!==t.charAt(0))return Ht(Pt.document.querySelector(t));const i=e?Pt.document.createElement("div"):jt("svg");return i.innerHTML=t,t=Ht(i.firstChild),i.removeChild(i.firstChild),t}function It(t,e){return e instanceof Pt.window.Node?e:jt(t)}function Ut(t){if(!t)return null;if(t.instance instanceof Lt)return t.instance;if("#document-fragment"===t.nodeName)return new Rt.Fragment(t);let e=Ct(t.nodeName||"Dom");return"LinearGradient"===e||"RadialGradient"===e?e="Gradient":Rt[e]||(e="Dom"),new Rt[e](t)}let Ht=Ut;function Ft(t,e=t.name,i=!1){return Rt[e]=t,i&&(Rt[Dt]=t),xt(Object.getOwnPropertyNames(t.prototype)),t}let qt=1e3;function Bt(t){return"Svgjs"+Ct(t)+qt++}function Xt(t){for(let e=t.children.length-1;e>=0;e--)Xt(t.children[e]);return t.id?(t.id=Bt(t.nodeName),t):t}function Yt(t,e){let i,s;for(s=(t=Array.isArray(t)?t:[t]).length-1;s>=0;s--)for(i in e)t[s].prototype[i]=e[i]}function Vt(t){return function(...e){const i=e[e.length-1];return!i||i.constructor!==Object||i instanceof Array?t.apply(this,e):t.apply(this,e.slice(0,-1)).attr(i)}}vt("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){const t=this.position();return this.parent().add(this.remove(),t+1),this},backward:function(){const t=this.position();return this.parent().add(this.remove(),t?t-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(t){(t=zt(t)).remove();const e=this.position();return this.parent().add(t,e),this},after:function(t){(t=zt(t)).remove();const e=this.position();return this.parent().add(t,e+1),this},insertBefore:function(t){return(t=zt(t)).before(this),this},insertAfter:function(t){return(t=zt(t)).after(this),this}});const Wt=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,Gt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Qt=/rgb\((\d+),(\d+),(\d+)\)/,Jt=/(#[a-z_][a-z0-9\-_]*)/i,Zt=/\)\s*,?\s*/,Kt=/\s/g,te=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,ee=/^rgb\(/,ie=/^(\s+)?$/,se=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ne=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,re=/[\s,]+/,oe=/[MLHVCSQTAZ]/i;function he(t){const e=Math.round(t),i=Math.max(0,Math.min(255,e)).toString(16);return 1===i.length?"0"+i:i}function ae(t,e){for(let i=e.length;i--;)if(null==t[e[i]])return!1;return!0}function le(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}vt("Dom",{classes:function(){const t=this.attr("class");return null==t?[]:t.trim().split(re)},hasClass:function(t){return-1!==this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){const e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!==t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}}),vt("Dom",{css:function(t,e){const i={};if(0===arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter((function(t){return!!t.length})).forEach((function(t){const e=t.split(/\s*:\s*/);i[e[0]]=e[1]})),i;if(arguments.length<2){if(Array.isArray(t)){for(const e of t){const t=St(e);i[t]=this.node.style[t]}return i}if("string"==typeof t)return this.node.style[St(t)];if("object"==typeof t)for(const e in t)this.node.style[St(e)]=null==t[e]||ie.test(t[e])?"":t[e]}return 2===arguments.length&&(this.node.style[St(t)]=null==e||ie.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return"none"!==this.css("display")}}),vt("Dom",{data:function(t,e,i){if(null==t)return this.data(bt(At(this.node.attributes,(t=>0===t.nodeName.indexOf("data-"))),(t=>t.nodeName.slice(5))));if(t instanceof Array){const e={};for(const i of t)e[i]=this.data(i);return e}if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===i||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),vt("Dom",{remember:function(t,e){if("object"==typeof arguments[0])for(const e in t)this.remember(e,t[e]);else{if(1===arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0===arguments.length)this._memory={};else for(let t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory=this._memory||{}}});class ue{constructor(...t){this.init(...t)}static isColor(t){return t&&(t instanceof ue||this.isRgb(t)||this.test(t))}static isRgb(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b}static random(t="vibrant",e,i){const{random:s,round:n,sin:r,PI:o}=Math;if("vibrant"===t){const t=24*s()+57,e=38*s()+45,i=360*s();return new ue(t,e,i,"lch")}if("sine"===t){const t=n(80*r(2*o*(e=e??s())/.5+.01)+150),i=n(50*r(2*o*e/.5+4.6)+200),h=n(100*r(2*o*e/.5+2.3)+150);return new ue(t,i,h)}if("pastel"===t){const t=8*s()+86,e=17*s()+9,i=360*s();return new ue(t,e,i,"lch")}if("dark"===t){const t=10+10*s(),e=50*s()+86,i=360*s();return new ue(t,e,i,"lch")}if("rgb"===t){const t=255*s(),e=255*s(),i=255*s();return new ue(t,e,i)}if("lab"===t){const t=100*s(),e=256*s()-128,i=256*s()-128;return new ue(t,e,i,"lab")}if("grey"===t){const t=255*s();return new ue(t,t,t)}throw new Error("Unsupported random color mode")}static test(t){return"string"==typeof t&&(te.test(t)||ee.test(t))}cmyk(){const{_a:t,_b:e,_c:i}=this.rgb(),[s,n,r]=[t,e,i].map((t=>t/255)),o=Math.min(1-s,1-n,1-r);if(1===o)return new ue(0,0,0,1,"cmyk");return new ue((1-s-o)/(1-o),(1-n-o)/(1-o),(1-r-o)/(1-o),o,"cmyk")}hsl(){const{_a:t,_b:e,_c:i}=this.rgb(),[s,n,r]=[t,e,i].map((t=>t/255)),o=Math.max(s,n,r),h=Math.min(s,n,r),a=(o+h)/2,l=o===h,u=o-h;return new ue(360*(l?0:o===s?((n-r)/u+(n<r?6:0))/6:o===n?((r-s)/u+2)/6:o===r?((s-n)/u+4)/6:0),100*(l?0:a>.5?u/(2-o-h):u/(o+h)),100*a,"hsl")}init(t=0,e=0,i=0,s=0,n="rgb"){if(t=t||0,this.space)for(const t in this.space)delete this[this.space[t]];if("number"==typeof t)n="string"==typeof s?s:n,s="string"==typeof s?0:s,Object.assign(this,{_a:t,_b:e,_c:i,_d:s,space:n});else if(t instanceof Array)this.space=e||("string"==typeof t[3]?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){const i=function(t,e){const i=ae(t,"rgb")?{_a:t.r,_b:t.g,_c:t.b,_d:0,space:"rgb"}:ae(t,"xyz")?{_a:t.x,_b:t.y,_c:t.z,_d:0,space:"xyz"}:ae(t,"hsl")?{_a:t.h,_b:t.s,_c:t.l,_d:0,space:"hsl"}:ae(t,"lab")?{_a:t.l,_b:t.a,_c:t.b,_d:0,space:"lab"}:ae(t,"lch")?{_a:t.l,_b:t.c,_c:t.h,_d:0,space:"lch"}:ae(t,"cmyk")?{_a:t.c,_b:t.m,_c:t.y,_d:t.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return i.space=e||i.space,i}(t,e);Object.assign(this,i)}else if("string"==typeof t)if(ee.test(t)){const e=t.replace(Kt,""),[i,s,n]=Qt.exec(e).slice(1,4).map((t=>parseInt(t)));Object.assign(this,{_a:i,_b:s,_c:n,_d:0,space:"rgb"})}else{if(!te.test(t))throw Error("Unsupported string format, can't construct Color");{const e=t=>parseInt(t,16),[,i,s,n]=Gt.exec(function(t){return 4===t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}(t)).map(e);Object.assign(this,{_a:i,_b:s,_c:n,_d:0,space:"rgb"})}}const{_a:r,_b:o,_c:h,_d:a}=this,l="rgb"===this.space?{r,g:o,b:h}:"xyz"===this.space?{x:r,y:o,z:h}:"hsl"===this.space?{h:r,s:o,l:h}:"lab"===this.space?{l:r,a:o,b:h}:"lch"===this.space?{l:r,c:o,h}:"cmyk"===this.space?{c:r,m:o,y:h,k:a}:{};Object.assign(this,l)}lab(){const{x:t,y:e,z:i}=this.xyz();return new ue(116*e-16,500*(t-e),200*(e-i),"lab")}lch(){const{l:t,a:e,b:i}=this.lab(),s=Math.sqrt(e**2+i**2);let n=180*Math.atan2(i,e)/Math.PI;n<0&&(n*=-1,n=360-n);return new ue(t,s,n,"lch")}rgb(){if("rgb"===this.space)return this;if("lab"===(t=this.space)||"xyz"===t||"lch"===t){let{x:t,y:e,z:i}=this;if("lab"===this.space||"lch"===this.space){let{l:s,a:n,b:r}=this;if("lch"===this.space){const{c:t,h:e}=this,i=Math.PI/180;n=t*Math.cos(i*e),r=t*Math.sin(i*e)}const o=(s+16)/116,h=n/500+o,a=o-r/200,l=16/116,u=.008856,c=7.787;t=.95047*(h**3>u?h**3:(h-l)/c),e=1*(o**3>u?o**3:(o-l)/c),i=1.08883*(a**3>u?a**3:(a-l)/c)}const s=3.2406*t+-1.5372*e+-.4986*i,n=-.9689*t+1.8758*e+.0415*i,r=.0557*t+-.204*e+1.057*i,o=Math.pow,h=.0031308,a=s>h?1.055*o(s,1/2.4)-.055:12.92*s,l=n>h?1.055*o(n,1/2.4)-.055:12.92*n,u=r>h?1.055*o(r,1/2.4)-.055:12.92*r;return new ue(255*a,255*l,255*u)}if("hsl"===this.space){let{h:t,s:e,l:i}=this;if(t/=360,e/=100,i/=100,0===e){i*=255;return new ue(i,i,i)}const s=i<.5?i*(1+e):i+e-i*e,n=2*i-s,r=255*le(n,s,t+1/3),o=255*le(n,s,t),h=255*le(n,s,t-1/3);return new ue(r,o,h)}if("cmyk"===this.space){const{c:t,m:e,y:i,k:s}=this,n=255*(1-Math.min(1,t*(1-s)+s)),r=255*(1-Math.min(1,e*(1-s)+s)),o=255*(1-Math.min(1,i*(1-s)+s));return new ue(n,r,o)}return this;var t}toArray(){const{_a:t,_b:e,_c:i,_d:s,space:n}=this;return[t,e,i,s,n]}toHex(){const[t,e,i]=this._clamped().map(he);return`#${t}${e}${i}`}toRgb(){const[t,e,i]=this._clamped();return`rgb(${t},${e},${i})`}toString(){return this.toHex()}xyz(){const{_a:t,_b:e,_c:i}=this.rgb(),[s,n,r]=[t,e,i].map((t=>t/255)),o=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,h=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,a=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,l=(.4124*o+.3576*h+.1805*a)/.95047,u=(.2126*o+.7152*h+.0722*a)/1,c=(.0193*o+.1192*h+.9505*a)/1.08883,d=l>.008856?Math.pow(l,1/3):7.787*l+16/116,f=u>.008856?Math.pow(u,1/3):7.787*u+16/116,p=c>.008856?Math.pow(c,1/3):7.787*c+16/116;return new ue(d,f,p,"xyz")}_clamped(){const{_a:t,_b:e,_c:i}=this.rgb(),{max:s,min:n,round:r}=Math;return[t,e,i].map((t=>s(0,n(r(t),255))))}}class ce{constructor(...t){this.init(...t)}clone(){return new ce(this)}init(t,e){const i=0,s=0,n=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:{x:t,y:e};return this.x=n.x??i,this.y=n.y??s,this}toArray(){return[this.x,this.y]}transform(t){return this.clone().transformO(t)}transformO(t){fe.isMatrixLike(t)||(t=new fe(t));const{x:e,y:i}=this;return this.x=t.a*e+t.c*i+t.e,this.y=t.b*e+t.d*i+t.f,this}}function de(t,e,i){return Math.abs(e-t)<(i||1e-6)}class fe{constructor(...t){this.init(...t)}static formatTransforms(t){const e="both"===t.flip||!0===t.flip,i=t.flip&&(e||"x"===t.flip)?-1:1,s=t.flip&&(e||"y"===t.flip)?-1:1,n=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,r=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,o=t.scale&&t.scale.length?t.scale[0]*i:isFinite(t.scale)?t.scale*i:isFinite(t.scaleX)?t.scaleX*i:i,h=t.scale&&t.scale.length?t.scale[1]*s:isFinite(t.scale)?t.scale*s:isFinite(t.scaleY)?t.scaleY*s:s,a=t.shear||0,l=t.rotate||t.theta||0,u=new ce(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),c=u.x,d=u.y,f=new ce(t.position||t.px||t.positionX||NaN,t.py||t.positionY||NaN),p=f.x,m=f.y,y=new ce(t.translate||t.tx||t.translateX,t.ty||t.translateY),g=y.x,w=y.y,v=new ce(t.relative||t.rx||t.relativeX,t.ry||t.relativeY);return{scaleX:o,scaleY:h,skewX:n,skewY:r,shear:a,theta:l,rx:v.x,ry:v.y,tx:g,ty:w,ox:c,oy:d,px:p,py:m}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return null!=t.a||null!=t.b||null!=t.c||null!=t.d||null!=t.e||null!=t.f}static matrixMultiply(t,e,i){const s=t.a*e.a+t.c*e.b,n=t.b*e.a+t.d*e.b,r=t.a*e.c+t.c*e.d,o=t.b*e.c+t.d*e.d,h=t.e+t.a*e.e+t.c*e.f,a=t.f+t.b*e.e+t.d*e.f;return i.a=s,i.b=n,i.c=r,i.d=o,i.e=h,i.f=a,i}around(t,e,i){return this.clone().aroundO(t,e,i)}aroundO(t,e,i){const s=t||0,n=e||0;return this.translateO(-s,-n).lmultiplyO(i).translateO(s,n)}clone(){return new fe(this)}decompose(t=0,e=0){const i=this.a,s=this.b,n=this.c,r=this.d,o=this.e,h=this.f,a=i*r-s*n,l=a>0?1:-1,u=l*Math.sqrt(i*i+s*s),c=Math.atan2(l*s,l*i),d=180/Math.PI*c,f=Math.cos(c),p=Math.sin(c),m=(i*n+s*r)/a,y=n*u/(m*i-s)||r*u/(m*s+i);return{scaleX:u,scaleY:y,shear:m,rotate:d,translateX:o-t+t*f*u+e*(m*f*u-p*y),translateY:h-e+t*p*u+e*(m*p*u+f*y),originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(t){if(t===this)return!0;const e=new fe(t);return de(this.a,e.a)&&de(this.b,e.b)&&de(this.c,e.c)&&de(this.d,e.d)&&de(this.e,e.e)&&de(this.f,e.f)}flip(t,e){return this.clone().flipO(t,e)}flipO(t,e){return"x"===t?this.scaleO(-1,1,e,0):"y"===t?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}init(t){const e=fe.fromArray([1,0,0,1,0,0]);return t=t instanceof je?t.matrixify():"string"==typeof t?fe.fromArray(t.split(re).map(parseFloat)):Array.isArray(t)?fe.fromArray(t):"object"==typeof t&&fe.isMatrixLike(t)?t:"object"==typeof t?(new fe).transform(t):6===arguments.length?fe.fromArray([].slice.call(arguments)):e,this.a=null!=t.a?t.a:e.a,this.b=null!=t.b?t.b:e.b,this.c=null!=t.c?t.c:e.c,this.d=null!=t.d?t.d:e.d,this.e=null!=t.e?t.e:e.e,this.f=null!=t.f?t.f:e.f,this}inverse(){return this.clone().inverseO()}inverseO(){const t=this.a,e=this.b,i=this.c,s=this.d,n=this.e,r=this.f,o=t*s-e*i;if(!o)throw new Error("Cannot invert "+this);const h=s/o,a=-e/o,l=-i/o,u=t/o,c=-(h*n+l*r),d=-(a*n+u*r);return this.a=h,this.b=a,this.c=l,this.d=u,this.e=c,this.f=d,this}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){const e=t instanceof fe?t:new fe(t);return fe.matrixMultiply(e,this,this)}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){const e=t instanceof fe?t:new fe(t);return fe.matrixMultiply(this,e,this)}rotate(t,e,i){return this.clone().rotateO(t,e,i)}rotateO(t,e=0,i=0){t=$t(t);const s=Math.cos(t),n=Math.sin(t),{a:r,b:o,c:h,d:a,e:l,f:u}=this;return this.a=r*s-o*n,this.b=o*s+r*n,this.c=h*s-a*n,this.d=a*s+h*n,this.e=l*s-u*n+i*n-e*s+e,this.f=u*s+l*n-e*n-i*s+i,this}scale(t,e,i,s){return this.clone().scaleO(...arguments)}scaleO(t,e=t,i=0,s=0){3===arguments.length&&(s=i,i=e,e=t);const{a:n,b:r,c:o,d:h,e:a,f:l}=this;return this.a=n*t,this.b=r*e,this.c=o*t,this.d=h*e,this.e=a*t-i*t+i,this.f=l*e-s*e+s,this}shear(t,e,i){return this.clone().shearO(t,e,i)}shearO(t,e=0,i=0){const{a:s,b:n,c:r,d:o,e:h,f:a}=this;return this.a=s+n*t,this.c=r+o*t,this.e=h+a*t-i*t,this}skew(t,e,i,s){return this.clone().skewO(...arguments)}skewO(t,e=t,i=0,s=0){3===arguments.length&&(s=i,i=e,e=t),t=$t(t),e=$t(e);const n=Math.tan(t),r=Math.tan(e),{a:o,b:h,c:a,d:l,e:u,f:c}=this;return this.a=o+h*n,this.b=h+o*r,this.c=a+l*n,this.d=l+a*r,this.e=u+c*n-s*n,this.f=c+u*r-i*r,this}skewX(t,e,i){return this.skew(t,0,e,i)}skewY(t,e,i){return this.skew(0,t,e,i)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(t){if(fe.isMatrixLike(t)){return new fe(t).multiplyO(this)}const e=fe.formatTransforms(t),{x:i,y:s}=new ce(e.ox,e.oy).transform(this),n=(new fe).translateO(e.rx,e.ry).lmultiplyO(this).translateO(-i,-s).scaleO(e.scaleX,e.scaleY).skewO(e.skewX,e.skewY).shearO(e.shear).rotateO(e.theta).translateO(i,s);if(isFinite(e.px)||isFinite(e.py)){const t=new ce(i,s).transform(n),r=isFinite(e.px)?e.px-t.x:0,o=isFinite(e.py)?e.py-t.y:0;n.translateO(r,o)}return n.translateO(e.tx,e.ty),n}translate(t,e){return this.clone().translateO(t,e)}translateO(t,e){return this.e+=t||0,this.f+=e||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function pe(){if(!pe.nodes){const t=zt().size(2,0);t.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),t.attr("focusable","false"),t.attr("aria-hidden","true");const e=t.path().node;pe.nodes={svg:t,path:e}}if(!pe.nodes.svg.node.parentNode){const t=Pt.document.body||Pt.document.documentElement;pe.nodes.svg.addTo(t)}return pe.nodes}function me(t){return!(t.width||t.height||t.x||t.y)}Ft(fe,"Matrix");class ye{constructor(...t){this.init(...t)}addOffset(){return this.x+=Pt.window.pageXOffset,this.y+=Pt.window.pageYOffset,new ye(this)}init(t){return t="string"==typeof t?t.split(re).map(parseFloat):Array.isArray(t)?t:"object"==typeof t?[null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height]:4===arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return me(this)}merge(t){const e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),s=Math.max(this.x+this.width,t.x+t.width)-e,n=Math.max(this.y+this.height,t.y+t.height)-i;return new ye(e,i,s,n)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(t){t instanceof fe||(t=new fe(t));let e=1/0,i=-1/0,s=1/0,n=-1/0;return[new ce(this.x,this.y),new ce(this.x2,this.y),new ce(this.x,this.y2),new ce(this.x2,this.y2)].forEach((function(r){r=r.transform(t),e=Math.min(e,r.x),i=Math.max(i,r.x),s=Math.min(s,r.y),n=Math.max(n,r.y)})),new ye(e,s,i-e,n-s)}}function ge(t,e,i){let s;try{if(s=e(t.node),me(s)&&((n=t.node)!==Pt.document&&!(Pt.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===Pt.document}).call(Pt.document.documentElement,n)))throw new Error("Element not in the dom")}catch(e){s=i(t)}var n;return s}vt({viewbox:{viewbox(t,e,i,s){return null==t?new ye(this.attr("viewBox")):this.attr("viewBox",new ye(t,e,i,s))},zoom(t,e){let{width:i,height:s}=this.attr(["width","height"]);if((i||s)&&"string"!=typeof i&&"string"!=typeof s||(i=this.node.clientWidth,s=this.node.clientHeight),!i||!s)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const n=this.viewbox(),r=i/n.width,o=s/n.height,h=Math.min(r,o);if(null==t)return h;let a=h/t;a===1/0&&(a=Number.MAX_SAFE_INTEGER/100),e=e||new ce(i/2/r+n.x,s/2/o+n.y);const l=new ye(n).transform(new fe({scale:a,origin:e}));return this.viewbox(l)}}}),Ft(ye,"Box");class we extends Array{constructor(t=[],...e){if(super(t,...e),"number"==typeof t)return this;this.length=0,this.push(...t)}}Yt([we],{each(t,...e){return"function"==typeof t?this.map(((e,i,s)=>t.call(e,e,i,s))):this.map((i=>i[t](...e)))},toArray(){return Array.prototype.concat.apply([],this)}});const ve=["toArray","constructor","each"];function _e(t,e){return new we(bt((e||Pt.document).querySelectorAll(t),(function(t){return Ut(t)})))}we.extend=function(t){t=t.reduce(((t,e)=>(ve.includes(e)||"_"===e[0]||(t[e]=function(...t){return this.each(e,...t)}),t)),{}),Yt([we],t)};let xe=0;const be={};function Ae(t){let e=t.getEventHolder();return e===Pt.window&&(e=be),e.events||(e.events={}),e.events}function $e(t){return t.getEventTarget()}function Se(t,e,i,s,n){const r=i.bind(s||t),o=zt(t),h=Ae(o),a=$e(o);e=Array.isArray(e)?e:e.split(re),i._svgjsListenerId||(i._svgjsListenerId=++xe),e.forEach((function(t){const e=t.split(".")[0],s=t.split(".")[1]||"*";h[e]=h[e]||{},h[e][s]=h[e][s]||{},h[e][s][i._svgjsListenerId]=r,a.addEventListener(e,r,n||!1)}))}function Ee(t,e,i,s){const n=zt(t),r=Ae(n),o=$e(n);("function"!=typeof i||(i=i._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(re)).forEach((function(t){const e=t&&t.split(".")[0],h=t&&t.split(".")[1];let a,l;if(i)r[e]&&r[e][h||"*"]&&(o.removeEventListener(e,r[e][h||"*"][i],s||!1),delete r[e][h||"*"][i]);else if(e&&h){if(r[e]&&r[e][h]){for(l in r[e][h])Ee(o,[e,h].join("."),l);delete r[e][h]}}else if(h)for(t in r)for(a in r[t])h===a&&Ee(o,[t,h].join("."));else if(e){if(r[e]){for(a in r[e])Ee(o,[e,a].join("."));delete r[e]}}else{for(t in r)Ee(o,t);!function(t){let e=t.getEventHolder();e===Pt.window&&(e=be),e.events&&(e.events={})}(n)}}))}class Ce extends Lt{addEventListener(){}dispatch(t,e,i){return function(t,e,i,s){const n=$e(t);return e instanceof Pt.window.Event||(e=new Pt.window.CustomEvent(e,{detail:i,cancelable:!0,...s})),n.dispatchEvent(e),e}(this,t,e,i)}dispatchEvent(t){const e=this.getEventHolder().events;if(!e)return!0;const i=e[t.type];for(const e in i)for(const s in i[e])i[e][s](t);return!t.defaultPrevented}fire(t,e,i){return this.dispatch(t,e,i),this}getEventHolder(){return this}getEventTarget(){return this}off(t,e){return Ee(this,t,e),this}on(t,e,i,s){return Se(this,t,e,i,s),this}removeEventListener(){}}function Te(){}Ft(Ce,"EventTarget");const Me=400,Oe=">",ke=0,Ne={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class Pe extends Array{constructor(...t){super(...t),this.init(...t)}clone(){return new this.constructor(this)}init(t){return"number"==typeof t||(this.length=0,this.push(...this.parse(t))),this}parse(t=[]){return t instanceof Array?t:t.trim().split(re).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const t=[];return t.push(...this),t}}class Le{constructor(...t){this.init(...t)}convert(t){return new Le(this.value,t)}divide(t){return t=new Le(t),new Le(this/t,this.unit||t.unit)}init(t,e){return e=Array.isArray(t)?t[1]:e,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(Wt))&&(this.value=parseFloat(e[1]),"%"===e[5]?this.value/=100:"s"===e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof Le&&(this.value=t.valueOf(),this.unit=t.unit),this}minus(t){return t=new Le(t),new Le(this-t,this.unit||t.unit)}plus(t){return t=new Le(t),new Le(this+t,this.unit||t.unit)}times(t){return t=new Le(t),new Le(this*t,this.unit||t.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const Re=[];class De extends Ce{constructor(t,e){super(),this.node=t,this.type=t.nodeName,e&&t!==e&&this.attr(e)}add(t,e){return(t=zt(t)).removeNamespace&&this.node instanceof Pt.window.SVGElement&&t.removeNamespace(),null==e?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}addTo(t,e){return zt(t).put(this,e)}children(){return new we(bt(this.node.children,(function(t){return Ut(t)})))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(t=!0){return this.writeDataToDom(),new this.constructor(Xt(this.node.cloneNode(t)))}each(t,e){const i=this.children();let s,n;for(s=0,n=i.length;s<n;s++)t.apply(i[s],[s,i]),e&&i[s].each(t,e);return this}element(t,e){return this.put(new De(jt(t),e))}first(){return Ut(this.node.firstChild)}get(t){return Ut(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return this.index(t)>=0}html(t,e){return this.xml(t,e,"http://www.w3.org/1999/xhtml")}id(t){return void 0!==t||this.node.id||(this.node.id=Bt(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return Ut(this.node.lastChild)}matches(t){const e=this.node,i=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return i&&i.call(e,t)}parent(t){let e=this;if(!e.node.parentNode)return null;if(e=Ut(e.node.parentNode),!t)return e;do{if("string"==typeof t?e.matches(t):e instanceof t)return e}while(e=Ut(e.node.parentNode));return e}put(t,e){return t=zt(t),this.add(t,e),t}putIn(t,e){return zt(t).add(this,e)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=zt(t),this.node.parentNode&&this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,e=null){const i=10**t,s=this.attr(e);for(const t in s)"number"==typeof s[t]&&(s[t]=Math.round(s[t]*i)/i);return this.attr(s),this}svg(t,e){return this.xml(t,e,Ot)}toString(){return this.id()}words(t){return this.node.textContent=t,this}wrap(t){const e=this.parent();if(!e)return this.addTo(t);const i=e.index(this);return e.put(t,i).put(this)}writeDataToDom(){return this.each((function(){this.writeDataToDom()})),this}xml(t,e,i){if("boolean"==typeof t&&(i=e,e=t,t=null),null==t||"function"==typeof t){e=e??!0,this.writeDataToDom();let i=this;if(null!=t){if(i=Ut(i.node.cloneNode(!0)),e){const e=t(i);if(i=e||i,!1===e)return""}i.each((function(){const e=t(this),i=e||this;!1===e?this.remove():e&&this!==i&&this.replace(i)}),!0)}return e?i.node.outerHTML:i.node.innerHTML}e=e??!1;const s=jt("wrapper",i),n=Pt.document.createDocumentFragment();s.innerHTML=t;for(let t=s.children.length;t--;)n.appendChild(s.firstElementChild);const r=this.parent();return e?this.replace(n)&&r:this.add(n)}}Yt(De,{attr:function(t,e,i){if(null==t){t={},e=this.node.attributes;for(const i of e)t[i.nodeName]=se.test(i.nodeValue)?parseFloat(i.nodeValue):i.nodeValue;return t}if(t instanceof Array)return t.reduce(((t,e)=>(t[e]=this.attr(e),t)),{});if("object"==typeof t&&t.constructor===Object)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?Ne[t]:se.test(e)?parseFloat(e):e;"number"==typeof(e=Re.reduce(((e,i)=>i(t,e,this)),e))?e=new Le(e):ue.isColor(e)?e=new ue(e):e.constructor===Array&&(e=new Pe(e)),"leading"===t?this.leading&&this.leading(e):"string"==typeof i?this.node.setAttributeNS(i,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!==t&&"x"!==t||this.rebuild()}return this},find:function(t){return _e(t,this.node)},findOne:function(t){return Ut(this.node.querySelector(t))}}),Ft(De,"Dom");class je extends De{constructor(t,e){super(t,e),this.dom={},this.node.instance=this,t.hasAttribute("svgjs:data")&&this.setData(JSON.parse(t.getAttribute("svgjs:data"))||{})}center(t,e){return this.cx(t).cy(e)}cx(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)}cy(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)}defs(){const t=this.root();return t&&t.defs()}dmove(t,e){return this.dx(t).dy(e)}dx(t=0){return this.x(new Le(t).plus(this.x()))}dy(t=0){return this.y(new Le(t).plus(this.y()))}getEventHolder(){return this}height(t){return this.attr("height",t)}move(t,e){return this.x(t).y(e)}parents(t=this.root()){t=zt(t);const e=new we;let i=this;for(;(i=i.parent())&&i.node!==Pt.document&&"#document-fragment"!==i.nodeName&&(e.push(i),i.node!==t.node););return e}reference(t){if(!(t=this.attr(t)))return null;const e=(t+"").match(Jt);return e?zt(e[1]):null}root(){const t=this.parent(Rt[Dt]);return t&&t.root()}setData(t){return this.dom=t,this}size(t,e){const i=Tt(this,t,e);return this.width(new Le(i.width)).height(new Le(i.height))}width(t){return this.attr("width",t)}writeDataToDom(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),super.writeDataToDom()}x(t){return this.attr("x",t)}y(t){return this.attr("y",t)}}Yt(je,{bbox:function(){const t=ge(this,(t=>t.getBBox()),(t=>{try{const e=t.clone().addTo(pe().svg).show(),i=e.node.getBBox();return e.remove(),i}catch(e){throw new Error(`Getting bbox of element "${t.node.nodeName}" is not possible: ${e.toString()}`)}}));return new ye(t)},rbox:function(t){const e=ge(this,(t=>t.getBoundingClientRect()),(t=>{throw new Error(`Getting rbox of element "${t.node.nodeName}" is not possible`)})),i=new ye(e);return t?i.transform(t.screenCTM().inverseO()):i.addOffset()},inside:function(t,e){const i=this.bbox();return t>i.x&&e>i.y&&t<i.x+i.width&&e<i.y+i.height},point:function(t,e){return new ce(t,e).transform(this.screenCTM().inverse())},ctm:function(){return new fe(this.node.getCTM())},screenCTM:function(){if("function"==typeof this.isRoot&&!this.isRoot()){const t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new fe(e)}return new fe(this.node.getScreenCTM())}}),Ft(je,"Element");const ze={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"===e?t:t+"-"+e}};["fill","stroke"].forEach((function(t){const e={};let i;e[t]=function(e){if(void 0===e)return this.attr(t);if("string"==typeof e||e instanceof ue||ue.isRgb(e)||e instanceof je)this.attr(t,e);else for(i=ze[t].length-1;i>=0;i--)null!=e[ze[t][i]]&&this.attr(ze.prefix(t,ze[t][i]),e[ze[t][i]]);return this},vt(["Element","Runner"],e)})),vt(["Element","Runner"],{matrix:function(t,e,i,s,n,r){return null==t?new fe(this):this.attr("transform",new fe(t,e,i,s,n,r))},rotate:function(t,e,i){return this.transform({rotate:t,ox:e,oy:i},!0)},skew:function(t,e,i,s){return 1===arguments.length||3===arguments.length?this.transform({skew:t,ox:e,oy:i},!0):this.transform({skew:[t,e],ox:i,oy:s},!0)},shear:function(t,e,i){return this.transform({shear:t,ox:e,oy:i},!0)},scale:function(t,e,i,s){return 1===arguments.length||3===arguments.length?this.transform({scale:t,ox:e,oy:i},!0):this.transform({scale:[t,e],ox:i,oy:s},!0)},translate:function(t,e){return this.transform({translate:[t,e]},!0)},relative:function(t,e){return this.transform({relative:[t,e]},!0)},flip:function(t="both",e="center"){return-1==="xybothtrue".indexOf(t)&&(e=t,t="both"),this.transform({flip:t,origin:e},!0)},opacity:function(t){return this.attr("opacity",t)}}),vt("radius",{radius:function(t,e=t){return"radialGradient"===(this._element||this).type?this.attr("r",new Le(t)):this.rx(t).ry(e)}}),vt("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(t){return new ce(this.node.getPointAtLength(t))}}),vt(["Element","Runner"],{font:function(t,e){if("object"==typeof t){for(e in t)this.font(e,t[e]);return this}return"leading"===t?this.leading(e):"anchor"===t?this.attr("text-anchor",e):"size"===t||"family"===t||"weight"===t||"stretch"===t||"variant"===t||"style"===t?this.attr("font-"+t,e):this.attr(t,e)}});const Ie=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce((function(t,e){return t[e]=function(t){return null===t?this.off(e):this.on(e,t),this},t}),{});vt("Element",Ie),vt("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){const t=(this.attr("transform")||"").split(Zt).slice(0,-1).map((function(t){const e=t.trim().split("(");return[e[0],e[1].split(re).map((function(t){return parseFloat(t)}))]})).reverse().reduce((function(t,e){return"matrix"===e[0]?t.lmultiply(fe.fromArray(e[1])):t[e[0]].apply(t,e[1])}),new fe);return t},toParent:function(t,e){if(this===t)return this;const i=this.screenCTM(),s=t.screenCTM().inverse();return this.addTo(t,e).untransform().transform(s.multiply(i)),this},toRoot:function(t){return this.toParent(this.root(),t)},transform:function(t,e){if(null==t||"string"==typeof t){const e=new fe(this).decompose();return null==t?e:e[t]}fe.isMatrixLike(t)||(t={...t,origin:Mt(t,this)});const i=new fe(!0===e?this:e||!1).transform(t);return this.attr("transform",i)}});class Ue extends je{flatten(t=this,e){return this.each((function(){if(this instanceof Ue)return this.flatten().ungroup()})),this}ungroup(t=this.parent(),e=t.index(this)){return e=-1===e?t.children().length:e,this.each((function(i,s){return s[s.length-i-1].toParent(t,e)})),this.remove()}}Ft(Ue,"Container");class He extends Ue{constructor(t,e=t){super(It("defs",t),e)}flatten(){return this}ungroup(){return this}}Ft(He,"Defs");class Fe extends je{}function qe(t){return this.attr("rx",t)}function Be(t){return this.attr("ry",t)}function Xe(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())}function Ye(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())}function Ve(t){return this.attr("cx",t)}function We(t){return this.attr("cy",t)}function Ge(t){return null==t?2*this.rx():this.rx(new Le(t).divide(2))}function Qe(t){return null==t?2*this.ry():this.ry(new Le(t).divide(2))}Ft(Fe,"Shape");var Je=Object.freeze({__proto__:null,rx:qe,ry:Be,x:Xe,y:Ye,cx:Ve,cy:We,width:Ge,height:Qe});class Ze extends Fe{constructor(t,e=t){super(It("ellipse",t),e)}size(t,e){const i=Tt(this,t,e);return this.rx(new Le(i.width).divide(2)).ry(new Le(i.height).divide(2))}}Yt(Ze,Je),vt("Container",{ellipse:Vt((function(t=0,e=t){return this.put(new Ze).size(t,e).move(0,0)}))}),Ft(Ze,"Ellipse");class Ke extends De{constructor(t=Pt.document.createDocumentFragment()){super(t)}xml(t,e,i){if("boolean"==typeof t&&(i=e,e=t,t=null),null==t||"function"==typeof t){const t=new De(jt("wrapper",i));return t.add(this.node.cloneNode(!0)),t.xml(!1,i)}return super.xml(t,!1,i)}}function ti(t,e){return"radialGradient"===(this._element||this).type?this.attr({fx:new Le(t),fy:new Le(e)}):this.attr({x1:new Le(t),y1:new Le(e)})}function ei(t,e){return"radialGradient"===(this._element||this).type?this.attr({cx:new Le(t),cy:new Le(e)}):this.attr({x2:new Le(t),y2:new Le(e)})}Ft(Ke,"Fragment");var ii,si=Object.freeze({__proto__:null,from:ti,to:ei});class ni extends Ue{constructor(t,e){super(It(t+"Gradient","string"==typeof t?null:t),e)}attr(t,e,i){return"transform"===t&&(t="gradientTransform"),super.attr(t,e,i)}bbox(){return new ye}targets(){return _e('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return'url("#'+this.id()+'")'}}Yt(ni,si),vt({Container:{gradient(...t){return this.defs().gradient(...t)}},Defs:{gradient:Vt((function(t,e){return this.put(new ni(t)).update(e)}))}}),Ft(ni,"Gradient");class ri extends Ue{constructor(t,e=t){super(It("pattern",t),e)}attr(t,e,i){return"transform"===t&&(t="patternTransform"),super.attr(t,e,i)}bbox(){return new ye}targets(){return _e('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return'url("#'+this.id()+'")'}}vt({Container:{pattern(...t){return this.defs().pattern(...t)}},Defs:{pattern:Vt((function(t,e,i){return this.put(new ri).update(i).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}))}}),Ft(ri,"Pattern");class oi extends Fe{constructor(t,e=t){super(It("image",t),e)}load(t,e){if(!t)return this;const i=new Pt.window.Image;return Se(i,"load",(function(t){const s=this.parent(ri);0===this.width()&&0===this.height()&&this.size(i.width,i.height),s instanceof ri&&0===s.width()&&0===s.height()&&s.size(this.width(),this.height()),"function"==typeof e&&e.call(this,t)}),this),Se(i,"load error",(function(){Ee(i)})),this.attr("href",i.src=t,Nt)}}ii=function(t,e,i){return"fill"!==t&&"stroke"!==t||ne.test(e)&&(e=i.root().defs().image(e)),e instanceof oi&&(e=i.root().defs().pattern(0,0,(t=>{t.add(e)}))),e},Re.push(ii),vt({Container:{image:Vt((function(t,e){return this.put(new oi).size(0,0).load(t,e)}))}}),Ft(oi,"Image");class hi extends Pe{bbox(){let t=-1/0,e=-1/0,i=1/0,s=1/0;return this.forEach((function(n){t=Math.max(n[0],t),e=Math.max(n[1],e),i=Math.min(n[0],i),s=Math.min(n[1],s)})),new ye(i,s,t-i,e-s)}move(t,e){const i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(let i=this.length-1;i>=0;i--)this[i]=[this[i][0]+t,this[i][1]+e];return this}parse(t=[0,0]){const e=[];(t=t instanceof Array?Array.prototype.concat.apply([],t):t.trim().split(re).map(parseFloat)).length%2!=0&&t.pop();for(let i=0,s=t.length;i<s;i+=2)e.push([t[i],t[i+1]]);return e}size(t,e){let i;const s=this.bbox();for(i=this.length-1;i>=0;i--)s.width&&(this[i][0]=(this[i][0]-s.x)*t/s.width+s.x),s.height&&(this[i][1]=(this[i][1]-s.y)*e/s.height+s.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const t=[];for(let e=0,i=this.length;e<i;e++)t.push(this[e].join(","));return t.join(" ")}transform(t){return this.clone().transformO(t)}transformO(t){fe.isMatrixLike(t)||(t=new fe(t));for(let e=this.length;e--;){const[i,s]=this[e];this[e][0]=t.a*i+t.c*s+t.e,this[e][1]=t.b*i+t.d*s+t.f}return this}}const ai=hi;var li=Object.freeze({__proto__:null,MorphArray:ai,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){const e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){const e=this.bbox();return null==t?e.height:this.size(e.width,t)}});class ui extends Fe{constructor(t,e=t){super(It("line",t),e)}array(){return new hi([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(t,e){return this.attr(this.array().move(t,e).toLine())}plot(t,e,i,s){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:i,y2:s}:new hi(t).toLine(),this.attr(t))}size(t,e){const i=Tt(this,t,e);return this.attr(this.array().size(i.width,i.height).toLine())}}Yt(ui,li),vt({Container:{line:Vt((function(...t){return ui.prototype.plot.apply(this.put(new ui),null!=t[0]?t:[0,0,0,0])}))}}),Ft(ui,"Line");class ci extends Ue{constructor(t,e=t){super(It("marker",t),e)}height(t){return this.attr("markerHeight",t)}orient(t){return this.attr("orient",t)}ref(t,e){return this.attr("refX",t).attr("refY",e)}toString(){return"url(#"+this.id()+")"}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}width(t){return this.attr("markerWidth",t)}}function di(t,e){return function(i){return null==i?this[t]:(this[t]=i,e&&e.call(this),this)}}vt({Container:{marker(...t){return this.defs().marker(...t)}},Defs:{marker:Vt((function(t,e,i){return this.put(new ci).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(i)}))},marker:{marker(t,e,i,s){let n=["marker"];return"all"!==t&&n.push(t),n=n.join("-"),t=arguments[1]instanceof ci?arguments[1]:this.defs().marker(e,i,s),this.attr(n,t)}}}),Ft(ci,"Marker");const fi={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)},bezier:function(t,e,i,s){return function(n){return n<0?t>0?e/t*n:i>0?s/i*n:0:n>1?i<1?(1-s)/(1-i)*n+(s-i)/(1-i):t<1?(1-e)/(1-t)*n+(e-t)/(1-t):1:3*n*(1-n)**2*e+3*n**2*(1-n)*s+n**3}},steps:function(t,e="end"){e=e.split("-").reverse()[0];let i=t;return"none"===e?--i:"both"===e&&++i,(s,n=!1)=>{let r=Math.floor(s*t);const o=s*r%1==0;return"start"!==e&&"both"!==e||++r,n&&o&&--r,s>=0&&r<0&&(r=0),s<=1&&r>i&&(r=i),r/i}}};class pi{done(){return!1}}class mi extends pi{constructor(t=Oe){super(),this.ease=fi[t]||t}step(t,e,i){return"number"!=typeof t?i<1?t:e:t+(e-t)*this.ease(i)}}class yi extends pi{constructor(t){super(),this.stepper=t}done(t){return t.done}step(t,e,i,s){return this.stepper(t,e,i,s)}}function gi(){const t=(this._duration||500)/1e3,e=this._overshoot||0,i=Math.PI,s=Math.log(e/100+1e-10),n=-s/Math.sqrt(i*i+s*s),r=3.9/(n*t);this.d=2*n*r,this.k=r*r}Yt(class extends yi{constructor(t=500,e=0){super(),this.duration(t).overshoot(e)}step(t,e,i,s){if("string"==typeof t)return t;if(s.done=i===1/0,i===1/0)return e;if(0===i)return t;i>100&&(i=16),i/=1e3;const n=s.velocity||0,r=-this.d*n-this.k*(t-e),o=t+n*i+r*i*i/2;return s.velocity=n+r*i,s.done=Math.abs(e-o)+Math.abs(n)<.002,s.done?e:o}},{duration:di("_duration",gi),overshoot:di("_overshoot",gi)});Yt(class extends yi{constructor(t=.1,e=.01,i=0,s=1e3){super(),this.p(t).i(e).d(i).windup(s)}step(t,e,i,s){if("string"==typeof t)return t;if(s.done=i===1/0,i===1/0)return e;if(0===i)return t;const n=e-t;let r=(s.integral||0)+n*i;const o=(n-(s.error||0))/i,h=this._windup;return!1!==h&&(r=Math.max(-h,Math.min(r,h))),s.error=n,s.integral=r,s.done=Math.abs(n)<.001,s.done?e:t+(this.P*n+this.I*r+this.D*o)}},{windup:di("_windup"),p:di("P"),i:di("I"),d:di("D")});const wi={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},vi={M:function(t,e,i){return e.x=i.x=t[0],e.y=i.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,i){return e.x=i.x,e.y=i.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},_i="mlhvqtcsaz".split("");for(let t=0,e=_i.length;t<e;++t)vi[_i[t]]=function(t){return function(e,i,s){if("H"===t)e[0]=e[0]+i.x;else if("V"===t)e[0]=e[0]+i.y;else if("A"===t)e[5]=e[5]+i.x,e[6]=e[6]+i.y;else for(let t=0,s=e.length;t<s;++t)e[t]=e[t]+(t%2?i.y:i.x);return vi[t](e,i,s)}}(_i[t].toUpperCase());function xi(t){return t.segment.length&&t.segment.length-1===wi[t.segment[0].toUpperCase()]}function bi(t,e){t.inNumber&&Ai(t,!1);const i=oe.test(e);if(i)t.segment=[e];else{const e=t.lastCommand,i=e.toLowerCase(),s=e===i;t.segment=["m"===i?s?"l":"L":e]}return t.inSegment=!0,t.lastCommand=t.segment[0],i}function Ai(t,e){if(!t.inNumber)throw new Error("Parser Error");t.number&&t.segment.push(parseFloat(t.number)),t.inNumber=e,t.number="",t.pointSeen=!1,t.hasExponent=!1,xi(t)&&$i(t)}function $i(t){t.inSegment=!1,t.absolute&&(t.segment=function(t){const e=t.segment[0];return vi[e](t.segment.slice(1),t.p,t.p0)}(t)),t.segments.push(t.segment)}function Si(t){if(!t.segment.length)return!1;const e="A"===t.segment[0].toUpperCase(),i=t.segment.length;return e&&(4===i||5===i)}function Ei(t){return"E"===t.lastToken.toUpperCase()}class Ci extends Pe{bbox(){return pe().path.setAttribute("d",this.toString()),new ye(pe.nodes.path.getBBox())}move(t,e){const i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(let i,s=this.length-1;s>=0;s--)i=this[s][0],"M"===i||"L"===i||"T"===i?(this[s][1]+=t,this[s][2]+=e):"H"===i?this[s][1]+=t:"V"===i?this[s][1]+=e:"C"===i||"S"===i||"Q"===i?(this[s][1]+=t,this[s][2]+=e,this[s][3]+=t,this[s][4]+=e,"C"===i&&(this[s][5]+=t,this[s][6]+=e)):"A"===i&&(this[s][6]+=t,this[s][7]+=e);return this}parse(t="M0 0"){return Array.isArray(t)&&(t=Array.prototype.concat.apply([],t).toString()),function(t,e=!0){let i=0,s="";const n={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:e,p0:new ce,p:new ce};for(;n.lastToken=s,s=t.charAt(i++);)if(n.inSegment||!bi(n,s))if("."!==s)if(isNaN(parseInt(s)))if(" "!==s&&","!==s)if("-"!==s)if("E"!==s.toUpperCase()){if(oe.test(s)){if(n.inNumber)Ai(n,!1);else{if(!xi(n))throw new Error("parser Error");$i(n)}--i}}else n.number+=s,n.hasExponent=!0;else{if(n.inNumber&&!Ei(n)){Ai(n,!1),--i;continue}n.number+=s,n.inNumber=!0}else n.inNumber&&Ai(n,!1);else{if("0"===n.number||Si(n)){n.inNumber=!0,n.number=s,Ai(n,!0);continue}n.inNumber=!0,n.number+=s}else{if(n.pointSeen||n.hasExponent){Ai(n,!1),--i;continue}n.inNumber=!0,n.pointSeen=!0,n.number+=s}return n.inNumber&&Ai(n,!1),n.inSegment&&xi(n)&&$i(n),n.segments}(t)}size(t,e){const i=this.bbox();let s,n;for(i.width=0===i.width?1:i.width,i.height=0===i.height?1:i.height,s=this.length-1;s>=0;s--)n=this[s][0],"M"===n||"L"===n||"T"===n?(this[s][1]=(this[s][1]-i.x)*t/i.width+i.x,this[s][2]=(this[s][2]-i.y)*e/i.height+i.y):"H"===n?this[s][1]=(this[s][1]-i.x)*t/i.width+i.x:"V"===n?this[s][1]=(this[s][1]-i.y)*e/i.height+i.y:"C"===n||"S"===n||"Q"===n?(this[s][1]=(this[s][1]-i.x)*t/i.width+i.x,this[s][2]=(this[s][2]-i.y)*e/i.height+i.y,this[s][3]=(this[s][3]-i.x)*t/i.width+i.x,this[s][4]=(this[s][4]-i.y)*e/i.height+i.y,"C"===n&&(this[s][5]=(this[s][5]-i.x)*t/i.width+i.x,this[s][6]=(this[s][6]-i.y)*e/i.height+i.y)):"A"===n&&(this[s][1]=this[s][1]*t/i.width,this[s][2]=this[s][2]*e/i.height,this[s][6]=(this[s][6]-i.x)*t/i.width+i.x,this[s][7]=(this[s][7]-i.y)*e/i.height+i.y);return this}toString(){return function(t){let e="";for(let i=0,s=t.length;i<s;i++)e+=t[i][0],null!=t[i][1]&&(e+=t[i][1],null!=t[i][2]&&(e+=" ",e+=t[i][2],null!=t[i][3]&&(e+=" ",e+=t[i][3],e+=" ",e+=t[i][4],null!=t[i][5]&&(e+=" ",e+=t[i][5],e+=" ",e+=t[i][6],null!=t[i][7]&&(e+=" ",e+=t[i][7])))));return e+" "}(this)}}const Ti=t=>{const e=typeof t;return"number"===e?Le:"string"===e?ue.isColor(t)?ue:re.test(t)?oe.test(t)?Ci:Pe:Wt.test(t)?Le:Oi:Li.indexOf(t.constructor)>-1?t.constructor:Array.isArray(t)?Pe:"object"===e?Pi:Oi};class Mi{constructor(t){this._stepper=t||new mi("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(t){const e=this;return this._morphObj.fromArray(this._from.map((function(i,s){return e._stepper.step(i,e._to[s],t,e._context[s],e._context)})))}done(){return this._context.map(this._stepper.done).reduce((function(t,e){return t&&e}),!0)}from(t){return null==t?this._from:(this._from=this._set(t),this)}stepper(t){return null==t?this._stepper:(this._stepper=t,this)}to(t){return null==t?this._to:(this._to=this._set(t),this)}type(t){return null==t?this._type:(this._type=t,this)}_set(t){this._type||this.type(Ti(t));let e=new this._type(t);return this._type===ue&&(e=this._to?e[this._to[4]]():this._from?e[this._from[4]]():e),this._type===Pi&&(e=this._to?e.align(this._to):this._from?e.align(this._from):e),e=e.toArray(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(e.length)).map(Object).map((function(t){return t.done=!0,t})),e}}class Oi{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}toArray(){return[this.value]}valueOf(){return this.value}}class ki{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,ki.defaults,t),this}toArray(){const t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}ki.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const Ni=(t,e)=>t[0]<e[0]?-1:t[0]>e[0]?1:0;class Pi{constructor(...t){this.init(...t)}align(t){for(let e=0,i=this.values.length;e<i;++e)if(this.values[e]===ue){const i=t[e+6],s=new ue(this.values.splice(e+2,5))[i]().toArray();this.values.splice(e+2,0,...s)}return this}init(t){if(this.values=[],Array.isArray(t))return void(this.values=t.slice());t=t||{};const e=[];for(const i in t){const s=Ti(t[i]),n=new s(t[i]).toArray();e.push([i,s,n.length,...n])}return e.sort(Ni),this.values=e.reduce(((t,e)=>t.concat(e)),[]),this}toArray(){return this.values}valueOf(){const t={},e=this.values;for(;e.length;){const i=e.shift(),s=e.shift(),n=e.shift(),r=e.splice(0,n);t[i]=new s(r).valueOf()}return t}}const Li=[Oi,ki,Pi];class Ri extends Fe{constructor(t,e=t){super(It("path",t),e)}array(){return this._array||(this._array=new Ci(this.attr("d")))}clear(){return delete this._array,this}height(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}move(t,e){return this.attr("d",this.array().move(t,e))}plot(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new Ci(t))}size(t,e){const i=Tt(this,t,e);return this.attr("d",this.array().size(i.width,i.height))}width(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)}x(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)}y(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)}}Ri.prototype.MorphArray=Ci,vt({Container:{path:Vt((function(t){return this.put(new Ri).plot(t||new Ci)}))}}),Ft(Ri,"Path");var Di=Object.freeze({__proto__:null,array:function(){return this._array||(this._array=new hi(this.attr("points")))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new hi(t))},size:function(t,e){const i=Tt(this,t,e);return this.attr("points",this.array().size(i.width,i.height))}});class ji extends Fe{constructor(t,e=t){super(It("polygon",t),e)}}vt({Container:{polygon:Vt((function(t){return this.put(new ji).plot(t||new hi)}))}}),Yt(ji,li),Yt(ji,Di),Ft(ji,"Polygon");class zi extends Fe{constructor(t,e=t){super(It("polyline",t),e)}}vt({Container:{polyline:Vt((function(t){return this.put(new zi).plot(t||new hi)}))}}),Yt(zi,li),Yt(zi,Di),Ft(zi,"Polyline");class Ii extends Fe{constructor(t,e=t){super(It("rect",t),e)}}Yt(Ii,{rx:qe,ry:Be}),vt({Container:{rect:Vt((function(t,e){return this.put(new Ii).size(t,e)}))}}),Ft(Ii,"Rect");class Ui{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(t){const e=void 0!==t.next?t:{value:t,next:null,prev:null};return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._last=e,this._first=e),e}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}shift(){const t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}}const Hi={nextDraw:null,frames:new Ui,timeouts:new Ui,immediates:new Ui,timer:()=>Pt.window.performance||Pt.window.Date,transforms:[],frame(t){const e=Hi.frames.push({run:t});return null===Hi.nextDraw&&(Hi.nextDraw=Pt.window.requestAnimationFrame(Hi._draw)),e},timeout(t,e){e=e||0;const i=Hi.timer().now()+e,s=Hi.timeouts.push({run:t,time:i});return null===Hi.nextDraw&&(Hi.nextDraw=Pt.window.requestAnimationFrame(Hi._draw)),s},immediate(t){const e=Hi.immediates.push(t);return null===Hi.nextDraw&&(Hi.nextDraw=Pt.window.requestAnimationFrame(Hi._draw)),e},cancelFrame(t){null!=t&&Hi.frames.remove(t)},clearTimeout(t){null!=t&&Hi.timeouts.remove(t)},cancelImmediate(t){null!=t&&Hi.immediates.remove(t)},_draw(t){let e=null;const i=Hi.timeouts.last();for(;(e=Hi.timeouts.shift())&&(t>=e.time?e.run():Hi.timeouts.push(e),e!==i););let s=null;const n=Hi.frames.last();for(;s!==n&&(s=Hi.frames.shift());)s.run(t);let r=null;for(;r=Hi.immediates.shift();)r();Hi.nextDraw=Hi.timeouts.first()||Hi.frames.first()?Pt.window.requestAnimationFrame(Hi._draw):null}},Fi=function(t){const e=t.start,i=t.runner.duration();return{start:e,duration:i,end:e+i,runner:t.runner}},qi=function(){const t=Pt.window;return(t.performance||t.Date).now()};class Bi extends Ce{constructor(t=qi){super(),this._timeSource=t,this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const t=this.getLastRunnerInfo(),e=t?t.runner.duration():0;return(t?t.start:this._time)+e}getEndTimeOfTimeline(){const t=this._runners.map((t=>t.start+t.runner.duration()));return Math.max(0,...t)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(t){return this._runners[this._runnerIds.indexOf(t)]||null}pause(){return this._paused=!0,this._continue()}persist(t){return null==t?this._persist:(this._persist=t,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(t){const e=this.speed();if(null==t)return this.speed(-e);const i=Math.abs(e);return this.speed(t?-i:i)}schedule(t,e,i){if(null==t)return this._runners.map(Fi);let s=0;const n=this.getEndTime();if(e=e||0,null==i||"last"===i||"after"===i)s=n;else if("absolute"===i||"start"===i)s=e,e=0;else if("now"===i)s=this._time;else if("relative"===i){const i=this.getRunnerInfoById(t.id);i&&(s=i.start+e,e=0)}else{if("with-last"!==i)throw new Error('Invalid value for the "when" parameter');{const t=this.getLastRunnerInfo();s=t?t.start:this._time}}t.unschedule(),t.timeline(this);const r=t.persist(),o={persist:null===r?this._persist:r,start:s+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(o),this._runners.sort(((t,e)=>t.start-e.start)),this._runnerIds=this._runners.map((t=>t.runner.id)),this.updateTime()._continue(),this}seek(t){return this.time(this._time+t)}source(t){return null==t?this._timeSource:(this._timeSource=t,this)}speed(t){return null==t?this._speed:(this._speed=t,this)}stop(){return this.time(0),this.pause()}time(t){return null==t?this._time:(this._time=t,this._continue(!0))}unschedule(t){const e=this._runnerIds.indexOf(t.id);return e<0||(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(t=!1){return Hi.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():(this._paused||(this._nextFrame=Hi.frame(this._step)),this)}_stepFn(t=!1){const e=this._timeSource();let i=e-this._lastSourceTime;t&&(i=0);const s=this._speed*i+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=s,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let t=this._runners.length;t--;){const e=this._runners[t],i=e.runner;this._time-e.start<=0&&i.reset()}let n=!1;for(let t=0,e=this._runners.length;t<e;t++){const i=this._runners[t],r=i.runner;let o=s;const h=this._time-i.start;if(h<=0){n=!0;continue}if(h<o&&(o=h),!r.active())continue;if(r.step(o).done){if(!0!==i.persist){r.duration()-r.time()+this._time+i.persist<this._time&&(r.unschedule(),--t,--e)}}else n=!0}return n&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}}vt({Element:{timeline:function(t){return null==t?(this._timeline=this._timeline||new Bi,this._timeline):(this._timeline=t,this)}}});class Xi extends Ce{constructor(t){super(),this.id=Xi.id++,t="function"==typeof(t=t??Me)?new yi(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration="number"==typeof t&&t,this._isDeclarative=t instanceof yi,this._stepper=this._isDeclarative?t:new mi,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new fe,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(t,e,i){let s=1,n=!1,r=0;return e=e||ke,i=i||"last","object"!=typeof(t=t||Me)||t instanceof pi||(e=t.delay||e,i=t.when||i,n=t.swing||n,s=t.times||s,r=t.wait||r,t=t.duration||Me),{duration:t,delay:e,swing:n,times:s,wait:r,when:i}}active(t){return null==t?this.enabled:(this.enabled=t,this)}addTransform(t,e){return this.transforms.lmultiplyO(t),this}after(t){return this.on("finished",t)}animate(t,e,i){const s=Xi.sanitise(t,e,i),n=new Xi(s.duration);return this._timeline&&n.timeline(this._timeline),this._element&&n.element(this._element),n.loop(s).schedule(s.delay,s.when)}clearTransform(){return this.transforms=new fe,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter((t=>!t.isTransform)))}delay(t){return this.animate(0,t)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(t){return this.queue(null,t)}ease(t){return this._stepper=new mi(t),this}element(t){return null==t?this._element:(this._element=t,t._prepareRunner(),this)}finish(){return this.step(1/0)}loop(t,e,i){return"object"==typeof t&&(e=t.swing,i=t.wait,t=t.times),this._times=t||1/0,this._swing=e||!1,this._wait=i||0,!0===this._times&&(this._times=1/0),this}loops(t){const e=this._duration+this._wait;if(null==t){const t=Math.floor(this._time/e),i=(this._time-t*e)/this._duration;return Math.min(t+i,this._times)}const i=t%1,s=e*Math.floor(t)+this._duration*i;return this.time(s)}persist(t){return null==t?this._persist:(this._persist=t,this)}position(t){const e=this._time,i=this._duration,s=this._wait,n=this._times,r=this._swing,o=this._reverse;let h;if(null==t){const t=function(t){const e=r*Math.floor(t%(2*(s+i))/(s+i)),n=e&&!o||!e&&o,h=Math.pow(-1,n)*(t%(s+i))/i+n;return Math.max(Math.min(h,1),0)},a=n*(s+i)-s;return h=e<=0?Math.round(t(1e-5)):e<a?t(e):Math.round(t(a-1e-5)),h}const a=Math.floor(this.loops()),l=r&&a%2==0;return h=a+(l&&!o||o&&l?t:1-t),this.loops(h)}progress(t){return null==t?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}queue(t,e,i,s){this._queue.push({initialiser:t||Te,runner:e||Te,retarget:i,isTransform:s,initialised:!1,finished:!1});return this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(t){return this._reverse=t??!this._reverse,this}schedule(t,e,i){if(t instanceof Bi||(i=e,e=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,e,i),this}step(t){if(!this.enabled)return this;t=t??16,this._time+=t;const e=this.position(),i=this._lastPosition!==e&&this._time>=0;this._lastPosition=e;const s=this.duration(),n=this._lastTime<=0&&this._time>0,r=this._lastTime<s&&this._time>=s;this._lastTime=this._time,n&&this.fire("start",this);const o=this._isDeclarative;this.done=!o&&!r&&this._time>=s,this._reseted=!1;let h=!1;return(i||o)&&(this._initialise(i),this.transforms=new fe,h=this._run(o?t:e),this.fire("step",this)),this.done=this.done||h&&o,r&&this.fire("finished",this),this}time(t){if(null==t)return this._time;const e=t-this._time;return this.step(e),this}timeline(t){return void 0===t?this._timeline:(this._timeline=t,this)}unschedule(){const t=this.timeline();return t&&t.unschedule(this),this}_initialise(t){if(t||this._isDeclarative)for(let e=0,i=this._queue.length;e<i;++e){const i=this._queue[e],s=this._isDeclarative||!i.initialised&&t;t=!i.finished,s&&t&&(i.initialiser.call(this),i.initialised=!0)}}_rememberMorpher(t,e){if(this._history[t]={morpher:e,caller:this._queue[this._queue.length-1]},this._isDeclarative){const t=this.timeline();t&&t.play()}}_run(t){let e=!0;for(let i=0,s=this._queue.length;i<s;++i){const s=this._queue[i],n=s.runner.call(this,t);s.finished=s.finished||!0===n,e=e&&s.finished}return e}_tryRetarget(t,e,i){if(this._history[t]){if(!this._history[t].caller.initialised){const e=this._queue.indexOf(this._history[t].caller);return this._queue.splice(e,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget.call(this,e,i):this._history[t].morpher.to(e),this._history[t].caller.finished=!1;const s=this.timeline();return s&&s.play(),!0}return!1}}Xi.id=0;class Yi{constructor(t=new fe,e=-1,i=!0){this.transforms=t,this.id=e,this.done=i}clearTransformsFromQueue(){}}Yt([Xi,Yi],{mergeWith(t){return new Yi(t.transforms.lmultiply(this.transforms),t.id)}});const Vi=(t,e)=>t.lmultiplyO(e),Wi=t=>t.transforms;function Gi(){const t=this._transformationRunners.runners.map(Wi).reduce(Vi,new fe);this.transform(t),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}class Qi{constructor(){this.runners=[],this.ids=[]}add(t){if(this.runners.includes(t))return;const e=t.id+1;return this.runners.push(t),this.ids.push(e),this}clearBefore(t){const e=this.ids.indexOf(t+1)||1;return this.ids.splice(0,e,0),this.runners.splice(0,e,new Yi).forEach((t=>t.clearTransformsFromQueue())),this}edit(t,e){const i=this.ids.indexOf(t+1);return this.ids.splice(i,1,t+1),this.runners.splice(i,1,e),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}length(){return this.ids.length}merge(){let t=null;for(let e=0;e<this.runners.length;++e){const i=this.runners[e];if(t&&i.done&&t.done&&(!i._timeline||!i._timeline._runnerIds.includes(i.id))&&(!t._timeline||!t._timeline._runnerIds.includes(t.id))){this.remove(i.id);const s=i.mergeWith(t);this.edit(t.id,s),t=s,--e}else t=i}return this}remove(t){const e=this.ids.indexOf(t+1);return this.ids.splice(e,1),this.runners.splice(e,1),this}}vt({Element:{animate(t,e,i){const s=Xi.sanitise(t,e,i),n=this.timeline();return new Xi(s.duration).loop(s).element(this).timeline(n.play()).schedule(s.delay,s.when)},delay(t,e){return this.animate(0,t,e)},_clearTransformRunnersBefore(t){this._transformationRunners.clearBefore(t.id)},_currentTransform(t){return this._transformationRunners.runners.filter((e=>e.id<=t.id)).map(Wi).reduce(Vi,new fe)},_addRunner(t){this._transformationRunners.add(t),Hi.cancelImmediate(this._frameId),this._frameId=Hi.immediate(Gi.bind(this))},_prepareRunner(){null==this._frameId&&(this._transformationRunners=(new Qi).add(new Yi(new fe(this))))}}});Yt(Xi,{attr(t,e){return this.styleAttr("attr",t,e)},css(t,e){return this.styleAttr("css",t,e)},styleAttr(t,e,i){if("string"==typeof e)return this.styleAttr(t,{[e]:i});let s=e;if(this._tryRetarget(t,s))return this;let n=new Mi(this._stepper).to(s),r=Object.keys(s);return this.queue((function(){n=n.from(this.element()[t](r))}),(function(e){return this.element()[t](n.at(e).valueOf()),n.done()}),(function(e){const i=Object.keys(e),o=((t,e)=>t.filter((t=>!e.includes(t))))(i,r);if(o.length){const e=this.element()[t](o),i=new Pi(n.from()).valueOf();Object.assign(i,e),n.from(i)}const h=new Pi(n.to()).valueOf();Object.assign(h,e),n.to(h),r=i,s=e})),this._rememberMorpher(t,n),this},zoom(t,e){if(this._tryRetarget("zoom",t,e))return this;let i=new Mi(this._stepper).to(new Le(t));return this.queue((function(){i=i.from(this.element().zoom())}),(function(t){return this.element().zoom(i.at(t),e),i.done()}),(function(t,s){e=s,i.to(t)})),this._rememberMorpher("zoom",i),this},transform(t,e,i){if(e=t.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",t))return this;const s=fe.isMatrixLike(t);i=null!=t.affine?t.affine:null!=i?i:!s;const n=new Mi(this._stepper).type(i?ki:fe);let r,o,h,a,l;return this.queue((function(){o=o||this.element(),r=r||Mt(t,o),l=new fe(e?void 0:o),o._addRunner(this),e||o._clearTransformRunnersBefore(this)}),(function(u){e||this.clearTransform();const{x:c,y:d}=new ce(r).transform(o._currentTransform(this));let f=new fe({...t,origin:[c,d]}),p=this._isDeclarative&&h?h:l;if(i){f=f.decompose(c,d),p=p.decompose(c,d);const t=f.rotate,e=p.rotate,i=[t-360,t,t+360],s=i.map((t=>Math.abs(t-e))),n=Math.min(...s),r=s.indexOf(n);f.rotate=i[r]}e&&(s||(f.rotate=t.rotate||0),this._isDeclarative&&a&&(p.rotate=a)),n.from(p),n.to(f);const m=n.at(u);return a=m.rotate,h=new fe(m),this.addTransform(h),o._addRunner(this),n.done()}),(function(e){(e.origin||"center").toString()!==(t.origin||"center").toString()&&(r=Mt(e,o)),t={...e,origin:r}}),!0),this._isDeclarative&&this._rememberMorpher("transform",n),this},x(t,e){return this._queueNumber("x",t)},y(t){return this._queueNumber("y",t)},dx(t=0){return this._queueNumberDelta("x",t)},dy(t=0){return this._queueNumberDelta("y",t)},dmove(t,e){return this.dx(t).dy(e)},_queueNumberDelta(t,e){if(e=new Le(e),this._tryRetarget(t,e))return this;const i=new Mi(this._stepper).to(e);let s=null;return this.queue((function(){s=this.element()[t](),i.from(s),i.to(s+e)}),(function(e){return this.element()[t](i.at(e)),i.done()}),(function(t){i.to(s+new Le(t))})),this._rememberMorpher(t,i),this},_queueObject(t,e){if(this._tryRetarget(t,e))return this;const i=new Mi(this._stepper).to(e);return this.queue((function(){i.from(this.element()[t]())}),(function(e){return this.element()[t](i.at(e)),i.done()})),this._rememberMorpher(t,i),this},_queueNumber(t,e){return this._queueObject(t,new Le(e))},cx(t){return this._queueNumber("cx",t)},cy(t){return this._queueNumber("cy",t)},move(t,e){return this.x(t).y(e)},center(t,e){return this.cx(t).cy(e)},size(t,e){let i;return t&&e||(i=this._element.bbox()),t||(t=i.width/i.height*e),e||(e=i.height/i.width*t),this.width(t).height(e)},width(t){return this._queueNumber("width",t)},height(t){return this._queueNumber("height",t)},plot(t,e,i,s){if(4===arguments.length)return this.plot([t,e,i,s]);if(this._tryRetarget("plot",t))return this;const n=new Mi(this._stepper).type(this._element.MorphArray).to(t);return this.queue((function(){n.from(this._element.array())}),(function(t){return this._element.plot(n.at(t)),n.done()})),this._rememberMorpher("plot",n),this},leading(t){return this._queueNumber("leading",t)},viewbox(t,e,i,s){return this._queueObject("viewbox",new ye(t,e,i,s))},update(t){return"object"!=typeof t?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset),this)}}),Yt(Xi,{rx:qe,ry:Be,from:ti,to:ei}),Ft(Xi,"Runner");class Ji extends Ue{constructor(t,e=t){super(It("svg",t),e),this.namespace()}defs(){return this.isRoot()?Ut(this.node.querySelector("defs"))||this.put(new He):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof Pt.window.SVGElement)&&"#document-fragment"!==this.node.parentNode.nodeName}namespace(){return this.isRoot()?this.attr({xmlns:Ot,version:"1.1"}).attr("xmlns:xlink",Nt,kt).attr("xmlns:svgjs","http://svgjs.dev/svgjs",kt):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,kt).attr("xmlns:svgjs",null,kt)}root(){return this.isRoot()?this:super.root()}}vt({Container:{nested:Vt((function(){return this.put(new Ji)}))}}),Ft(Ji,"Svg",!0);class Zi extends Ue{constructor(t,e=t){super(It("symbol",t),e)}}vt({Container:{symbol:Vt((function(){return this.put(new Zi)}))}}),Ft(Zi,"Symbol");var Ki=Object.freeze({__proto__:null,plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(Pt.document.createTextNode(t)),this},length:function(){return this.node.getComputedTextLength()},x:function(t,e=this.bbox()){return null==t?e.x:this.attr("x",this.attr("x")+t-e.x)},y:function(t,e=this.bbox()){return null==t?e.y:this.attr("y",this.attr("y")+t-e.y)},move:function(t,e,i=this.bbox()){return this.x(t,i).y(e,i)},cx:function(t,e=this.bbox()){return null==t?e.cx:this.attr("x",this.attr("x")+t-e.cx)},cy:function(t,e=this.bbox()){return null==t?e.cy:this.attr("y",this.attr("y")+t-e.cy)},center:function(t,e,i=this.bbox()){return this.cx(t,i).cy(e,i)},ax:function(t){return this.attr("x",t)},ay:function(t){return this.attr("y",t)},amove:function(t,e){return this.ax(t).ay(e)},build:function(t){return this._build=!!t,this}});class ts extends Fe{constructor(t,e=t){super(It("text",t),e),this.dom.leading=new Le(1.3),this._rebuild=!0,this._build=!1}leading(t){return null==t?this.dom.leading:(this.dom.leading=new Le(t),this.rebuild())}rebuild(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){const t=this;let e=0;const i=this.dom.leading;this.each((function(s){const n=Pt.window.getComputedStyle(this.node).getPropertyValue("font-size"),r=i*new Le(n);this.dom.newLined&&(this.attr("x",t.attr("x")),"\n"===this.text()?e+=r:(this.attr("dy",s?r+e:0),e=0))})),this.fire("rebuild")}return this}setData(t){return this.dom=t,this.dom.leading=new Le(t.leading||1.3),this}text(t){if(void 0===t){const e=this.node.childNodes;let i=0;t="";for(let s=0,n=e.length;s<n;++s)"textPath"!==e[s].nodeName?(s!==i&&3!==e[s].nodeType&&!0===Ut(e[s]).dom.newLined&&(t+="\n"),t+=e[s].textContent):0===s&&(i=1);return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else for(let e=0,i=(t=(t+"").split("\n")).length;e<i;e++)this.newLine(t[e]);return this.build(!1).rebuild()}}Yt(ts,Ki),vt({Container:{text:Vt((function(t=""){return this.put(new ts).text(t)})),plain:Vt((function(t=""){return this.put(new ts).plain(t)}))}}),Ft(ts,"Text");class es extends Fe{constructor(t,e=t){super(It("tspan",t),e),this._build=!1}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}newLine(){this.dom.newLined=!0;const t=this.parent();if(!(t instanceof ts))return this;const e=t.index(this),i=Pt.window.getComputedStyle(this.node).getPropertyValue("font-size"),s=t.dom.leading*new Le(i);return this.dy(e?s:0).attr("x",t.x())}text(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?(this.clear().build(!0),t.call(this,this),this.build(!1)):this.plain(t),this)}}Yt(es,Ki),vt({Tspan:{tspan:Vt((function(t=""){const e=new es;return this._build||this.clear(),this.put(e).text(t)}))},Text:{newLine:function(t=""){return this.tspan(t).newLine()}}}),Ft(es,"Tspan");class is extends Fe{constructor(t,e=t){super(It("circle",t),e)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new Le(t).divide(2))}}Yt(is,{x:Xe,y:Ye,cx:Ve,cy:We,width:Ge,height:Qe}),vt({Container:{circle:Vt((function(t=0){return this.put(new is).size(t).move(0,0)}))}}),Ft(is,"Circle");class ss extends Ue{constructor(t,e=t){super(It("clipPath",t),e)}remove(){return this.targets().forEach((function(t){t.unclip()})),super.remove()}targets(){return _e('svg [clip-path*="'+this.id()+'"]')}}vt({Container:{clip:Vt((function(){return this.defs().put(new ss)}))},Element:{clipper(){return this.reference("clip-path")},clipWith(t){const e=t instanceof ss?t:this.parent().clip().add(t);return this.attr("clip-path",'url("#'+e.id()+'")')},unclip(){return this.attr("clip-path",null)}}}),Ft(ss,"ClipPath");class ns extends je{constructor(t,e=t){super(It("foreignObject",t),e)}}vt({Container:{foreignObject:Vt((function(t,e){return this.put(new ns).size(t,e)}))}}),Ft(ns,"ForeignObject");var rs=Object.freeze({__proto__:null,dmove:function(t,e){return this.children().forEach(((i,s)=>{let n;try{n=i.bbox()}catch(t){return}const r=new fe(i),o=r.translate(t,e).transform(r.inverse()),h=new ce(n.x,n.y).transform(o);i.move(h.x,h.y)})),this},dx:function(t){return this.dmove(t,0)},dy:function(t){return this.dmove(0,t)},height:function(t,e=this.bbox()){return null==t?e.height:this.size(e.width,t,e)},move:function(t=0,e=0,i=this.bbox()){const s=t-i.x,n=e-i.y;return this.dmove(s,n)},size:function(t,e,i=this.bbox()){const s=Tt(this,t,e,i),n=s.width/i.width,r=s.height/i.height;return this.children().forEach(((t,e)=>{const s=new ce(i).transform(new fe(t).inverse());t.scale(n,r,s.x,s.y)})),this},width:function(t,e=this.bbox()){return null==t?e.width:this.size(t,e.height,e)},x:function(t,e=this.bbox()){return null==t?e.x:this.move(t,e.y,e)},y:function(t,e=this.bbox()){return null==t?e.y:this.move(e.x,t,e)}});class os extends Ue{constructor(t,e=t){super(It("g",t),e)}}Yt(os,rs),vt({Container:{group:Vt((function(){return this.put(new os)}))}}),Ft(os,"G");class hs extends Ue{constructor(t,e=t){super(It("a",t),e)}target(t){return this.attr("target",t)}to(t){return this.attr("href",t,Nt)}}Yt(hs,rs),vt({Container:{link:Vt((function(t){return this.put(new hs).to(t)}))},Element:{unlink(){const t=this.linker();if(!t)return this;const e=t.parent();if(!e)return this.remove();const i=e.index(t);return e.add(this,i),t.remove(),this},linkTo(t){let e=this.linker();return e||(e=new hs,this.wrap(e)),"function"==typeof t?t.call(e,e):e.to(t),this},linker(){const t=this.parent();return t&&"a"===t.node.nodeName.toLowerCase()?t:null}}}),Ft(hs,"A");class as extends Ue{constructor(t,e=t){super(It("mask",t),e)}remove(){return this.targets().forEach((function(t){t.unmask()})),super.remove()}targets(){return _e('svg [mask*="'+this.id()+'"]')}}vt({Container:{mask:Vt((function(){return this.defs().put(new as)}))},Element:{masker(){return this.reference("mask")},maskWith(t){const e=t instanceof as?t:this.parent().mask().add(t);return this.attr("mask",'url("#'+e.id()+'")')},unmask(){return this.attr("mask",null)}}}),Ft(as,"Mask");class ls extends je{constructor(t,e=t){super(It("stop",t),e)}update(t){return("number"==typeof t||t instanceof Le)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new Le(t.offset)),this}}vt({Gradient:{stop:function(t,e,i){return this.put(new ls).update(t,e,i)}}}),Ft(ls,"Stop");class us extends je{constructor(t,e=t){super(It("style",t),e)}addText(t=""){return this.node.textContent+=t,this}font(t,e,i={}){return this.rule("@font-face",{fontFamily:t,src:e,...i})}rule(t,e){return this.addText(function(t,e){if(!t)return"";if(!e)return t;let i=t+"{";for(const t in e)i+=Et(t)+":"+e[t]+";";return i+="}",i}(t,e))}}vt("Dom",{style(t,e){return this.put(new us).rule(t,e)},fontface(t,e,i){return this.put(new us).font(t,e,i)}}),Ft(us,"Style");class cs extends ts{constructor(t,e=t){super(It("textPath",t),e)}array(){const t=this.track();return t?t.array():null}plot(t){const e=this.track();let i=null;return e&&(i=e.plot(t)),null==t?i:this}track(){return this.reference("href")}}vt({Container:{textPath:Vt((function(t,e){return t instanceof ts||(t=this.text(t)),t.path(e)}))},Text:{path:Vt((function(t,e=!0){const i=new cs;let s;if(t instanceof Ri||(t=this.defs().path(t)),i.attr("href","#"+t,Nt),e)for(;s=this.node.firstChild;)i.node.appendChild(s);return this.put(i)})),textPath(){return this.findOne("textPath")}},Path:{text:Vt((function(t){return t instanceof ts||(t=(new ts).addTo(this.parent()).text(t)),t.path(this)})),targets(){return _e("svg textPath").filter((t=>(t.attr("href")||"").includes(this.id())))}}}),cs.prototype.MorphArray=Ci,Ft(cs,"TextPath");class ds extends Fe{constructor(t,e=t){super(It("use",t),e)}use(t,e){return this.attr("href",(e||"")+"#"+t,Nt)}}vt({Container:{use:Vt((function(t,e){return this.put(new ds).use(t,e)}))}}),Ft(ds,"Use");const fs=zt;Yt([Ji,Zi,oi,ri,ci],_t("viewbox")),Yt([ui,zi,ji,Ri],_t("marker")),Yt(ts,_t("Text")),Yt(Ri,_t("Path")),Yt(He,_t("Defs")),Yt([ts,es],_t("Tspan")),Yt([Ii,Ze,ni,Xi],_t("radius")),Yt(Ce,_t("EventTarget")),Yt(De,_t("Dom")),Yt(je,_t("Element")),Yt(Fe,_t("Shape")),Yt([Ue,Ke],_t("Container")),Yt(ni,_t("Gradient")),Yt(Xi,_t("Runner")),we.extend([...new Set(wt)]),function(t=[]){Li.push(...[].concat(t))}([Le,ue,ye,fe,Pe,hi,Ci]),Yt(Li,{to(t){return(new Mi).type(this.constructor).from(this.valueOf()).to(t)},fromArray(t){return this.init(t),this}});const ps=[o`:host{aspect-ratio:1;display:flex;width:100%;background-color:rgba(255,255,255,.8);margin:0}:host #drawzone{transition:width .1s,height .1s;display:flex;flex-direction:column;width:100%;margin:0}`];var ms;let ys=class extends G{constructor(){super(),this.mouseX=null,this.mouseY=null,this.width=null,this.height=null,this.openedFile="",this.setCurrentMousePosition=t=>{var e;const i=t.currentTarget.getBoundingClientRect(),s=t.clientX-i.left,n=t.clientY-i.top;null===(e=this.onPositionChange)||void 0===e||e.call(this,{xPosition:s,yPosition:n})},this.cancelDrawMode=()=>{var t;null===(t=this.onPositionChange)||void 0===t||t.call(this,{xPosition:null,yPosition:null})},ms.set(this,(()=>{this.width=parseFloat(getComputedStyle(this).getPropertyValue("width")),this.height=parseFloat(getComputedStyle(this).getPropertyValue("height"))})),this.updated=t=>{var e;if(t.has("openedFile")){const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("drawzone");if(this.openedFile&&t){t.innerHTML&&(t.innerHTML="");fs(t).svg(this.openedFile)}}},new ResizeObserver(function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)}(this,ms,"f")).observe(this)}render(){return k`<div id="drawzone"></div>`}};ms=new WeakMap,ys.styles=[ps],t([K({type:Number})],ys.prototype,"mouseX",void 0),t([K({type:Number})],ys.prototype,"mouseY",void 0),t([tt()],ys.prototype,"width",void 0),t([tt()],ys.prototype,"height",void 0),t([K()],ys.prototype,"onPositionChange",void 0),t([K()],ys.prototype,"openedFile",void 0),ys=t([J("draw-zone")],ys);const gs=o`:host{display:flex;gap:5px;padding:5px;background-color:rgba(255,255,255,.8)}#open-svg-button{border:1px solid grey;background-color:#fff;padding:10px 15px}#open-svg-button:hover{background-color:#0ff}`;let ws=class extends G{constructor(){super(...arguments),this.handleSelectFile=t=>{var e;const i=t.target,s=null===(e=null==i?void 0:i.files)||void 0===e?void 0:e[0];if(!s)return;const n=new FileReader;n.addEventListener("load",(t=>{var e,i;const s=null===(e=t.target)||void 0===e?void 0:e.result;"string"==typeof s&&(null===(i=this.onSelectSvgFile)||void 0===i||i.call(this,(new DOMParser).parseFromString(s,"image/svg+xml")))})),n.readAsText(s)}}render(){return k`<label id="open-svg-button">Open <input id="open-file" type="file" hidden .onchange="${this.handleSelectFile}" accept="image/svg+xml"></label>`}};ws.styles=[gs],t([K()],ws.prototype,"onSelectSvgFile",void 0),ws=t([J("editor-header")],ws);
