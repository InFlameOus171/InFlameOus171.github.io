/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function __rest(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}function __decorate(e,t,i,s){var o,a=arguments.length,n=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(a<3?o(n):a>3?o(t,i,n):o(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n}function __awaiter(e,t,i,s){return new(i||(i=Promise))((function(o,a){function n(e){try{l(s.next(e))}catch(e){a(e)}}function r(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,r)}l((s=s.apply(e,t||[])).next())}))}function __classPrivateFieldGet(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)}function __classPrivateFieldSet(e,t,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(e,i):o?o.value=i:t.set(e,i),i
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}const t$2=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,e$3=Symbol(),n$4=new Map;class s$3{constructor(e,t){if(this._$cssResult$=!0,t!==e$3)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){let e=n$4.get(this.cssText);return t$2&&void 0===e&&(n$4.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}}const o$3=e=>new s$3("string"==typeof e?e:e+"",e$3),r$2=(e,...t)=>{const i=1===e.length?e[0]:t.reduce(((t,i,s)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[s+1]),e[0]);return new s$3(i,e$3)},i$2=(e,t)=>{t$2?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const i=document.createElement("style"),s=window.litNonce;void 0!==s&&i.setAttribute("nonce",s),i.textContent=t.cssText,e.appendChild(i)}))},S$1=t$2?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return o$3(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var s$2;const e$2=window.trustedTypes,r$1=e$2?e$2.emptyScript:"",h$1=window.reactiveElementPolyfillSupport,o$2={toAttribute(e,t){switch(t){case Boolean:e=e?r$1:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},n$3=(e,t)=>t!==e&&(t==t||e==e),l$2={attribute:!0,type:String,converter:o$2,reflect:!1,hasChanged:n$3};class a$1 extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(e){var t;null!==(t=this.l)&&void 0!==t||(this.l=[]),this.l.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,i)=>{const s=this._$Eh(i,t);void 0!==s&&(this._$Eu.set(s,i),e.push(s))})),e}static createProperty(e,t=l$2){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i="symbol"==typeof e?Symbol():"__"+e,s=this.getPropertyDescriptor(e,i,t);void 0!==s&&Object.defineProperty(this.prototype,e,s)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(s){const o=this[e];this[t]=s,this.requestUpdate(e,o,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||l$2}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const i of t)this.createProperty(i,e[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(S$1(e))}else void 0!==e&&t.push(S$1(e));return t}static _$Eh(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}o(){var e;this._$Ep=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(e=this.constructor.l)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,i;(null!==(t=this._$Eg)&&void 0!==t?t:this._$Eg=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(i=e.hostConnected)||void 0===i||i.call(e))}removeController(e){var t;null===(t=this._$Eg)||void 0===t||t.splice(this._$Eg.indexOf(e)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Et.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return i$2(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$ES(e,t,i=l$2){var s,o;const a=this.constructor._$Eh(e,i);if(void 0!==a&&!0===i.reflect){const n=(null!==(o=null===(s=i.converter)||void 0===s?void 0:s.toAttribute)&&void 0!==o?o:o$2.toAttribute)(t,i.type);this._$Ei=e,null==n?this.removeAttribute(a):this.setAttribute(a,n),this._$Ei=null}}_$AK(e,t){var i,s,o;const a=this.constructor,n=a._$Eu.get(e);if(void 0!==n&&this._$Ei!==n){const e=a.getPropertyOptions(n),r=e.converter,l=null!==(o=null!==(s=null===(i=r)||void 0===i?void 0:i.fromAttribute)&&void 0!==s?s:"function"==typeof r?r:null)&&void 0!==o?o:o$2.fromAttribute;this._$Ei=n,this[n]=l(t,e.type),this._$Ei=null}}requestUpdate(e,t,i){let s=!0;void 0!==e&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||n$3)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===i.reflect&&this._$Ei!==e&&(void 0===this._$E_&&(this._$E_=new Map),this._$E_.set(e,i))):s=!1),!this.isUpdatePending&&s&&(this._$Ep=this._$EC())}async _$EC(){this.isUpdatePending=!0;try{await this._$Ep}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((e,t)=>this[t]=e)),this._$Et=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(i)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;null===(t=this._$Eg)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(e){return!0}update(e){void 0!==this._$E_&&(this._$E_.forEach(((e,t)=>this._$ES(t,this[t],e))),this._$E_=void 0),this._$EU()}updated(e){}firstUpdated(e){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var t$1;a$1.finalized=!0,a$1.elementProperties=new Map,a$1.elementStyles=[],a$1.shadowRootOptions={mode:"open"},null==h$1||h$1({ReactiveElement:a$1}),(null!==(s$2=globalThis.reactiveElementVersions)&&void 0!==s$2?s$2:globalThis.reactiveElementVersions=[]).push("1.0.2");const i$1=globalThis.trustedTypes,s$1=i$1?i$1.createPolicy("lit-html",{createHTML:e=>e}):void 0,e$1=`lit$${(Math.random()+"").slice(9)}$`,o$1="?"+e$1,n$2=`<${o$1}>`,l$1=document,h=(e="")=>l$1.createComment(e),r=e=>null===e||"object"!=typeof e&&"function"!=typeof e,d=Array.isArray,u=e=>{var t;return d(e)||"function"==typeof(null===(t=e)||void 0===t?void 0:t[Symbol.iterator])},c=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,v=/-->/g,a=/>/g,f=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,_=/'/g,m=/"/g,g=/^(?:script|style|textarea)$/i,$=e=>(t,...i)=>({_$litType$:e,strings:t,values:i}),p=$(1),b=Symbol.for("lit-noChange"),T=Symbol.for("lit-nothing"),x=new WeakMap,w=(e,t,i)=>{var s,o;const a=null!==(s=null==i?void 0:i.renderBefore)&&void 0!==s?s:t;let n=a._$litPart$;if(void 0===n){const e=null!==(o=null==i?void 0:i.renderBefore)&&void 0!==o?o:null;a._$litPart$=n=new N(t.insertBefore(h(),e),e,void 0,null!=i?i:{})}return n._$AI(e),n},A=l$1.createTreeWalker(l$1,129,null,!1),C=(e,t)=>{const i=e.length-1,s=[];let o,n=2===t?"<svg>":"",r=c;for(let t=0;t<i;t++){const i=e[t];let l,d,h=-1,p=0;for(;p<i.length&&(r.lastIndex=p,d=r.exec(i),null!==d);)p=r.lastIndex,r===c?"!--"===d[1]?r=v:void 0!==d[1]?r=a:void 0!==d[2]?(g.test(d[2])&&(o=RegExp("</"+d[2],"g")),r=f):void 0!==d[3]&&(r=f):r===f?">"===d[0]?(r=null!=o?o:c,h=-1):void 0===d[1]?h=-2:(h=r.lastIndex-d[2].length,l=d[1],r=void 0===d[3]?f:'"'===d[3]?m:_):r===m||r===_?r=f:r===v||r===a?r=c:(r=f,o=void 0);const u=r===f&&e[t+1].startsWith("/>")?" ":"";n+=r===c?i+n$2:h>=0?(s.push(l),i.slice(0,h)+"$lit$"+i.slice(h)+e$1+u):i+e$1+(-2===h?(s.push(void 0),t):u)}const l=n+(e[i]||"<?>")+(2===t?"</svg>":"");return[void 0!==s$1?s$1.createHTML(l):l,s]};class P{constructor({strings:e,_$litType$:t},i){let s;this.parts=[];let o=0,a=0;const n=e.length-1,r=this.parts,[l,d]=C(e,t);if(this.el=P.createElement(l,i),A.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(s=A.nextNode())&&r.length<n;){if(1===s.nodeType){if(s.hasAttributes()){const e=[];for(const t of s.getAttributeNames())if(t.endsWith("$lit$")||t.startsWith(e$1)){const i=d[a++];if(e.push(t),void 0!==i){const e=s.getAttribute(i.toLowerCase()+"$lit$").split(e$1),t=/([.?@])?(.*)/.exec(i);r.push({type:1,index:o,name:t[2],strings:e,ctor:"."===t[1]?M:"?"===t[1]?H:"@"===t[1]?I:S})}else r.push({type:6,index:o})}for(const t of e)s.removeAttribute(t)}if(g.test(s.tagName)){const e=s.textContent.split(e$1),t=e.length-1;if(t>0){s.textContent=i$1?i$1.emptyScript:"";for(let i=0;i<t;i++)s.append(e[i],h()),A.nextNode(),r.push({type:2,index:++o});s.append(e[t],h())}}}else if(8===s.nodeType)if(s.data===o$1)r.push({type:2,index:o});else{let e=-1;for(;-1!==(e=s.data.indexOf(e$1,e+1));)r.push({type:7,index:o}),e+=e$1.length-1}o++}}static createElement(e,t){const i=l$1.createElement("template");return i.innerHTML=e,i}}function V(e,t,i=e,s){var o,a,n,l;if(t===b)return t;let d=void 0!==s?null===(o=i._$Cl)||void 0===o?void 0:o[s]:i._$Cu;const h=r(t)?void 0:t._$litDirective$;return(null==d?void 0:d.constructor)!==h&&(null===(a=null==d?void 0:d._$AO)||void 0===a||a.call(d,!1),void 0===h?d=void 0:(d=new h(e),d._$AT(e,i,s)),void 0!==s?(null!==(n=(l=i)._$Cl)&&void 0!==n?n:l._$Cl=[])[s]=d:i._$Cu=d),void 0!==d&&(t=V(e,d._$AS(e,t.values),d,s)),t}class E{constructor(e,t){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var t;const{el:{content:i},parts:s}=this._$AD,o=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:l$1).importNode(i,!0);A.currentNode=o;let a=A.nextNode(),n=0,r=0,l=s[0];for(;void 0!==l;){if(n===l.index){let t;2===l.type?t=new N(a,a.nextSibling,this,e):1===l.type?t=new l.ctor(a,l.name,l.strings,this,e):6===l.type&&(t=new L(a,this,e)),this.v.push(t),l=s[++r]}n!==(null==l?void 0:l.index)&&(a=A.nextNode(),n++)}return o}m(e){let t=0;for(const i of this.v)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class N{constructor(e,t,i,s){var o;this.type=2,this._$AH=T,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=s,this._$Cg=null===(o=null==s?void 0:s.isConnected)||void 0===o||o}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cg}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=V(this,e,t),r(e)?e===T||null==e||""===e?(this._$AH!==T&&this._$AR(),this._$AH=T):e!==this._$AH&&e!==b&&this.$(e):void 0!==e._$litType$?this.T(e):void 0!==e.nodeType?this.S(e):u(e)?this.M(e):this.$(e)}A(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}S(e){this._$AH!==e&&(this._$AR(),this._$AH=this.A(e))}$(e){this._$AH!==T&&r(this._$AH)?this._$AA.nextSibling.data=e:this.S(l$1.createTextNode(e)),this._$AH=e}T(e){var t;const{values:i,_$litType$:s}=e,o="number"==typeof s?this._$AC(e):(void 0===s.el&&(s.el=P.createElement(s.h,this.options)),s);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===o)this._$AH.m(i);else{const e=new E(o,this),t=e.p(this.options);e.m(i),this.S(t),this._$AH=e}}_$AC(e){let t=x.get(e.strings);return void 0===t&&x.set(e.strings,t=new P(e)),t}M(e){d(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,s=0;for(const o of e)s===t.length?t.push(i=new N(this.A(h()),this.A(h()),this,this.options)):i=t[s],i._$AI(o),s++;s<t.length&&(this._$AR(i&&i._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cg=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class S{constructor(e,t,i,s,o){this.type=1,this._$AH=T,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=o,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=T}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,s){const o=this.strings;let a=!1;if(void 0===o)e=V(this,e,t,0),a=!r(e)||e!==this._$AH&&e!==b,a&&(this._$AH=e);else{const s=e;let n,l;for(e=o[0],n=0;n<o.length-1;n++)l=V(this,s[i+n],t,n),l===b&&(l=this._$AH[n]),a||(a=!r(l)||l!==this._$AH[n]),l===T?e=T:e!==T&&(e+=(null!=l?l:"")+o[n+1]),this._$AH[n]=l}a&&!s&&this.k(e)}k(e){e===T?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class M extends S{constructor(){super(...arguments),this.type=3}k(e){this.element[this.name]=e===T?void 0:e}}const k=i$1?i$1.emptyScript:"";class H extends S{constructor(){super(...arguments),this.type=4}k(e){e&&e!==T?this.element.setAttribute(this.name,k):this.element.removeAttribute(this.name)}}class I extends S{constructor(e,t,i,s,o){super(e,t,i,s,o),this.type=5}_$AI(e,t=this){var i;if((e=null!==(i=V(this,e,t,0))&&void 0!==i?i:T)===b)return;const s=this._$AH,o=e===T&&s!==T||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,a=e!==T&&(s===T||o);o&&this.element.removeEventListener(this.name,this,s),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==i?i:this.element,e):this._$AH.handleEvent(e)}}class L{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){V(this,e)}}const z=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var l,o;null==z||z(P,N),(null!==(t$1=globalThis.litHtmlVersions)&&void 0!==t$1?t$1:globalThis.litHtmlVersions=[]).push("2.0.2");class s extends a$1{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=w(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Dt)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Dt)||void 0===e||e.setConnected(!1)}render(){return b}}s.finalized=!0,s._$litElement$=!0,null===(l=globalThis.litElementHydrateSupport)||void 0===l||l.call(globalThis,{LitElement:s});const n$1=globalThis.litElementPolyfillSupport;null==n$1||n$1({LitElement:s}),(null!==(o=globalThis.litElementVersions)&&void 0!==o?o:globalThis.litElementVersions=[]).push("3.0.2");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const n=e=>t=>"function"==typeof t?((e,t)=>(window.customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:i,elements:s}=t;return{kind:i,elements:s,finisher(t){window.customElements.define(e,t)}}})(e,t)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,i=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(i){i.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(i){i.createProperty(t.key,e)}};function e(e){return(t,s)=>void 0!==s?((e,t,i)=>{t.constructor.createProperty(i,e)})(e,t,s):i(e,t)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function t(t){return e({...t,state:!0})}const toolBoxButtonStyles=r$2`:host{display:flex}button{aspect-ratio:1;border-radius:0;border:1px solid #000;background-color:#fff;padding:5px;display:flex;flex-shrink:2;justify-content:center;align-items:center}button>img{aspect-ratio:1;max-height:35px}button[isActive=false]{border:1px solid grey}button:hover,button[isActive=true]{border:1px solid #00f;background-color:#0ff}button[disabled]{border:1px solid grey;background-color:grey}.tooltip{text-decoration:none;position:relative}.tooltip span{color:#fff;position:fixed;visibility:hidden;opacity:0;transition:opacity .3s}.tooltip:hover span{border-radius:5px;padding:10px;background-color:#555;visibility:visible;overflow:hidden;opacity:1;z-index:100}`;var _ToolboxButton_instances,_ToolboxButton_handleClick;r$2``;let ToolboxButton=class extends s{constructor(){super(...arguments),_ToolboxButton_instances.add(this),this.toolName="tool"}firstUpdated(){var e;return __awaiter(this,void 0,void 0,(function*(){const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("button-tooltip");if(t){const e=t.querySelector("#tooltiptext");null==t||t.addEventListener("mousemove",(i=>{if(t.matches(":hover")){const t=i.clientX,s=i.clientY;e&&(e.style.top=s+20+"px",e.style.left=t+15+"px")}}))}}))}render(){var e,t,i;return p`<div class="tooltip" id="button-tooltip"><button id="${null!==(e=this.buttonId)&&void 0!==e?e:this.toolName+Date.now().toString()}" @click="${__classPrivateFieldGet(this,_ToolboxButton_instances,"m",_ToolboxButton_handleClick)}" .disabled="${null!==(t=this.disabled)&&void 0!==t&&t}">${this.icon?p`<img alt="${this.toolName}" class="${(null!==(i=this.class)&&void 0!==i?i:"")+"tool-icon"}" src="${this.icon}">`:this.toolName}</button> <span id="tooltiptext">${this.toolName}</span></div>`}};_ToolboxButton_instances=new WeakSet,_ToolboxButton_handleClick=function(){var e;this.buttonId&&(null===(e=this.onClick)||void 0===e||e.call(this,this.buttonId))},ToolboxButton.styles=[toolBoxButtonStyles],__decorate([e({type:String})],ToolboxButton.prototype,"toolName",void 0),__decorate([e({type:String})],ToolboxButton.prototype,"icon",void 0),__decorate([e({type:String})],ToolboxButton.prototype,"class",void 0),__decorate([e({type:String})],ToolboxButton.prototype,"buttonId",void 0),__decorate([e({type:Boolean})],ToolboxButton.prototype,"disabled",void 0),__decorate([e()],ToolboxButton.prototype,"onClick",void 0),ToolboxButton=__decorate([n("toolbox-button")],ToolboxButton);const dialogSectionStyles=r$2`:host{display:flex;gap:5px;padding:5px;background-color:rgba(255,255,255,.8)}#on-save-button,#open-svg-button{border:1px solid grey;background-color:#fff;padding:10px 15px}#on-save-button:hover,#open-svg-button:hover{background-color:#0ff}#on-save-button>input{display:none}`;var _DialogSection_readerEventHandler;let DialogSection=class extends s{constructor(){super(...arguments),_DialogSection_readerEventHandler.set(this,(e=>{var t,i;try{const s=null===(t=e.target)||void 0===t?void 0:t.result;if("string"==typeof s){const e=new DOMParser;null===(i=this.onSelectSvgFile)||void 0===i||i.call(this,e.parseFromString(s,"image/svg+xml"))}}catch(e){alert("SVG Element count not be imported")}})),this.handleSelectFile=e=>{const t=e.target.files,i=null==t?void 0:t[0];if(!i)return;const s=new FileReader;s.addEventListener("load",__classPrivateFieldGet(this,_DialogSection_readerEventHandler,"f")),e.target.value="",s.readAsText(i)}}render(){return p`<label id="open-svg-button">Open <input id="open-file" type="file" hidden @input="${this.handleSelectFile}" accept="image/svg+xml"></label> <label id="on-save-button">Save <input type="button" id="save" @click="${this.onSave}"></label>`}};_DialogSection_readerEventHandler=new WeakMap,DialogSection.styles=[dialogSectionStyles],__decorate([e()],DialogSection.prototype,"onSelectSvgFile",void 0),__decorate([e()],DialogSection.prototype,"onSave",void 0),DialogSection=__decorate([n("dialog-section")],DialogSection);const toolBoxStyles=r$2`:host{display:flex;justify-content:center;padding-bottom:10px}:host>#column-wrapper{background-color:rgba(255,255,255,.8);display:flex;flex-wrap:wrap;gap:5px;padding:20px;justify-content:center;transition:width 1s,height 1s}span[class^=row-]{display:flex;justify-content:center;width:30%}span[class^=row-]>toolbox-button{display:flex;aspect-ratio:1;max-height:50px;justify-content:center;align-items:center}`,getButtonColumn=e=>{let t=0;return null==e?void 0:e.map(((e,i)=>(i%3==0&&++t,p`<span class="row-${t}"><toolbox-button id="${"tool-box-button-"+e.id}" .onClick="${e.onClick}" .buttonId="${e.id}" .toolName="${e.toolName}" .icon="${e.icon}" .disabled="${e.disabled}"></toolbox-button></span>`)))};let ToolBox=class extends s{constructor(){var e;super(...arguments),this.tools=[],this.toolsLength=null===(e=this.tools)||void 0===e?void 0:e.length}connectedCallback(){super.connectedCallback(),this.requestUpdate()}render(){return p`<div id="column-wrapper">${getButtonColumn(this.tools)}</div>`}};ToolBox.styles=toolBoxStyles,__decorate([e({type:Array,hasChanged:(e,t)=>JSON.stringify(e)!==JSON.stringify(t)})],ToolBox.prototype,"tools",void 0),__decorate([e()],ToolBox.prototype,"onChange",void 0),__decorate([t()],ToolBox.prototype,"toolsLength",void 0),__decorate([e({type:String})],ToolBox.prototype,"selectedTool",void 0),ToolBox=__decorate([n("tool-box")],ToolBox);const acceptedTags=["circle","ellipse","rect","polyline","line","text","path"],highlightStyle={stroke:"rgba(255,0,0,.4)",lineDash:[12],strokeWidth:"5"},textPlaceHolder="Input text...";var Tools_List,SVGParamFieldID;!function(e){e.DRAW="draw-tool",e.LINE="line-tool",e.RECT="rect-tool",e.ELLIPSE="ellipse-tool",e.SELECT="select-tool",e.TEXT="text-tool",e.MOVE="move-tool",e.DELETE="delete-tool",e.UNSELECT="unselect-tool"}(Tools_List||(Tools_List={})),function(e){e.TEXT_FONT_FAMILY="text-font-family-input",e.TEXT_FONT_SIZE="text-font-size-input",e.TEXT="text-input",e.STROKE_WIDTH="stroke-width-input",e.STROKE_COLOR="stroke-color-input",e.STROKE_OPACITY="stroke-opacity-input",e.FILL_COLOR="fill-color-input",e.FILL_OPACITY="fill-opacity-input",e.LINE_CAP="line-cap-input",e.LINE_DASH="line-dash-input"}(SVGParamFieldID||(SVGParamFieldID={}));const decimalNumberRegExp=new RegExp(/(-?\d*\.?\d+)/),decimalNumber=decimalNumberRegExp.source,separatorRegExp=new RegExp(/((\s?,\s?)|\s)/);separatorRegExp.source;const pathCommandsRegExp=new RegExp(`${decimalNumber}|[a-zA-Z]`,"g"),hexColorCodeRegExp=new RegExp(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i),getUniqueXandYCoordinatesFromBoundaries=e=>{const t=[...new Map(e)].reduce(((e,t)=>[[...e[0],t[0]],[...e[1],t[1]]]),[[],[]]);return[[...new Set(t[0])],[...new Set(t[1])]]},parseToFixed2HexString=e=>{let t=parseInt(e[0]).toString(16);return t.length<2&&(t="0".concat(t)),t},hexToRGBA=(e,t="1")=>{var i;const[,s,o,a]=null!==(i=hexColorCodeRegExp.exec(e))&&void 0!==i?i:["#000000","00","00","00"],n=[parseInt(s,16),parseInt(o,16),parseInt(a,16)];return"rgba(".concat(n.join(","),",",t,")")},normalizeColorCode=e=>{var t,i;if(!e)return{colorCode:"#000000",opacity:"0"};if("#"!==e.charAt(0)){const s=new RegExp(/\d*\.?\d+/g),o=[...e.matchAll(s)];if(4===o.length){const e=null!==(i=null===(t=o.pop())||void 0===t?void 0:t[0])&&void 0!==i?i:"0",s=o.map(parseToFixed2HexString);return{colorCode:"#".concat(s.join("")),opacity:e}}{const e=o.map(parseToFixed2HexString);return{colorCode:"#".concat(e.join("")),opacity:"1"}}}if(4===e.length){const t=e.substring(1);return{colorCode:"#".concat(t[0],t[0],t[1],t[1],t[2],t[2]),opacity:"1"}}return{colorCode:e,opacity:"1"}},updateNextSiblingValue=e=>{var t,i;(null===(t=e.target)||void 0===t?void 0:t.nextElementSibling)&&(e.target.nextElementSibling.value=null===(i=e.currentTarget)||void 0===i?void 0:i.value)},updatePreviousSiblingValue=e=>{var t,i;(null===(t=e.target)||void 0===t?void 0:t.previousElementSibling)&&(e.target.previousElementSibling.value=null===(i=e.currentTarget)||void 0===i?void 0:i.value)},relativeCoordinatesCommands=["a","c","m","s","q","t","l","z"],absoluteCoordinatesCommands=["A","C","L","M","Q","S","T","Z"],relativeSingleDirectionCommands=["h","v"],absoluteSingleDirectionCommands=["H","V"],relativeCommands=[...relativeCoordinatesCommands,relativeSingleDirectionCommands],singleDirectionCommands=[...relativeSingleDirectionCommands,...absoluteSingleDirectionCommands],pathCommandValues=[...relativeCoordinatesCommands,...absoluteCoordinatesCommands,...singleDirectionCommands],inputFieldGetterGenerator=e=>t=>null==e?void 0:e.querySelector("#"+t),updateStyleInputFields=(e,t)=>{var i,s,o,a,n,r,l,d,h;const c=(_=null===(i=e.shadowRoot)||void 0===i?void 0:i.getElementById("footer-input"),e=>null==_?void 0:_.querySelector("#"+e));var _;const p={colorCode:"#000000",opacity:"1"},v=t.stroke?normalizeColorCode(t.stroke):p,u=t.fill?normalizeColorCode(t.fill):p,f=c(SVGParamFieldID.FILL_COLOR),g=c(SVGParamFieldID.FILL_OPACITY),m=c(SVGParamFieldID.LINE_CAP),S=c(SVGParamFieldID.LINE_DASH),w=c(SVGParamFieldID.STROKE_COLOR),P=c(SVGParamFieldID.STROKE_OPACITY),E=c(SVGParamFieldID.STROKE_WIDTH),y=c(SVGParamFieldID.TEXT_FONT_FAMILY),C=c(SVGParamFieldID.TEXT_FONT_SIZE),T=c(SVGParamFieldID.TEXT);f&&(f.value=u.colorCode),g&&(g.value=u.opacity,g.dispatchEvent(new Event("change"))),m&&(m.value=null!==(s=t.lineCap)&&void 0!==s?s:"butt"),S&&(S.value=null!==(a=null===(o=t.lineDash)||void 0===o?void 0:o.join(","))&&void 0!==a?a:"0"),w&&(w.value=v.colorCode),P&&(P.value=v.opacity,P.dispatchEvent(new Event("change"))),E&&(E.value=null!==(n=t.strokeWidth)&&void 0!==n?n:"0"),y&&(y.value=null!==(r=t.fontFamily)&&void 0!==r?r:"Arial"),C&&(C.value=null!==(d=null===(l=t.fontSize)||void 0===l?void 0:l.toString())&&void 0!==d?d:"18"),T&&(T.value=null!==(h=t.text)&&void 0!==h?h:"Input text...")},getToolButton=(e,t)=>{var i,s,o;const a=null===(i=e.shadowRoot)||void 0===i?void 0:i.getElementById("tool-box"),n=null===(s=null==a?void 0:a.shadowRoot)||void 0===s?void 0:s.getElementById("tool-box-button-"+t);return null===(o=null==n?void 0:n.shadowRoot)||void 0===o?void 0:o.getElementById(t)},setIsButtonActive=(e,t,i=!0)=>{const s=getToolButton(e,t);null==s||s.setAttribute("isactive",`${i}`)},setIsButtonDisabled=(e,t,i=!0)=>{const s=getToolButton(e,t);i?null==s||s.setAttribute("disabled",""):null==s||s.removeAttribute("disabled")},measureText=(e,t,i,s)=>{var o,a;const n=document.createElement("canvas");document.body.appendChild(n);let r=null!==(a=null!==(o=null==i?void 0:i.getContext("2d"))&&void 0!==o?o:s)&&void 0!==a?a:n.getContext("2d");if(!r)return;r.font=`${t.fontSize}px ${t.fontFamily}`,t.stroke&&(r.strokeStyle=t.stroke),t.lineDash&&r.setLineDash(t.lineDash),t.lineCap&&(r.lineCap=t.lineCap);const l=r.measureText(e),d=l.width,h=l.fontBoundingBoxAscent+l.fontBoundingBoxDescent;return document.body.removeChild(n),{width:d,height:h}},getCanvasRectangleValuesFromPoints=(e,t)=>({startingCorner:e,width:t[0]-e[0],height:t[1]-e[1]}),getFormattedRectangleValuesFromPoints=(e,t)=>{const i=Math.abs(t[0]-e[0]),s=Math.abs(t[1]-e[1]);return{startingCorner:[Math.min(e[0],t[0]),Math.min(e[1],t[1])],width:i,height:s}},calculateDistanceBetweenPoints=(e,t)=>{const i=e[0]-t[0],s=e[1]-t[1],o=Math.pow(i,2)+Math.pow(s,2);return Math.sqrt(o)},partitionCoordinates=e=>e.reduce(((e,t)=>[[...e[0],t[0]],[...e[1],t[1]]]),[[],[]]),betweenHelper=e=>(t,i)=>e[0]>=t[0]&&e[1]>=t[1]&&e[0]<=i[0]&&e[1]<=i[1],isBetweenTwoCoordinates=(e,t)=>i=>{const s=betweenHelper(i);if(e[0]<=t[0]&&e[1]<=t[1])return s(e,t);s(e,e)},isPointInsideAnotherShape=e=>t=>isShapeInsideAnotherShape(t)({boundaries:[e,e,e,e]}),isShapeInsideAnotherShape=e=>t=>{var i;if(!e)return!1;const{boundaries:s}=e;if(s){const[e,n]=s.reduce(((e,t)=>[[...e[0],t[0]],[...e[1],t[1]]]),[[],[]]),r=[Math.min(...e),Math.min(...n)],l=[Math.max(...e),Math.max(...n)];return null===(i=t.boundaries)||void 0===i?void 0:i.every((o=r,a=l,e=>{const t=betweenHelper(e);if(o[0]<=a[0]&&o[1]<=a[1])return t(o,a);t(o,o)}))}var o,a},getCircleBoundaries=(e,t,i)=>[[e[0]-t,e[1]+i],[e[0]+t,e[1]+i],[e[0]-t,e[1]-i],[e[0]+t,e[1]-i]],getRectBoundaries=(e,t,i)=>{const s=e[0],o=e[1],a=e[0]+t,n=e[1]+i;return[[s,n],[s,o],[a,n],[a,o]]},getLineBoundaries=(e,t)=>{const i=e[0],s=t[0],o=e[1],a=t[1];return[[i,o],[i,a],[s,o],[s,a]]},getTextBoundaries=(e,t,i)=>{const s=parseInt(e[0].toString());parseInt(e[0].toString());const o=[s,e[1]+i/4],a=[s,e[1]-i],n=[e[0]+t,e[1]],r=[e[0]+t,e[1]-i];return console.debug(o,a,n,r),[o,a,n,r]},relativePathToAbsolutePath=(e,t)=>{let i=[0,0];return e.reduce(((e,s)=>{if(!Array.isArray(s.points))return[...e,{command:s.command.toUpperCase(),points:s.points}];if(relativeCommands.includes(s.command)){const t=s.points.reduce(((e,t,o)=>"c"===s.command?o%3==2?(i=[i[0]+1.05*t[0],i[1]+1.05*t[1]],[...e,i]):e:0===o?(i=[i[0]+t[0],i[1]+t[1]],[i]):(i=[i[0]+t[0],i[1]+t[1]],[...e,i])),[]);return[...e,{command:s.command.toUpperCase(),points:t}]}return[...e,{command:s.command,points:t?s.points.map(sumOfCoordinates(t)):s.points}]}),[])},getPointsOfDrawPath=e=>e.reduce(((e,t)=>{if(!t.points)return e;if(Array.isArray(t.points)&&singleDirectionCommands.includes(t.command))switch(t.command){case"H":case"h":return[...e,[0,parseFloat(t.points[0])]];case"V":case"v":return[...e,[parseFloat(t.points[0]),0]]}return[...e,...t.points]}),[]),splitCoordinate=(e,t)=>[[...e[0],t[0]],[...e[1],t[1]]],splitAllCoordinates=e=>e.reduce(splitCoordinate,[[],[]]),getMinMaxValuesOfSplitCoordinates=(e,t)=>({xMin:Math.min(...e),yMin:Math.min(...t),xMax:Math.max(...e),yMax:Math.max(...t)}),getMinMaxValuesOfCoordinates=e=>{const[t,i]=splitAllCoordinates(e);return getMinMaxValuesOfSplitCoordinates(t,i)},getBoundaryFromCoordinates=e=>{const{xMin:t,xMax:i,yMin:s,yMax:o}=getMinMaxValuesOfCoordinates(e);return[[t,s],[i,s],[t,o],[i,o]]},getPathBoundaries=e=>{const t=relativePathToAbsolutePath(e),i=getPointsOfDrawPath(t);return getBoundaryFromCoordinates(i)},sumOfCoordinates=e=>t=>[e[0]+t[0],e[1]+t[1]],rectangleParamsFromBoundaries=e=>{const[t,i]=Array.from(new Set(splitAllCoordinates(e))),{xMin:s,yMin:o,xMax:a,yMax:n}=getMinMaxValuesOfSplitCoordinates(t,i);return{startingCorner:[s,o],width:a-s,height:n-o}};let nanoid=(e=21)=>{let t="",i=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let s=63&i[e];t+=s<36?s.toString(36):s<62?(s-26).toString(36).toUpperCase():s<63?"_":"-"}return t};const isEllipse=e=>void 0!==e.toSVGEllipseParams,isRectangle=e=>void 0!==e.toSvgRectParams,isLine=e=>void 0!==e.toSVGLineParams,isPath=e=>void 0!==e.toSVGPathParams,isText=e=>void 0!==e.toSVGTextParams,isShapeType=e=>!!e&&void 0!==e.getDeconstructedShapeData,typeOfShape=e=>isRectangle(e)?"Rectangle":isEllipse(e)?"Ellipse":isLine(e)?"Line":isPath(e)?"Path":isText(e)?"TextShape":"Freehand",isMoveTool=e=>!!e&&void 0!==e.toolName&&e.toolName===Tools_List.MOVE;var _a,_Shape_counter,_Shape_fill,_Shape_id,_Shape_stroke,_Shape_strokeWidth,_Shape_lineCap,_Shape_lineDash,_Shape_fontSize,_Shape_fontFamily,_Ellipse_center;class Shape{constructor(e=[[-1,-1],[-1,-1],[-1,-1],[-1,-1]],t={},i=!0,s=!1){var o,a,n,r,l,d,h,c,_;_Shape_fill.set(this,void 0),_Shape_id.set(this,void 0),_Shape_stroke.set(this,void 0),_Shape_strokeWidth.set(this,void 0),_Shape_lineCap.set(this,void 0),_Shape_lineDash.set(this,void 0),_Shape_fontSize.set(this,void 0),_Shape_fontFamily.set(this,void 0),this.isLocked=!1,this.text="Input text...",this.index=0,this.moveTransformMatrix=(e,t)=>{const{a:i,b:s,c:o,d:a,e:n,f:r}=this.transformMatrix||new DOMMatrix;this.transformMatrix=new DOMMatrix([i,s,o,a,n+e,r+t])},this.updateSVGParam=(e,t)=>{const i=this.getSvgParams();i[e]=t,this.updateSVGParams(i)},this.updateSVGParams=e=>{var t;if(__classPrivateFieldSet(this,_Shape_fill,e.fill,"f"),__classPrivateFieldSet(this,_Shape_stroke,e.stroke,"f"),__classPrivateFieldSet(this,_Shape_strokeWidth,e.strokeWidth,"f"),__classPrivateFieldSet(this,_Shape_lineCap,e.lineCap,"f"),__classPrivateFieldSet(this,_Shape_lineDash,e.lineDash,"f"),__classPrivateFieldSet(this,_Shape_fontFamily,e.fontFamily,"f"),__classPrivateFieldSet(this,_Shape_fontSize,e.fontSize,"f"),isText(this)){this.text=null!==(t=e.text)&&void 0!==t?t:this.text;const i=measureText(this.text,this.getSvgParams());i&&(this.boundaries=getTextBoundaries(this.getCenter(),null==i?void 0:i.width,null==i?void 0:i.height))}},this.replaceID=e=>(__classPrivateFieldSet(this,_Shape_id,e,"f"),this),this.moveBoundaries=e=>{var t;const[i,s]=e;this.boundaries=null===(t=this.boundaries)||void 0===t?void 0:t.map((e=>[e[0]+i,e[1]+s]))},this.getSvgParams=()=>({fill:__classPrivateFieldGet(this,_Shape_fill,"f"),stroke:__classPrivateFieldGet(this,_Shape_stroke,"f"),strokeWidth:__classPrivateFieldGet(this,_Shape_strokeWidth,"f"),transformMatrix:this.transformMatrix,lineCap:__classPrivateFieldGet(this,_Shape_lineCap,"f"),lineDash:__classPrivateFieldGet(this,_Shape_lineDash,"f"),fontSize:__classPrivateFieldGet(this,_Shape_fontSize,"f"),fontFamily:__classPrivateFieldGet(this,_Shape_fontFamily,"f"),text:this.text}),this.getId=()=>__classPrivateFieldGet(this,_Shape_id,"f"),this.getCenter=()=>{throw new Error("not implemented")},this.moveTo=e=>{throw new Error("not implemented")},this.toString=()=>{throw new Error("not implemented")},this.getDeconstructedShapeData=()=>{throw new Error("not implemented")},i&&__classPrivateFieldSet(c=Shape,_a,(_=__classPrivateFieldGet(c,_a,"f",_Shape_counter),++_),"f",_Shape_counter),__classPrivateFieldSet(this,_Shape_id,nanoid(),"f"),__classPrivateFieldSet(this,_Shape_fill,null!==(o=t.fill)&&void 0!==o?o:"rgba(0,0,0,0)","f"),__classPrivateFieldSet(this,_Shape_stroke,null!==(a=t.stroke)&&void 0!==a?a:"rgba(0,0,0,1)","f"),__classPrivateFieldSet(this,_Shape_strokeWidth,null!==(n=t.strokeWidth)&&void 0!==n?n:"1","f"),__classPrivateFieldSet(this,_Shape_lineDash,null!==(r=t.lineDash)&&void 0!==r?r:[0],"f"),__classPrivateFieldSet(this,_Shape_fontSize,null!==(l=t.fontSize)&&void 0!==l?l:18,"f"),__classPrivateFieldSet(this,_Shape_fontFamily,null!==(d=t.fontFamily)&&void 0!==d?d:"Arial","f"),this.text=null!==(h=t.text)&&void 0!==h?h:this.text,this.transformMatrix=t.transformMatrix,this.boundaries=e,this.isLocked=s,this.index=__classPrivateFieldGet(Shape,_a,"f",_Shape_counter)}}_a=Shape,_Shape_fill=new WeakMap,_Shape_id=new WeakMap,_Shape_stroke=new WeakMap,_Shape_strokeWidth=new WeakMap,_Shape_lineCap=new WeakMap,_Shape_lineDash=new WeakMap,_Shape_fontSize=new WeakMap,_Shape_fontFamily=new WeakMap,_Shape_counter={value:0};class Ellipse extends Shape{constructor(e,t,i,s,o,a=!1){super(getCircleBoundaries(e,t,i),s,o,a),_Ellipse_center.set(this,void 0),this.moveTo=e=>{const t=e[0]-__classPrivateFieldGet(this,_Ellipse_center,"f")[0],i=e[1]-__classPrivateFieldGet(this,_Ellipse_center,"f")[1];__classPrivateFieldSet(this,_Ellipse_center,e,"f"),this.moveBoundaries([t,i])},this.getCenter=()=>__classPrivateFieldGet(this,_Ellipse_center,"f"),this.toPathParams=()=>({cx:__classPrivateFieldGet(this,_Ellipse_center,"f")[0],cy:__classPrivateFieldGet(this,_Ellipse_center,"f")[1],rx:this.radiusX,ry:this.radiusY}),this.toSVGEllipseParams=()=>Object.assign({cx:__classPrivateFieldGet(this,_Ellipse_center,"f")[0].toString(),cy:__classPrivateFieldGet(this,_Ellipse_center,"f")[1].toString(),rx:this.radiusX.toString(),ry:this.radiusY.toString()},this.getSvgParams()),this.getDeconstructedShapeData=()=>({type:"Ellipse",id:this.getId(),center:__classPrivateFieldGet(this,_Ellipse_center,"f"),radiusX:this.radiusX,radiusY:this.radiusY,isLocked:this.isLocked,svgParams:this.getSvgParams()}),this.toString=()=>JSON.stringify({center:__classPrivateFieldGet(this,_Ellipse_center,"f"),radiusX:this.radiusX,radiusY:this.radiusY}),__classPrivateFieldSet(this,_Ellipse_center,e,"f"),this.radiusX=t,this.radiusY=i}}_Ellipse_center=new WeakMap;const getFreehandBoundaries=e=>{const[t,i]=getUniqueXandYCoordinatesFromBoundaries(e),s=Math.max(...t),o=Math.max(...i),a=Math.min(...t),n=Math.min(...i);return[[a,n],[a,o],[s,n],[s,o]]};var _Freehand_points,_Freehand_center,_Freehand_updateCenter,_Line_center,_Path_rawDrawPath,_Path_center,_Rectangle_startingCorner,_Rectangle_width,_Rectangle_height,_TextShape_position,_TextShape_height,_TextShape_width;class Freehand extends Shape{constructor(e,t,i,s=!1){super(getFreehandBoundaries(e),t,i,s),_Freehand_points.set(this,void 0),_Freehand_center.set(this,[-1,-1]),_Freehand_updateCenter.set(this,(()=>{const e=this.boundaries.reduce(((e,t)=>[e[0]+t[0],e[1]+t[1]]),[0,0]);__classPrivateFieldSet(this,_Freehand_center,[e[0]/4,e[1]/4],"f")})),this.getCenter=()=>__classPrivateFieldGet(this,_Freehand_center,"f"),this.moveTo=e=>{const t=e[0]-__classPrivateFieldGet(this,_Freehand_center,"f")[0],i=e[1]-__classPrivateFieldGet(this,_Freehand_center,"f")[1];__classPrivateFieldSet(this,_Freehand_points,__classPrivateFieldGet(this,_Freehand_points,"f").map((e=>[e[0]+t,e[1]+i])),"f"),__classPrivateFieldGet(this,_Freehand_updateCenter,"f").call(this),this.moveBoundaries([t,i])},this.getPoints=()=>__classPrivateFieldGet(this,_Freehand_points,"f"),this.toSVGFreehandParams=()=>Object.assign({points:this.toString()},this.getSvgParams()),this.getDeconstructedShapeData=()=>({id:this.getId(),type:"Freehand",points:__classPrivateFieldGet(this,_Freehand_points,"f"),isLocked:this.isLocked,svgParams:this.getSvgParams()}),this.toString=()=>__classPrivateFieldGet(this,_Freehand_points,"f").reduce(((e,t)=>e.concat(`${t[0]}`,",",`${t[1]}`," ")),"").trim(),__classPrivateFieldSet(this,_Freehand_points,e,"f"),__classPrivateFieldGet(this,_Freehand_updateCenter,"f").call(this)}}_Freehand_points=new WeakMap,_Freehand_center=new WeakMap,_Freehand_updateCenter=new WeakMap;class Line extends Shape{constructor(e,t,i,s,o=!1){super(getLineBoundaries(e,t),i,s,o),_Line_center.set(this,void 0),this.moveTo=e=>{const t=e[0]-__classPrivateFieldGet(this,_Line_center,"f")[0],i=e[1]-__classPrivateFieldGet(this,_Line_center,"f")[1];__classPrivateFieldSet(this,_Line_center,e,"f"),this.points=this.points.map((e=>[e[0]+t,e[1]+i])),this.moveBoundaries([t,i])},this.getCenter=()=>__classPrivateFieldGet(this,_Line_center,"f"),this.toSVGLineParams=()=>Object.assign({x1:this.points[0][0].toString(),y1:this.points[0][1].toString(),x2:this.points[1][0].toString(),y2:this.points[1][1].toString()},this.getSvgParams()),this.getDeconstructedShapeData=()=>({id:this.getId(),type:"Line",startPoint:this.points[0],endPoint:this.points[1],isLocked:this.isLocked,svgParams:this.getSvgParams()}),this.toString=()=>JSON.stringify({start:{x:this.points[0][0],y:this.points[0][1]},end:{x:this.points[1][0],y:this.points[1][1]}}),this.points=[e,t],__classPrivateFieldSet(this,_Line_center,[(e[0]+t[0])/2,(e[1]+t[1])/2],"f")}}_Line_center=new WeakMap;class Path extends Shape{constructor(e,t,i,s=!1){if(super(void 0,t,i,s),_Path_rawDrawPath.set(this,void 0),_Path_center.set(this,[-1,-1]),this.getCenter=()=>__classPrivateFieldGet(this,_Path_center,"f"),this.toSVGPathParams=()=>Object.assign({d:this.toString()},this.getSvgParams()),this.getDeconstructedShapeData=()=>({id:this.getId(),type:"Path",drawPath:__classPrivateFieldGet(this,_Path_rawDrawPath,"f"),isLocked:this.isLocked,svgParams:this.getSvgParams()}),this.moveTo=e=>{const[t,i]=[e[0]-__classPrivateFieldGet(this,_Path_center,"f")[0],e[1]-__classPrivateFieldGet(this,_Path_center,"f")[1]];this.moveTransformMatrix(t,i),__classPrivateFieldSet(this,_Path_center,[__classPrivateFieldGet(this,_Path_center,"f")[0]+t,__classPrivateFieldGet(this,_Path_center,"f")[1]+i],"f"),this.boundaries=this.boundaries.map((e=>[e[0]+t,e[1]+i]))},this.toString=()=>{const e=this.drawPath.reduce(((e,t)=>{var i;return e.concat(" ",t.command," ",Array.isArray(t.points)?t.points.reduce(((e,t)=>e.concat([t[0].toString(),t[1].toString()].join()," ")),""):null!==(i=t.points)&&void 0!==i?i:""," ").trim()}),"");return e},__classPrivateFieldSet(this,_Path_rawDrawPath,e,"f"),this.drawPath=e.map((e=>(singleDirectionCommands.includes(e.command),{command:e.command,points:e.points}))),null==t?void 0:t.bBox){const{x:e,y:i,width:s,height:o}=t.bBox,a=[[e,i],[e,i+o],[e+s,i],[e+s,i+o]];this.boundaries=a.map((e=>{const t=new DOMPoint(e[0],e[1]).matrixTransform(this.transformMatrix);return[t.x,t.y]}))}else this.boundaries=getPathBoundaries(this.drawPath);const o=this.boundaries.reduce(((e,t)=>sumOfCoordinates(e)(t)),[0,0]);__classPrivateFieldSet(this,_Path_center,[o[0]/4,o[1]/4],"f")}}_Path_rawDrawPath=new WeakMap,_Path_center=new WeakMap;class Rectangle extends Shape{constructor(e,t,i,s={},o,a=!1){super(getRectBoundaries(e,t,i),s,o,a),_Rectangle_startingCorner.set(this,[-1,-1]),_Rectangle_width.set(this,0),_Rectangle_height.set(this,0),this.resize=e=>{__classPrivateFieldSet(this,_Rectangle_width,2*(e[0]-__classPrivateFieldGet(this,_Rectangle_startingCorner,"f")[0]),"f"),__classPrivateFieldSet(this,_Rectangle_height,2*(e[1]-__classPrivateFieldGet(this,_Rectangle_startingCorner,"f")[1]),"f")},this.moveTo=e=>{const t=e[0]-__classPrivateFieldGet(this,_Rectangle_startingCorner,"f")[0],i=e[1]-__classPrivateFieldGet(this,_Rectangle_startingCorner,"f")[1];__classPrivateFieldSet(this,_Rectangle_startingCorner,e,"f"),this.moveBoundaries([t,i])},this.getCenter=()=>__classPrivateFieldGet(this,_Rectangle_startingCorner,"f"),this.getWidth=()=>__classPrivateFieldGet(this,_Rectangle_width,"f"),this.getHeight=()=>__classPrivateFieldGet(this,_Rectangle_height,"f"),this.toPathParams=()=>({x:__classPrivateFieldGet(this,_Rectangle_startingCorner,"f")[0],y:__classPrivateFieldGet(this,_Rectangle_startingCorner,"f")[1],width:__classPrivateFieldGet(this,_Rectangle_width,"f"),height:__classPrivateFieldGet(this,_Rectangle_height,"f")}),this.toSvgRectParams=()=>Object.assign({x:__classPrivateFieldGet(this,_Rectangle_startingCorner,"f")[0].toString(),y:__classPrivateFieldGet(this,_Rectangle_startingCorner,"f")[1].toString(),width:__classPrivateFieldGet(this,_Rectangle_width,"f").toString(),height:__classPrivateFieldGet(this,_Rectangle_height,"f").toString()},this.getSvgParams()),this.getDeconstructedShapeData=()=>({id:this.getId(),type:"Rectangle",startingCorner:__classPrivateFieldGet(this,_Rectangle_startingCorner,"f"),width:__classPrivateFieldGet(this,_Rectangle_width,"f"),height:__classPrivateFieldGet(this,_Rectangle_height,"f"),isLocked:this.isLocked,svgParams:this.getSvgParams()}),this.toString=()=>JSON.stringify(this.boundaries),__classPrivateFieldSet(this,_Rectangle_startingCorner,e,"f"),__classPrivateFieldSet(this,_Rectangle_width,t,"f"),__classPrivateFieldSet(this,_Rectangle_height,i,"f")}}_Rectangle_startingCorner=new WeakMap,_Rectangle_width=new WeakMap,_Rectangle_height=new WeakMap;class TextShape extends Shape{constructor(e,t,i,s,o,a=!1){super(getTextBoundaries(i,e,t),s,o,a),_TextShape_position.set(this,void 0),_TextShape_height.set(this,void 0),_TextShape_width.set(this,void 0),this.getText=()=>this.text,this.getHeight=()=>__classPrivateFieldGet(this,_TextShape_height,"f"),this.getWidth=()=>__classPrivateFieldGet(this,_TextShape_width,"f"),this.moveTo=e=>{const[t,i]=[e[0]-__classPrivateFieldGet(this,_TextShape_position,"f")[0],e[1]-__classPrivateFieldGet(this,_TextShape_position,"f")[1]];__classPrivateFieldSet(this,_TextShape_position,e,"f"),this.moveBoundaries([t,i])},this.toPathParams=()=>({position:__classPrivateFieldGet(this,_TextShape_position,"f")}),this.getCenter=()=>__classPrivateFieldGet(this,_TextShape_position,"f"),this.getDeconstructedShapeData=()=>({id:this.getId(),type:"TextShape",width:__classPrivateFieldGet(this,_TextShape_width,"f"),height:__classPrivateFieldGet(this,_TextShape_height,"f"),position:__classPrivateFieldGet(this,_TextShape_position,"f"),isLocked:this.isLocked,svgParams:this.getSvgParams()}),this.toSVGTextParams=()=>Object.assign({position:__classPrivateFieldGet(this,_TextShape_position,"f")},this.getSvgParams()),__classPrivateFieldSet(this,_TextShape_width,e,"f"),__classPrivateFieldSet(this,_TextShape_height,t,"f"),__classPrivateFieldSet(this,_TextShape_position,i,"f")}}_TextShape_position=new WeakMap,_TextShape_height=new WeakMap,_TextShape_width=new WeakMap;const setSVGStyleParams=(e,t,i,s,o,a,n)=>{const{a:r,b:l,c:d,d:h,e:c,f:_}=n||{};o&&e.setAttribute("stroke",o),a&&e.setAttribute("stroke-width",a),s&&e.setAttribute("fill",s),t&&e.setAttribute("stroke-dasharray",t.join(" ")),i&&e.setAttribute("stroke-linecap",i),n&&e.setAttribute("transform",`matrix(${[r,l,d,h,c,_].join(",")})`)},setRectSVGParams=(e,t)=>{const{x:i,y:s,width:o,height:a,fill:n,stroke:r,strokeWidth:l,lineDash:d,lineCap:h}=t;e.setAttribute("x",i),e.setAttribute("y",s),e.setAttribute("width",o),e.setAttribute("height",a),setSVGStyleParams(e,d,h,n,r,l)},setEllipseSVGParams=(e,t)=>{const{cx:i,cy:s,rx:o,ry:a,fill:n,stroke:r,strokeWidth:l,lineDash:d,lineCap:h}=t;e.setAttribute("cx",i),e.setAttribute("cy",s),e.setAttribute("rx",o),e.setAttribute("ry",a),setSVGStyleParams(e,d,h,n,r,l)},setCircleSVGParams=(e,t)=>{const{cx:i,cy:s,rx:o,fill:a,stroke:n,strokeWidth:r,lineDash:l,lineCap:d}=t;e.setAttribute("cx",i),e.setAttribute("cy",s),e.setAttribute("r",o),setSVGStyleParams(e,l,d,a,n,r)},setLineSVGParams=(e,t)=>{const{x1:i,y1:s,x2:o,y2:a,stroke:n,strokeWidth:r,lineDash:l,lineCap:d}=t;e.setAttribute("x1",i),e.setAttribute("y1",s),e.setAttribute("x2",o),e.setAttribute("y2",a),setSVGStyleParams(e,l,d,void 0,n,r)},setFreehandSVGParams=(e,t)=>{const{points:i,stroke:s,strokeWidth:o,lineDash:a,lineCap:n}=t;e.setAttribute("points",i),setSVGStyleParams(e,a,n,void 0,s,o)},setPathSVGParams=(e,t)=>{const{d:i,fill:s,stroke:o,strokeWidth:a,transformMatrix:n,lineDash:r,lineCap:l}=t;e.setAttribute("d",i),setSVGStyleParams(e,r,l,s,o,a,n)},setTextSVGParams=(e,t)=>{const i=t.toSVGTextParams(),{position:s,lineDash:o,lineCap:a,fill:n,stroke:r,strokeWidth:l,transformMatrix:d=new DOMMatrix([1,0,0,1,0,0]),fontFamily:h,fontSize:c,text:_}=i;_&&(e.setAttribute("x",s[0].toString()),e.setAttribute("y",s[1].toString()),e.setAttribute("style","font-family:".concat(null!=h?h:"arial",";","font-size:",(null!=c?c:12).toString(),"px")),e.innerHTML=_,setSVGStyleParams(e,o,a,n,r,l,d))},appendAsSVGShapeGeneratorFunction=(e,t=null)=>i=>{switch(typeOfShape(i)){case"Rectangle":{const s=i,o=document.createElementNS(t,"rect");setRectSVGParams(o,s.toSvgRectParams()),null==e||e.appendChild(o);break}case"Ellipse":{const s=i;if(s.radiusX===s.radiusY){const i=document.createElementNS(t,"circle");setCircleSVGParams(i,s.toSVGEllipseParams()),null==e||e.appendChild(i)}else{const i=document.createElementNS(t,"ellipse");setEllipseSVGParams(i,s.toSVGEllipseParams()),null==e||e.appendChild(i)}break}case"Line":{const s=i,o=document.createElementNS(t,"line");setLineSVGParams(o,s.toSVGLineParams()),null==e||e.appendChild(o);break}case"Freehand":{const s=i,o=document.createElementNS(t,"polyline");setFreehandSVGParams(o,s.toSVGFreehandParams()),null==e||e.appendChild(o);break}case"Path":{const s=i,o=document.createElementNS(t,"path");setPathSVGParams(o,s.toSVGPathParams()),null==e||e.append(o);break}case"TextShape":{const s=i,o=document.createElementNS(t,"text");setTextSVGParams(o,s),null==e||e.append(o);break}}},getPathCommands=e=>{const t=Array.from(e.matchAll(pathCommandsRegExp)).map((e=>e[0])),i=t.reduce(((e,t,i)=>pathCommandValues.includes(t)?[...e,i]:e),[]);return i.reduce(((e,s,o)=>o===i.length-1?[...e,t.slice(s)]:[...e,t.slice(s,i[o+1])]),[]).map(convertMatchesToSVGDrawPath)},convertMatchesToSVGDrawPath=e=>{const t=e[0].trim(),i=e.slice(1);if(singleDirectionCommands.includes(t))return{command:t,points:i.shift()};return{command:t,points:i.reduce(((e,t,s)=>{if(s%2==0)return e;const o=[parseFloat(i[s-1]),parseFloat(t)];return[...e,o]}),[])}},getsvgParams=e=>{var t,i,s;const o=normalizeColorCode(e.getAttribute("fill")),a=normalizeColorCode(e.getAttribute("stroke")),n=hexToRGBA(o.colorCode,o.opacity),r=hexToRGBA(a.colorCode,a.opacity),l=null!==(t=e.getAttribute("stroke-width"))&&void 0!==t?t:"",d=null!==(i=e.getCTM())&&void 0!==i?i:void 0,h=e.style.fontSize,c=e.style.fontFamily,_=null===(s=e.getAttribute("stroke-dasharray"))||void 0===s?void 0:s.split(" ").map(parseInt),p=e.getAttribute("line-cap"),v="text"===e.tagName?e.innerHTML:"",u=e.getBBox();return{fill:n,stroke:r,strokeWidth:l,text:v,fontSize:h?parseInt(h):void 0,fontFamily:c,transformMatrix:d,lineDash:_,lineCap:p,bBox:u}},elementWrapper=e=>({getFloatAttribute:t=>{const i=e.getAttribute(t);return i?parseFloat(i):-1},getAttribute:e.getAttribute}),convertToShapeType=e=>{var t,i;const s=getsvgParams(e),o=elementWrapper(e);switch(e.tagName){case acceptedTags[0]:{const e=o.getFloatAttribute("cx"),t=o.getFloatAttribute("cy"),i=o.getFloatAttribute("r");return new Ellipse([e,t],i,i,s)}case acceptedTags[1]:{const e=o.getFloatAttribute("cx"),t=o.getFloatAttribute("cy"),i=o.getFloatAttribute("rx"),a=o.getFloatAttribute("ry");return new Ellipse([e,t],i,a,s)}case acceptedTags[2]:{const e=o.getFloatAttribute("x"),t=o.getFloatAttribute("y"),i=o.getFloatAttribute("width"),a=o.getFloatAttribute("height");return new Rectangle([e,t],i,a,s)}case acceptedTags[3]:{const e=(null!==(t=o.getAttribute("points"))&&void 0!==t?t:"").split(" ").map((e=>{const[t,i]=e.split(",");return[parseFloat(t),parseFloat(i)]}));return new Freehand(e,s)}case acceptedTags[4]:{const e=o.getFloatAttribute("x1"),t=o.getFloatAttribute("x2"),i=o.getFloatAttribute("y1"),a=o.getFloatAttribute("y2");return new Line([e,i],[t,a],s)}case acceptedTags[5]:{const t=o.getFloatAttribute("x"),i=o.getFloatAttribute("y"),{width:a,height:n}=e.getBBox();return new TextShape(a,n,[t,i],s)}default:{const e=null!==(i=o.getAttribute("d"))&&void 0!==i?i:"",t=getPathCommands(e);return new Path(t,s,!0)}}},convertSVGDocumentToShapes=e=>{const t=document.getElementById(e);return t?acceptedTags.map((e=>Array.from(t.getElementsByTagName(e)).map(convertToShapeType))).flat():[]},generateSVGURLFromShapes=e=>{const t=new XMLSerializer,i="http://www.w3.org/2000/svg",s=document.createElementNS(i,"svg"),o=document.createElementNS(i,"g"),[a,n]=e.reduce(((e,t)=>{var i;return[[...e[0],...t.boundaries],[...e[1],parseInt(null!==(i=t.getSvgParams().strokeWidth)&&void 0!==i?i:"0")]]}),[[],[]]),r=getMinMaxValuesOfCoordinates(a),l=Math.max(...n),d=r.yMin-l,h=r.xMin-l;s.setAttribute("height",(r.yMax-d).toString()),s.setAttribute("width",(r.xMax-h).toString()),o.setAttribute("transform","translate("+-r.xMin+","+-r.yMin+")"),s.appendChild(o);const c=appendAsSVGShapeGeneratorFunction(o,i);e.forEach(c);let _=t.serializeToString(s);return _.match(/^<svg[^>]+xmlns="http\:\/\/www\.w3\.org\/2000\/svg"/)||(_=_.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg"')),_.match(/^<svg[^>]+"http\:\/\/www\.w3\.org\/1999\/xlink"/)||(_=_.replace(/^<svg/,'<svg xmlns:xlink="http://www.w3.org/1999/xlink"')),_='<?xml version="1.0" standalone="no"?>\r\n'+_,"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(_)},Pen={generatePen:e=>({draw:(t,i)=>{Pen.draw(t,i,e)}}),draw:(e,t,i)=>{switch(typeOfShape(e)){case"Ellipse":Pen.drawEllipse(e,i,t);break;case"Rectangle":Pen.drawRectangle(e,i,t);break;case"Line":Pen.drawLine(e,i,t);break;case"Freehand":Pen.drawFreehand(e,i,t);break;case"Path":Pen.drawPath(e,i,t);break;case"TextShape":Pen.drawText(e,i,t)}},setStyles:(e,t,i)=>{const{fill:s,stroke:o,strokeWidth:a,transformMatrix:n}=i;s&&(t.fillStyle=s),o&&(t.strokeStyle=o),a&&(t.lineWidth=parseFloat(a)),n&&e.addPath(new Path2D,n),t.lineWidth=a?parseFloat(a):1,o&&"null"!==o&&(t.strokeStyle=o),s&&"none"!==s&&(t.fillStyle=s,t.fill(e)),(o||a)&&t.stroke(e),o||s||a||(t.stroke(e),t.fill(e))},applyStyles:(e,t,i)=>{const{fill:s,stroke:o,strokeWidth:a,transformMatrix:n,lineCap:r,lineDash:l}=t;if(n){const t=new Path2D;t.addPath(e,n),e=t}return l&&i.setLineDash(l),r&&(i.lineCap=r),o||s||a?(a&&(i.lineWidth=parseFloat(a)),s&&"none"!==s&&(i.fillStyle=s),o&&"null"!==o&&(i.strokeStyle=o),e):(i.stroke(e),i.fill(e),e)},drawPath:(e,t,i)=>{let s=new Path2D(e.toString());if(t){const o=Object.assign(Object.assign({},e.getSvgParams()),i);s=Pen.applyStyles(s,o,t),o.stroke&&t.stroke(s),o.fill&&t.fill(s),t.closePath()}},drawText:(e,t,i)=>{var s,o;const{position:a}=e.toPathParams(),n=null!=i?i:e.getSvgParams(),{text:r,fontSize:l,fontFamily:d}=n,h=__rest(n,["text","fontSize","fontFamily"]);t&&r&&(h.stroke&&(t.strokeStyle=h.stroke),n.lineDash&&t.setLineDash(n.lineDash),n.lineCap&&(t.lineCap=n.lineCap),n.strokeWidth&&(t.lineWidth=parseInt(n.strokeWidth)),t.fillStyle=null!==(s=h.fill)&&void 0!==s?s:"#000000",t.font=(null!==(o=null==l?void 0:l.toString())&&void 0!==o?o:"12").concat("px ",(null!=d?d:"Arial").toLowerCase()),t.fillText(r,...a),t.strokeText(r,...a),null==t||t.closePath())},drawFreehand:(e,t,i)=>{let s=new Path2D;const o=e.getPoints(),a=o[0],n=o.slice(1),r=null!=i?i:e.getSvgParams();t&&(Pen.applyStyles(s,r,t),s.moveTo(...a),n.forEach((e=>{s.lineTo(...e)})),null==t||t.stroke(s),null==t||t.closePath())},drawLine:(e,t,i)=>{let s=new Path2D;if(t){const o=null!=i?i:e.getSvgParams();Pen.applyStyles(s,o,t);const{fill:a,stroke:n}=o;s.moveTo(...e.points[0]),s.lineTo(...e.points[1]),n&&t.stroke(s),a&&t.fill(s),t.closePath()}},drawRectangle:(e,t,i)=>{let s=new Path2D;const o=Object.values(e.toPathParams());if(t){const a=null!=i?i:e.getSvgParams();s=Pen.applyStyles(s,a,t);const{fill:n,stroke:r}=a;s.rect(...o),r&&t.stroke(s),n&&t.fill(s),t.closePath()}},drawEllipse:(e,t,i)=>{const s=new Path2D,o=Object.values(e.toPathParams());if(t){const a=null!=i?i:e.getSvgParams();Pen.applyStyles(s,a,t);const{fill:n,stroke:r}=a;s.ellipse(...o,0,0,2*Math.PI),r&&t.stroke(s),n&&t.fill(s),null==t||t.closePath}},clearCanvas:(e,t)=>{if(e){let i=t;i||(i=e.getContext("2d")),i&&i.clearRect(0,0,e.width,e.height)}}};var _Tool_draw,_DrawTool_handleTimeOut,_DrawTool_draw,_DrawTool_onDown,_DrawTool_onUp,_DrawTool_onOut,_DrawTool_onMove;Object.freeze(Pen);class Tool{constructor(e,t,i,s=[0,0],o,a={text:"Input text..."},n){var r,l;this.allShapes=[],this.shallWait=!1,this.isDrawing=!1,this.previousCoordinates=[0,0],this.currentCoordinates=[0,0],this.setSVGParam=(e,t)=>{this.drawPenConfig[e]=t},this.setSVGParams=e=>{this.drawPenConfig=e},this.resetPreview=()=>{this.previewLayer&&this.previewContext&&Pen.clearCanvas(this.previewLayer,this.previewContext)},this.resetView=()=>{this.drawLayer&&this.drawContext&&Pen.clearCanvas(this.drawLayer,this.drawContext)},this.resetCoordinates=()=>{this.previousCoordinates=[0,0],this.currentCoordinates=[0,0]},this.highlightPreview=()=>{this.previewContext&&(this.previewContext.strokeStyle="red",this.previewContext.setLineDash([10,10]),this.previewContext.lineWidth=3)},this.unHighlightpreview=()=>{this.previewContext&&this.previewContext.clearRect(0,0,this.self.width,this.self.height)},this.updateShapeData=e=>{throw new Error("not implemented")},this.getCoords=e=>[e.offsetX-this.offset[0],e.offsetY-this.offset[1]],_Tool_draw.set(this,(()=>{throw new Error("not implemented")})),this.executeAction=()=>{throw new Error("not implemented")},this.destroy=()=>{throw new Error("not implemented")},this.drawLayer=e,this.onUpdateEditor=i,this.self=t,this.offset=null!=s?s:[e.offsetLeft,e.offsetTop],this.previewLayer=o,this.previewPenConfig=null!=n?n:highlightStyle,this.drawPenConfig=a,this.previewContext=null!==(l=null===(r=this.previewLayer)||void 0===r?void 0:r.getContext("2d"))&&void 0!==l?l:null,this.drawContext=this.drawLayer.getContext("2d")}}_Tool_draw=new WeakMap;class DrawTool extends Tool{constructor(e,t,i,s,o,a){super(e,i,s,a,t,o),this.timesPerSecond=120,this.currentShapeComponents=[],_DrawTool_handleTimeOut.set(this,(()=>{this.shallWait=!0,setTimeout((()=>{this.shallWait=!1}),1e3/this.timesPerSecond)})),_DrawTool_draw.set(this,(()=>{this.currentShape&&Pen.drawLine(this.currentShape,this.previewContext)})),_DrawTool_onDown.set(this,(e=>{0===e.button&&(this.isDrawing=!0,this.currentShapeComponents=[],this.previousCoordinates=this.currentCoordinates,this.currentCoordinates=this.getCoords(e))})),_DrawTool_onUp.set(this,(()=>{if(this.currentShapeComponents.length>2){const e=new Freehand(this.currentShapeComponents,this.drawPenConfig);this.onUpdateEditor(e)}this.currentShapeComponents=[],this.isDrawing=!1})),_DrawTool_onOut.set(this,(()=>{this.isDrawing=!1})),_DrawTool_onMove.set(this,(e=>{this.isDrawing&&!this.shallWait&&(this.previousCoordinates=this.currentCoordinates,this.currentCoordinates=this.getCoords(e),this.currentShape=new Line(this.previousCoordinates,this.currentCoordinates,this.drawPenConfig,!1),Pen.drawLine(this.currentShape,this.previewContext),this.currentShapeComponents.push(this.currentCoordinates),__classPrivateFieldGet(this,_DrawTool_draw,"f").call(this),__classPrivateFieldGet(this,_DrawTool_handleTimeOut,"f").call(this))})),this.executeAction=()=>{this.drawLayer.addEventListener("mousemove",__classPrivateFieldGet(this,_DrawTool_onMove,"f")),this.drawLayer.addEventListener("mousedown",__classPrivateFieldGet(this,_DrawTool_onDown,"f")),this.drawLayer.addEventListener("mouseup",__classPrivateFieldGet(this,_DrawTool_onUp,"f")),this.drawLayer.addEventListener("mouseout",__classPrivateFieldGet(this,_DrawTool_onOut,"f"))},this.destroy=()=>{this.drawLayer.removeEventListener("mousemove",__classPrivateFieldGet(this,_DrawTool_onMove,"f")),this.drawLayer.removeEventListener("mousedown",__classPrivateFieldGet(this,_DrawTool_onDown,"f")),this.drawLayer.removeEventListener("mouseup",__classPrivateFieldGet(this,_DrawTool_onUp,"f")),this.drawLayer.removeEventListener("mouseout",__classPrivateFieldGet(this,_DrawTool_onOut,"f"))},this.resetPreview(),this.toolName=Tools_List.DRAW}}_DrawTool_handleTimeOut=new WeakMap,_DrawTool_draw=new WeakMap,_DrawTool_onDown=new WeakMap,_DrawTool_onUp=new WeakMap,_DrawTool_onOut=new WeakMap,_DrawTool_onMove=new WeakMap;const generateEllipse=(e,t,i,s)=>{const o=[(e[0]+t[0])/2,(e[1]+t[1])/2],a=calculateDistanceBetweenPoints(o,[t[0],(e[1]+t[1])/2]),n=calculateDistanceBetweenPoints(o,[(e[0]+t[0])/2,t[1]]);return new Ellipse(o,a,n,i,s)},generateCircle=(e,t,i,s)=>{const o=e,a=calculateDistanceBetweenPoints(e,t);return new Ellipse(o,a,a,i,s)};var _EllipseTool_draw,_EllipseTool_onKeyDown,_EllipseTool_onKeyUp,_EllipseTool_onDown,_EllipseTool_onUp,_EllipseTool_onMove,_LineTool_draw,_LineTool_onDown,_LineTool_onUp,_LineTool_onMove;class EllipseTool extends Tool{constructor(e,t,i,s,o,a){super(e,i,s,a,t,o,highlightStyle),this.isCircle=!1,_EllipseTool_draw.set(this,(()=>{this.currentShape&&Pen.drawEllipse(this.currentShape,this.drawContext,this.drawPenConfig),this.resetPreview()})),_EllipseTool_onKeyDown.set(this,(e=>{e.ctrlKey&&(this.isCircle=!0)})),_EllipseTool_onKeyUp.set(this,(()=>{this.isCircle=!1})),_EllipseTool_onDown.set(this,(e=>{0===e.button&&(this.isDrawing=!0,this.previousCoordinates=this.getCoords(e))})),_EllipseTool_onUp.set(this,(e=>{this.isDrawing=!1,this.currentCoordinates=this.getCoords(e),this.isCircle?this.currentShape=generateCircle(this.previousCoordinates,this.currentCoordinates,this.drawPenConfig):this.currentShape=generateEllipse(this.previousCoordinates,this.currentCoordinates,this.drawPenConfig),this.onUpdateEditor(this.currentShape),__classPrivateFieldGet(this,_EllipseTool_draw,"f").call(this)})),_EllipseTool_onMove.set(this,(e=>{if(this.currentCoordinates=this.getCoords(e),this.resetPreview(),this.isDrawing&&this.previewLayer)if(this.isCircle){const e=generateCircle(this.previousCoordinates,this.currentCoordinates,this.previewPenConfig,!1);this.currentShape=e,Pen.drawEllipse(e,this.previewContext)}else{const e=generateEllipse(this.previousCoordinates,this.currentCoordinates,this.previewPenConfig,!1);this.currentShape=e,Pen.drawEllipse(e,this.previewContext)}})),this.executeAction=()=>{this.drawLayer.addEventListener("mousemove",__classPrivateFieldGet(this,_EllipseTool_onMove,"f")),this.drawLayer.addEventListener("mousedown",__classPrivateFieldGet(this,_EllipseTool_onDown,"f")),this.drawLayer.addEventListener("mouseup",__classPrivateFieldGet(this,_EllipseTool_onUp,"f")),window.addEventListener("keydown",__classPrivateFieldGet(this,_EllipseTool_onKeyDown,"f")),window.addEventListener("keyup",__classPrivateFieldGet(this,_EllipseTool_onKeyUp,"f"))},this.destroy=()=>{this.drawLayer.removeEventListener("mousemove",__classPrivateFieldGet(this,_EllipseTool_onMove,"f")),this.drawLayer.removeEventListener("mousedown",__classPrivateFieldGet(this,_EllipseTool_onDown,"f")),this.drawLayer.removeEventListener("mouseup",__classPrivateFieldGet(this,_EllipseTool_onUp,"f")),window.removeEventListener("keydown",__classPrivateFieldGet(this,_EllipseTool_onKeyDown,"f")),window.removeEventListener("keyup",__classPrivateFieldGet(this,_EllipseTool_onKeyUp,"f"))},this.resetPreview();const n=this.drawLayer.getContext("2d");n&&(this.drawContext=n),this.toolName=Tools_List.ELLIPSE}}_EllipseTool_draw=new WeakMap,_EllipseTool_onKeyDown=new WeakMap,_EllipseTool_onKeyUp=new WeakMap,_EllipseTool_onDown=new WeakMap,_EllipseTool_onUp=new WeakMap,_EllipseTool_onMove=new WeakMap;class ImportTool extends Tool{constructor(e,t,i,s){super(e,t,i,s),this.drawSvg=e=>{if(e.firstChild){const t=document.createElementNS("http://www.w3.org/2000/svg","svg"),i="#imported-svg#";t.setAttribute("id",i),t.appendChild(e.firstChild);const s=document.body.appendChild(t),o=convertSVGDocumentToShapes(i);this.onUpdateEditor(o),document.body.removeChild(s)}},this.destroy=()=>this.allShapes}}class LineTool extends Tool{constructor(e,t,i,s,o,a){super(e,i,s,a,t,o),_LineTool_draw.set(this,(()=>{this.currentShape&&Pen.drawLine(this.currentShape,this.drawContext)})),_LineTool_onDown.set(this,(e=>{0===e.button&&(this.isDrawing=!0,this.highlightPreview(),this.previousCoordinates=this.getCoords(e))})),_LineTool_onUp.set(this,(e=>{this.isDrawing=!1,this.currentCoordinates=this.getCoords(e),this.currentShape=new Line([this.previousCoordinates[0],this.previousCoordinates[1]],[this.currentCoordinates[0],this.currentCoordinates[1]],this.drawPenConfig),this.resetPreview(),this.unHighlightpreview(),__classPrivateFieldGet(this,_LineTool_draw,"f").call(this),this.onUpdateEditor(this.currentShape)})),_LineTool_onMove.set(this,(e=>{this.isDrawing&&this.previewLayer&&(this.resetPreview(),this.currentCoordinates=this.getCoords(e),this.currentShape=new Line(this.previousCoordinates,this.currentCoordinates,this.previewPenConfig,!1),Pen.drawLine(this.currentShape,this.previewContext))})),this.executeAction=()=>{this.drawLayer.addEventListener("mousemove",__classPrivateFieldGet(this,_LineTool_onMove,"f")),this.drawLayer.addEventListener("mousedown",__classPrivateFieldGet(this,_LineTool_onDown,"f")),this.drawLayer.addEventListener("mouseup",__classPrivateFieldGet(this,_LineTool_onUp,"f"))},this.destroy=()=>{this.drawLayer.removeEventListener("mousemove",__classPrivateFieldGet(this,_LineTool_onMove,"f")),this.drawLayer.removeEventListener("mousedown",__classPrivateFieldGet(this,_LineTool_onDown,"f")),this.drawLayer.removeEventListener("mouseup",__classPrivateFieldGet(this,_LineTool_onUp,"f"))},this.resetPreview();const n=this.drawLayer.getContext("2d");n&&(this.drawContext=n),this.toolName=Tools_List.LINE}}_LineTool_draw=new WeakMap,_LineTool_onDown=new WeakMap,_LineTool_onUp=new WeakMap,_LineTool_onMove=new WeakMap;const paramFieldStateHandler=e=>({setAreFieldsEnabled:(t,i=!0)=>{t.forEach((t=>{var s,o,a,n;const r=[SVGParamFieldID.STROKE_OPACITY,SVGParamFieldID.FILL_OPACITY].includes(t),l=null===(o=null===(s=null==e?void 0:e.shadowRoot)||void 0===s?void 0:s.getElementById("footer-input"))||void 0===o?void 0:o.querySelector("#"+t);i?(null==l||l.removeAttribute("disabled"),r&&(null===(a=null==l?void 0:l.previousElementSibling)||void 0===a||a.removeAttribute("disabled"))):(null==l||l.setAttribute("disabled",""),r&&(null===(n=null==l?void 0:l.previousElementSibling)||void 0===n||n.setAttribute("disabled","")))}))}}),setTextParamsSourceVisibility=(e,t)=>{var i;const s=null===(i=null==e?void 0:e.shadowRoot)||void 0===i?void 0:i.getElementById("right-input-section");s&&(s.style.visibility=t?"visible":"hidden",t?s.removeAttribute("disabled"):s.setAttribute("disabled",""))};var _MoveTool_dCenter,_MoveTool_drawOnPreview,_MoveTool_onDown,_MoveTool_onMove,_MoveTool_onUp,_SelectTool_drawOnPreview,_SelectTool_onClick,_SelectTool_onDown,_SelectTool_onZoneSelection,_SelectTool_onUp,_SelectTool_onMove,_TextTool_onClick,_Editor_selectedTool,_Editor_drawLayer,_Editor_previewLayer,_Editor_connection,_Editor_self,_Editor_offset,_Editor_shapes,_Editor_currentParams,_Editor_isShapeOnlyBeingSelected,_Editor_setAreFieldsEnabled,_Editor_selectedShape,_Editor_drawContext,_Editor_previewContext,_Editor_createShape,_Editor_handleUpdateShapes,_Editor_onHandleSelectShape,_Editor_onMoveShape,_Editor_openDownloadDialog,_Editor_deleteShapeById;class MoveTool extends Tool{constructor(e,t,i,s,o,a){super(e,i,s,o,t),_MoveTool_dCenter.set(this,void 0),_MoveTool_drawOnPreview.set(this,void 0),_MoveTool_onDown.set(this,(e=>{var t,i;if(0!==e.button)return;this.previousCoordinates=this.currentCoordinates,this.currentCoordinates=this.getCoords(e);const s=null!==(i=null===(t=this.currentShape)||void 0===t?void 0:t.getCenter())&&void 0!==i?i:[0,0];__classPrivateFieldSet(this,_MoveTool_dCenter,[this.currentCoordinates[0]-s[0],this.currentCoordinates[1]-s[1]],"f"),this.currentShape&&isPointInsideAnotherShape(this.currentCoordinates)(this.currentShape)?this.isDrawing=!0:this.isDrawing=!1})),this.updatePreview=()=>{if(this.currentShape){this.resetPreview();const{startingCorner:e,width:t,height:i}=rectangleParamsFromBoundaries(this.currentShape.boundaries);isText(this.currentShape)?(setTextParamsSourceVisibility(this.self,!0),__classPrivateFieldGet(this,_MoveTool_drawOnPreview,"f").call(this,this.currentShape,Object.assign(Object.assign(Object.assign({},this.currentShape.getSvgParams()),highlightStyle),{lineDash:[0]}))):(__classPrivateFieldGet(this,_MoveTool_drawOnPreview,"f").call(this,this.currentShape,highlightStyle),__classPrivateFieldGet(this,_MoveTool_drawOnPreview,"f").call(this,new Rectangle(e,t,i,highlightStyle)))}else this.resetPreview()},_MoveTool_onMove.set(this,(e=>{var t,i,s,o,a;this.isDrawing&&(this.previousCoordinates=this.currentCoordinates,this.currentCoordinates=this.getCoords(e),null===(t=this.currentShape)||void 0===t||t.moveTo([this.currentCoordinates[0]-(null!==(s=null===(i=__classPrivateFieldGet(this,_MoveTool_dCenter,"f"))||void 0===i?void 0:i[0])&&void 0!==s?s:0),this.currentCoordinates[1]-(null!==(a=null===(o=__classPrivateFieldGet(this,_MoveTool_dCenter,"f"))||void 0===o?void 0:o[1])&&void 0!==a?a:0)]),this.updatePreview())})),_MoveTool_onUp.set(this,(()=>{this.isDrawing=!1,this.currentShape&&(this.onUpdateEditor(this.currentShape),this.updatePreview())})),this.changeStyle=e=>{this.currentShape&&(this.currentShape.updateSVGParams(e),this.resetPreview(),this.updatePreview())},this.executeAction=()=>{this.drawLayer.addEventListener("mousedown",__classPrivateFieldGet(this,_MoveTool_onDown,"f")),this.drawLayer.addEventListener("mousemove",__classPrivateFieldGet(this,_MoveTool_onMove,"f")),this.drawLayer.addEventListener("mouseup",__classPrivateFieldGet(this,_MoveTool_onUp,"f"))},this.destroy=()=>{this.drawLayer.removeEventListener("mousedown",__classPrivateFieldGet(this,_MoveTool_onDown,"f")),this.drawLayer.removeEventListener("mousemove",__classPrivateFieldGet(this,_MoveTool_onMove,"f")),this.drawLayer.removeEventListener("mouseup",__classPrivateFieldGet(this,_MoveTool_onUp,"f"))};const n=this.drawLayer.getContext("2d");n&&(this.drawContext=n),this.currentShape=a,__classPrivateFieldSet(this,_MoveTool_drawOnPreview,Pen.generatePen(this.previewContext).draw,"f"),this.updatePreview(),this.toolName=Tools_List.MOVE}}_MoveTool_dCenter=new WeakMap,_MoveTool_drawOnPreview=new WeakMap,_MoveTool_onDown=new WeakMap,_MoveTool_onMove=new WeakMap,_MoveTool_onUp=new WeakMap;class RectangleTool extends Tool{constructor(e,t,i,s,o,a){super(e,i,s,a,t,o),this.executeAction=()=>{this.drawLayer.addEventListener("mousemove",this.onMove),this.drawLayer.addEventListener("mousedown",this.onDown),this.drawLayer.addEventListener("mouseup",this.onUp)},this.destroy=()=>{this.drawLayer.removeEventListener("mousemove",this.onMove),this.drawLayer.removeEventListener("mousedown",this.onDown),this.drawLayer.removeEventListener("mouseup",this.onUp)},this.onDown=e=>{0===e.button&&(this.highlightPreview(),this.currentCoordinates=this.getCoords(e),this.previousCoordinates=this.currentCoordinates,this.isDrawing=!0)},this.onUp=()=>{this.resetPreview(),this.resetView(),this.isDrawing=!1,this.currentShape&&(this.createRectangle(),this.onUpdateEditor(this.currentShape)),this.resetCoordinates()},this.createRectangle=()=>{const{startingCorner:e,width:t,height:i}=getFormattedRectangleValuesFromPoints(this.previousCoordinates,this.currentCoordinates);this.currentShape=new Rectangle(e,t,i,this.drawPenConfig)},this.createRectanglePreview=()=>{const{startingCorner:e,width:t,height:i}=getCanvasRectangleValuesFromPoints(this.previousCoordinates,this.currentCoordinates);this.currentShape=new Rectangle(e,t,i,this.previewPenConfig,!1)},this.onMove=e=>{this.isDrawing&&(this.currentCoordinates=this.getCoords(e),this.createRectanglePreview(),this.currentShape&&(this.resetPreview(),Pen.drawRectangle(this.currentShape,this.previewContext,this.previewPenConfig)))},this.resetPreview();const n=this.drawLayer.getContext("2d");n&&(this.drawContext=n),this.toolName=Tools_List.RECT}}class SelectTool extends Tool{constructor(e,t,i,s,o,a){super(e,i,s,a,t),_SelectTool_drawOnPreview.set(this,void 0),this.updateAllShapes=(e=[])=>{this.allShapes=e},_SelectTool_onClick.set(this,(e=>{this.currentCoordinates=this.getCoords(e);const t=isPointInsideAnotherShape(this.currentCoordinates),i=this.allShapes.filter((e=>t(e)&&!e.isLocked));if(!i.length)return this.currentShape=void 0,void this.updatePreview();const s=null==i?void 0:i.reduce(((e,t)=>t.index>(null==e?void 0:e.index)?e:t));this.currentShape=s,this.updatePreview()})),_SelectTool_onDown.set(this,(e=>{0===e.button&&(this.unHighlightpreview(),this.currentShape=void 0,this.currentCoordinates=this.getCoords(e),this.previousCoordinates=this.currentCoordinates,this.isDrawing=!0)})),this.updatePreview=()=>{if(this.currentShape){this.resetPreview();const{startingCorner:e,width:t,height:i}=rectangleParamsFromBoundaries(this.currentShape.boundaries);isText(this.currentShape)?(setTextParamsSourceVisibility(this.self,!0),__classPrivateFieldGet(this,_SelectTool_drawOnPreview,"f").call(this,this.currentShape,Object.assign(Object.assign(Object.assign({},this.currentShape.getSvgParams()),highlightStyle),{lineDash:[0]}))):(__classPrivateFieldGet(this,_SelectTool_drawOnPreview,"f").call(this,this.currentShape,highlightStyle),__classPrivateFieldGet(this,_SelectTool_drawOnPreview,"f").call(this,new Rectangle(e,t,i,highlightStyle,!1)))}else this.resetPreview()},_SelectTool_onZoneSelection.set(this,(e=>{const t=isShapeInsideAnotherShape(e),i=this.allShapes.filter((e=>!e.isLocked)).filter(t),s=Math.max(...i.map((e=>e.index))),o=i.find((e=>e.index===s));o&&typeOfShape(o)&&this.previewContext?(this.currentShape=o,this.updatePreview()):this.currentShape=void 0})),_SelectTool_onUp.set(this,(e=>{var t;this.resetPreview(),this.isDrawing=!1,this.currentShape?__classPrivateFieldGet(this,_SelectTool_onZoneSelection,"f").call(this,this.currentShape):__classPrivateFieldGet(this,_SelectTool_onClick,"f").call(this,e),this.onUpdateEditor(null!==(t=this.currentShape)&&void 0!==t?t:null)})),_SelectTool_onMove.set(this,(e=>{if(this.isDrawing&&this.previewLayer){this.currentCoordinates=this.getCoords(e);const{startingCorner:t,width:i,height:s}=getCanvasRectangleValuesFromPoints(this.previousCoordinates,this.currentCoordinates);this.currentShape=new Rectangle(t,i,s,highlightStyle,!1),this.currentShape&&(this.resetPreview(),Pen.drawRectangle(this.currentShape,this.previewContext))}})),this.changeStyle=e=>{this.currentShape&&(this.currentShape.updateSVGParams(e),this.resetPreview(),this.updatePreview())},this.executeAction=()=>{this.drawLayer.addEventListener("mousemove",__classPrivateFieldGet(this,_SelectTool_onMove,"f")),this.drawLayer.addEventListener("mousedown",__classPrivateFieldGet(this,_SelectTool_onDown,"f")),this.drawLayer.addEventListener("mouseup",__classPrivateFieldGet(this,_SelectTool_onUp,"f"))},this.destroy=()=>{this.drawLayer.removeEventListener("mousemove",__classPrivateFieldGet(this,_SelectTool_onMove,"f")),this.drawLayer.removeEventListener("mousedown",__classPrivateFieldGet(this,_SelectTool_onDown,"f")),this.drawLayer.removeEventListener("mouseup",__classPrivateFieldGet(this,_SelectTool_onUp,"f"))},this.allShapes=o,this.previewContext&&this.previewContext.setLineDash([10,10]),__classPrivateFieldSet(this,_SelectTool_drawOnPreview,Pen.generatePen(this.previewContext).draw,"f"),this.toolName=Tools_List.SELECT}}_SelectTool_drawOnPreview=new WeakMap,_SelectTool_onClick=new WeakMap,_SelectTool_onDown=new WeakMap,_SelectTool_onZoneSelection=new WeakMap,_SelectTool_onUp=new WeakMap,_SelectTool_onMove=new WeakMap;class TextTool extends Tool{constructor(e,t,i,s,o,a){super(e,i,s,a,t,o),_TextTool_onClick.set(this,(e=>{var t;if(0!==e.button)return;const i=this.getCoords(e);if(this.previewContext&&(null===(t=this.drawPenConfig)||void 0===t?void 0:t.text)){const e=measureText(this.drawPenConfig.text,{fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",fontSize:this.drawPenConfig.fontSize,fontFamily:this.drawPenConfig.fontFamily},void 0,this.drawContext);if(this.resetPreview(),e){const t=new TextShape(e.width,e.height,i,Object.assign({fontFamily:this.drawPenConfig.fontFamily,fontSize:this.drawPenConfig.fontSize,text:this.drawPenConfig.text},this.drawPenConfig));this.onUpdateEditor(t)}}})),this.updateText=e=>{this.drawPenConfig.text=e},this.executeAction=()=>{this.drawLayer.addEventListener("click",__classPrivateFieldGet(this,_TextTool_onClick,"f"))},this.destroy=()=>{setTextParamsSourceVisibility(this.self,!1),this.drawLayer.removeEventListener("click",__classPrivateFieldGet(this,_TextTool_onClick,"f"))},setTextParamsSourceVisibility(i,!0),this.drawPenConfig.text||(this.drawPenConfig.text="Input text..."),this.toolName=Tools_List.TEXT}}_TextTool_onClick=new WeakMap;class Editor{constructor(e,t,i,s){var o,a,n;_Editor_selectedTool.set(this,null),_Editor_drawLayer.set(this,null),_Editor_previewLayer.set(this,null),_Editor_connection.set(this,void 0),_Editor_self.set(this,void 0),_Editor_offset.set(this,void 0),_Editor_shapes.set(this,[]),_Editor_currentParams.set(this,{strokeWidth:"1",stroke:"rgba(0,0,0,1)",fill:"rgba(0,0,0,0)",lineDash:[0],text:"Input text..."}),_Editor_isShapeOnlyBeingSelected.set(this,!1),_Editor_setAreFieldsEnabled.set(this,void 0),_Editor_selectedShape.set(this,null),_Editor_drawContext.set(this,void 0),_Editor_previewContext.set(this,void 0),this.getSVGParams=()=>Object.assign({},__classPrivateFieldGet(this,_Editor_currentParams,"f")),_Editor_createShape.set(this,(e=>{switch(e.type){case"Ellipse":{const{id:t,center:i,radiusX:s,radiusY:o,isLocked:a,svgParams:n}=e;return new Ellipse(i,s,o,n,!0,a).replaceID(t)}case"Rectangle":const{width:t,height:i,id:s,startingCorner:o,isLocked:a,svgParams:n}=e;return new Rectangle(o,t,i,n,!0,a).replaceID(s);case"TextShape":{const{id:t,width:i,height:s,position:o,svgParams:a,isLocked:n}=e;return new TextShape(i,s,o,a,!0,n).replaceID(t)}case"Freehand":{const{id:t,isLocked:i,svgParams:s,points:o}=e;return new Freehand(o,s,!0,i).replaceID(t)}case"Line":{const{id:t,isLocked:i,startPoint:s,endPoint:o,svgParams:a}=e;return new Line(s,o,a,!0,i).replaceID(t)}}})),this.updateShapes=e=>{var t;e.length?(e.forEach((e=>{let t;if(t=isShapeType(e)?e:__classPrivateFieldGet(this,_Editor_createShape,"f").call(this,e),!t)return;const i=__classPrivateFieldGet(this,_Editor_shapes,"f").findIndex((e=>e.getId()===(null==t?void 0:t.getId())));i>=0?__classPrivateFieldGet(this,_Editor_shapes,"f")[i]=t:__classPrivateFieldGet(this,_Editor_shapes,"f").push(t),__classPrivateFieldSet(this,_Editor_currentParams,t.getSvgParams(),"f")})),(null===(t=__classPrivateFieldGet(this,_Editor_selectedTool,"f"))||void 0===t?void 0:t.toolName)===Tools_List.SELECT&&__classPrivateFieldGet(this,_Editor_selectedTool,"f").updateAllShapes(__classPrivateFieldGet(this,_Editor_shapes,"f"))):(__classPrivateFieldSet(this,_Editor_shapes,[],"f"),__classPrivateFieldSet(this,_Editor_selectedShape,null,"f")),this.redrawShapes()},this.resetEditor=()=>{__classPrivateFieldGet(this,_Editor_drawLayer,"f")&&Pen.clearCanvas(__classPrivateFieldGet(this,_Editor_drawLayer,"f")),__classPrivateFieldGet(this,_Editor_previewLayer,"f")&&Pen.clearCanvas(__classPrivateFieldGet(this,_Editor_previewLayer,"f"))},_Editor_handleUpdateShapes.set(this,(e=>{var t;if(void 0===e)return;if(null===e)return void this.onUnselectTool();const i=Array.isArray(e)?e:[e];this.updateShapes(i),null===(t=__classPrivateFieldGet(this,_Editor_connection,"f"))||void 0===t||t.updateShapes(e)})),_Editor_onHandleSelectShape.set(this,(e=>{var t,i,s;if(setIsButtonDisabled(__classPrivateFieldGet(this,_Editor_self,"f"),Tools_List.MOVE,!e),__classPrivateFieldSet(this,_Editor_isShapeOnlyBeingSelected,!0,"f"),!e&&__classPrivateFieldGet(this,_Editor_selectedShape,"f")){null===(t=__classPrivateFieldGet(this,_Editor_connection,"f"))||void 0===t||t.unlockShapes(__classPrivateFieldGet(this,_Editor_selectedShape,"f"));const e=__classPrivateFieldGet(this,_Editor_selectedShape,"f");__classPrivateFieldGet(this,_Editor_connection,"f")&&(__classPrivateFieldGet(this,_Editor_connection,"f").ws.onclose=()=>{var t;return null===(t=__classPrivateFieldGet(this,_Editor_connection,"f"))||void 0===t?void 0:t.unlockShapes(e)}),__classPrivateFieldSet(this,_Editor_selectedShape,null,"f")}else{const t=Array.isArray(e)?e[0]:e;t&&(null===(i=__classPrivateFieldGet(this,_Editor_connection,"f"))||void 0===i||i.lockShapes(t)),__classPrivateFieldSet(this,_Editor_selectedShape,t,"f"),__classPrivateFieldGet(this,_Editor_selectedShape,"f")&&(__classPrivateFieldSet(this,_Editor_currentParams,__classPrivateFieldGet(this,_Editor_selectedShape,"f").getSvgParams(),"f"),this.onUpdateStyleInputFields(),isText(__classPrivateFieldGet(this,_Editor_selectedShape,"f"))&&setTextParamsSourceVisibility(__classPrivateFieldGet(this,_Editor_self,"f"),!0)),__classPrivateFieldSet(this,_Editor_isShapeOnlyBeingSelected,!1,"f")}e&&(setIsButtonActive(__classPrivateFieldGet(this,_Editor_self,"f"),Tools_List.SELECT,!1),null===(s=__classPrivateFieldGet(this,_Editor_selectedTool,"f"))||void 0===s||s.destroy(),__classPrivateFieldSet(this,_Editor_selectedTool,null,"f"))})),_Editor_onMoveShape.set(this,(e=>{var t;if(null===e)return void this.onUnselectTool();const i=Array.isArray(e)?e[0]:e,s=__classPrivateFieldGet(this,_Editor_shapes,"f").findIndex((e=>e.getId()===i.getId()));s>=0?__classPrivateFieldGet(this,_Editor_shapes,"f")[s]=i:__classPrivateFieldGet(this,_Editor_shapes,"f").push(i),this.redrawShapes(),null===(t=__classPrivateFieldGet(this,_Editor_connection,"f"))||void 0===t||t.updateShapes(e)})),_Editor_openDownloadDialog.set(this,(e=>{const t=document.createElement("a");t.download="svg-element.svg",t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)})),this.resetPreview=()=>{var e;const t=null===(e=__classPrivateFieldGet(this,_Editor_previewLayer,"f"))||void 0===e?void 0:e.getContext("2d");__classPrivateFieldGet(this,_Editor_previewLayer,"f")&&t&&Pen.clearCanvas(__classPrivateFieldGet(this,_Editor_previewLayer,"f"),t)},this.redrawShapes=()=>{__classPrivateFieldGet(this,_Editor_drawContext,"f")&&__classPrivateFieldGet(this,_Editor_drawLayer,"f")&&__classPrivateFieldGet(this,_Editor_previewLayer,"f")&&__classPrivateFieldGet(this,_Editor_previewContext,"f")&&(Pen.clearCanvas(__classPrivateFieldGet(this,_Editor_drawLayer,"f"),__classPrivateFieldGet(this,_Editor_drawContext,"f")),Pen.clearCanvas(__classPrivateFieldGet(this,_Editor_previewLayer,"f"),__classPrivateFieldGet(this,_Editor_previewContext,"f")),__classPrivateFieldGet(this,_Editor_selectedShape,"f")&&("TextShape"===typeOfShape(__classPrivateFieldGet(this,_Editor_selectedShape,"f"))?Pen.draw(__classPrivateFieldGet(this,_Editor_selectedShape,"f"),Object.assign(Object.assign(Object.assign(Object.assign({},__classPrivateFieldGet(this,_Editor_selectedShape,"f").getSvgParams()),__classPrivateFieldGet(this,_Editor_currentParams,"f")),highlightStyle),{lineDash:[0]}),__classPrivateFieldGet(this,_Editor_previewContext,"f")):Pen.draw(__classPrivateFieldGet(this,_Editor_selectedShape,"f"),Object.assign(Object.assign(Object.assign({},__classPrivateFieldGet(this,_Editor_selectedShape,"f").getSvgParams()),__classPrivateFieldGet(this,_Editor_currentParams,"f")),highlightStyle),__classPrivateFieldGet(this,_Editor_previewContext,"f"))),__classPrivateFieldGet(this,_Editor_shapes,"f").forEach((e=>{Pen.draw(e,void 0,__classPrivateFieldGet(this,_Editor_drawContext,"f"))})))},this.onUpdateStyleInputFields=()=>{var e,t;updateStyleInputFields(__classPrivateFieldGet(this,_Editor_self,"f"),null!==(t=null===(e=__classPrivateFieldGet(this,_Editor_selectedShape,"f"))||void 0===e?void 0:e.getSvgParams())&&void 0!==t?t:__classPrivateFieldGet(this,_Editor_currentParams,"f"))},this.onSave=()=>{this.onUnselectTool(),__classPrivateFieldGet(this,_Editor_openDownloadDialog,"f").call(this,generateSVGURLFromShapes(__classPrivateFieldGet(this,_Editor_shapes,"f")))},this.importSVG=e=>{if(__classPrivateFieldGet(this,_Editor_drawLayer,"f")){const t=new ImportTool(__classPrivateFieldGet(this,_Editor_drawLayer,"f"),__classPrivateFieldGet(this,_Editor_self,"f"),__classPrivateFieldGet(this,_Editor_handleUpdateShapes,"f"),__classPrivateFieldGet(this,_Editor_offset,"f"));t.drawSvg(e),t.destroy()}},this.getAllShapes=()=>__classPrivateFieldGet(this,_Editor_shapes,"f"),_Editor_deleteShapeById.set(this,(e=>{var t;const i=__classPrivateFieldGet(this,_Editor_shapes,"f").findIndex((t=>t.getId()===e));__classPrivateFieldGet(this,_Editor_shapes,"f").splice(i,1),null===(t=__classPrivateFieldGet(this,_Editor_connection,"f"))||void 0===t||t.deleteShapes([e])})),this.deleteFromShapes=e=>{Array.isArray(e)?e.forEach(__classPrivateFieldGet(this,_Editor_deleteShapeById,"f")):__classPrivateFieldGet(this,_Editor_deleteShapeById,"f").call(this,e)},this.onDeleteSelectedShape=()=>{__classPrivateFieldGet(this,_Editor_selectedShape,"f")&&(this.deleteFromShapes(__classPrivateFieldGet(this,_Editor_selectedShape,"f").getId()),__classPrivateFieldSet(this,_Editor_selectedShape,null,"f"))},this.onSelectTool=e=>{var t,i,s,o,a,n;if((null===(t=__classPrivateFieldGet(this,_Editor_selectedTool,"f"))||void 0===t?void 0:t.toolName)&&setIsButtonActive(__classPrivateFieldGet(this,_Editor_self,"f"),null===(i=__classPrivateFieldGet(this,_Editor_selectedTool,"f"))||void 0===i?void 0:i.toolName,!1),e&&(__classPrivateFieldGet(this,_Editor_selectedShape,"f")&&e!==Tools_List.SELECT?(null===(s=__classPrivateFieldGet(this,_Editor_selectedTool,"f"))||void 0===s||s.destroy(),this.onUpdateStyleInputFields()):this.onUnselectTool()),__classPrivateFieldGet(this,_Editor_drawLayer,"f")&&__classPrivateFieldGet(this,_Editor_previewLayer,"f")){switch(__classPrivateFieldGet(this,_Editor_setAreFieldsEnabled,"f").call(this,Object.values(SVGParamFieldID),!0),e){case Tools_List.DRAW:{const e=[SVGParamFieldID.FILL_COLOR,SVGParamFieldID.FILL_OPACITY];__classPrivateFieldGet(this,_Editor_setAreFieldsEnabled,"f").call(this,e,!1),__classPrivateFieldSet(this,_Editor_selectedTool,new DrawTool(__classPrivateFieldGet(this,_Editor_drawLayer,"f"),__classPrivateFieldGet(this,_Editor_previewLayer,"f"),__classPrivateFieldGet(this,_Editor_self,"f"),__classPrivateFieldGet(this,_Editor_handleUpdateShapes,"f"),__classPrivateFieldGet(this,_Editor_currentParams,"f"),__classPrivateFieldGet(this,_Editor_offset,"f")),"f");break}case Tools_List.LINE:{const e=[SVGParamFieldID.FILL_COLOR,SVGParamFieldID.FILL_OPACITY];__classPrivateFieldGet(this,_Editor_setAreFieldsEnabled,"f").call(this,e,!1),__classPrivateFieldSet(this,_Editor_selectedTool,new LineTool(__classPrivateFieldGet(this,_Editor_drawLayer,"f"),__classPrivateFieldGet(this,_Editor_previewLayer,"f"),__classPrivateFieldGet(this,_Editor_self,"f"),__classPrivateFieldGet(this,_Editor_handleUpdateShapes,"f"),__classPrivateFieldGet(this,_Editor_currentParams,"f"),__classPrivateFieldGet(this,_Editor_offset,"f")),"f");break}case Tools_List.RECT:__classPrivateFieldSet(this,_Editor_selectedTool,new RectangleTool(__classPrivateFieldGet(this,_Editor_drawLayer,"f"),__classPrivateFieldGet(this,_Editor_previewLayer,"f"),__classPrivateFieldGet(this,_Editor_self,"f"),__classPrivateFieldGet(this,_Editor_handleUpdateShapes,"f"),__classPrivateFieldGet(this,_Editor_currentParams,"f"),__classPrivateFieldGet(this,_Editor_offset,"f")),"f");break;case Tools_List.ELLIPSE:__classPrivateFieldSet(this,_Editor_selectedTool,new EllipseTool(__classPrivateFieldGet(this,_Editor_drawLayer,"f"),__classPrivateFieldGet(this,_Editor_previewLayer,"f"),__classPrivateFieldGet(this,_Editor_self,"f"),__classPrivateFieldGet(this,_Editor_handleUpdateShapes,"f"),__classPrivateFieldGet(this,_Editor_currentParams,"f"),__classPrivateFieldGet(this,_Editor_offset,"f")),"f");break;case Tools_List.SELECT:__classPrivateFieldSet(this,_Editor_selectedTool,new SelectTool(__classPrivateFieldGet(this,_Editor_drawLayer,"f"),__classPrivateFieldGet(this,_Editor_previewLayer,"f"),__classPrivateFieldGet(this,_Editor_self,"f"),__classPrivateFieldGet(this,_Editor_onHandleSelectShape,"f"),__classPrivateFieldGet(this,_Editor_shapes,"f"),__classPrivateFieldGet(this,_Editor_offset,"f")),"f");break;case Tools_List.TEXT:__classPrivateFieldSet(this,_Editor_selectedTool,new TextTool(__classPrivateFieldGet(this,_Editor_drawLayer,"f"),__classPrivateFieldGet(this,_Editor_previewLayer,"f"),__classPrivateFieldGet(this,_Editor_self,"f"),__classPrivateFieldGet(this,_Editor_handleUpdateShapes,"f"),__classPrivateFieldGet(this,_Editor_currentParams,"f")),"f");break;case Tools_List.MOVE:if(!__classPrivateFieldGet(this,_Editor_selectedShape,"f"))return;__classPrivateFieldSet(this,_Editor_selectedTool,new MoveTool(__classPrivateFieldGet(this,_Editor_drawLayer,"f"),__classPrivateFieldGet(this,_Editor_previewLayer,"f"),__classPrivateFieldGet(this,_Editor_self,"f"),__classPrivateFieldGet(this,_Editor_onMoveShape,"f"),__classPrivateFieldGet(this,_Editor_offset,"f"),__classPrivateFieldGet(this,_Editor_selectedShape,"f")),"f");break;case Tools_List.DELETE:this.onDeleteSelectedShape(),this.onUnselectTool(),__classPrivateFieldSet(this,_Editor_selectedTool,null,"f");break;case null:(null===(o=__classPrivateFieldGet(this,_Editor_selectedTool,"f"))||void 0===o?void 0:o.toolName)&&setIsButtonActive(__classPrivateFieldGet(this,_Editor_self,"f"),__classPrivateFieldGet(this,_Editor_selectedTool,"f").toolName,!1),this.onUnselectTool(),__classPrivateFieldSet(this,_Editor_selectedTool,null,"f")}e&&setIsButtonActive(__classPrivateFieldGet(this,_Editor_self,"f"),e,!0),isMoveTool(__classPrivateFieldGet(this,_Editor_selectedTool,"f"))||(__classPrivateFieldSet(this,_Editor_selectedShape,null,"f"),this.applyStyles()),null===(a=__classPrivateFieldGet(this,_Editor_self,"f").shadowRoot)||void 0===a||a.getElementById(""),null===(n=__classPrivateFieldGet(this,_Editor_selectedTool,"f"))||void 0===n||n.executeAction()}},this.applyStyles=()=>{var e;__classPrivateFieldGet(this,_Editor_selectedShape,"f")&&__classPrivateFieldGet(this,_Editor_drawLayer,"f")&&(this.redrawShapes(),null===(e=__classPrivateFieldGet(this,_Editor_connection,"f"))||void 0===e||e.updateShapes(__classPrivateFieldGet(this,_Editor_shapes,"f")))},this.setShapeParam=(e,t)=>{var i;__classPrivateFieldGet(this,_Editor_currentParams,"f")[e]=t,null===(i=__classPrivateFieldGet(this,_Editor_selectedShape,"f"))||void 0===i||i.updateSVGParam(e,t);const s=__classPrivateFieldGet(this,_Editor_shapes,"f").findIndex((e=>{var t;return(null===(t=__classPrivateFieldGet(this,_Editor_selectedShape,"f"))||void 0===t?void 0:t.getId())===e.getId()}));void 0!==s&&__classPrivateFieldGet(this,_Editor_shapes,"f")&&__classPrivateFieldGet(this,_Editor_selectedShape,"f")&&(__classPrivateFieldGet(this,_Editor_shapes,"f")[s]=__classPrivateFieldGet(this,_Editor_selectedShape,"f")),this.applyStyles()},this.setShapeParams=(e=!1,t,i="rgba(0,0,0,1)",s="rgba(0,0,0,0)",o="butt",a=[],n="Arial",r=12,l)=>{var d;e&&__classPrivateFieldGet(this,_Editor_isShapeOnlyBeingSelected,"f")||(__classPrivateFieldSet(this,_Editor_currentParams,{fill:s,stroke:i,strokeWidth:t,lineCap:o,lineDash:a,fontFamily:n,fontSize:r,text:l},"f"),null===(d=__classPrivateFieldGet(this,_Editor_selectedTool,"f"))||void 0===d||d.setSVGParams(__classPrivateFieldGet(this,_Editor_currentParams,"f")))},this.setConnection=e=>{__classPrivateFieldSet(this,_Editor_connection,e,"f")},this.onUnselectTool=()=>{var e,t;__classPrivateFieldGet(this,_Editor_selectedShape,"f")&&(null===(e=__classPrivateFieldGet(this,_Editor_connection,"f"))||void 0===e||e.unlockShapes(__classPrivateFieldGet(this,_Editor_selectedShape,"f"))),setIsButtonDisabled(__classPrivateFieldGet(this,_Editor_self,"f"),Tools_List.MOVE,!0),__classPrivateFieldSet(this,_Editor_selectedShape,null,"f"),null===(t=__classPrivateFieldGet(this,_Editor_selectedTool,"f"))||void 0===t||t.destroy(),__classPrivateFieldGet(this,_Editor_setAreFieldsEnabled,"f").call(this,Object.values(SVGParamFieldID),!1),setTextParamsSourceVisibility(__classPrivateFieldGet(this,_Editor_self,"f"),!1),this.resetPreview(),this.redrawShapes()},__classPrivateFieldSet(this,_Editor_drawLayer,e,"f"),__classPrivateFieldSet(this,_Editor_previewLayer,t,"f"),__classPrivateFieldSet(this,_Editor_self,s,"f"),__classPrivateFieldSet(this,_Editor_offset,i,"f"),__classPrivateFieldSet(this,_Editor_currentParams,{text:"Input text...",strokeWidth:"1",stroke:"rgba(0,0,0,1)",fill:"rgba(0,0,0,0)"},"f"),__classPrivateFieldSet(this,_Editor_drawContext,null===(o=__classPrivateFieldGet(this,_Editor_drawLayer,"f"))||void 0===o?void 0:o.getContext("2d"),"f"),__classPrivateFieldSet(this,_Editor_previewContext,null===(a=__classPrivateFieldGet(this,_Editor_previewLayer,"f"))||void 0===a?void 0:a.getContext("2d"),"f"),__classPrivateFieldSet(this,_Editor_setAreFieldsEnabled,(n=__classPrivateFieldGet(this,_Editor_self,"f"),{setAreFieldsEnabled:(e,t=!0)=>{e.forEach((e=>{var i,s,o,a;const r=[SVGParamFieldID.STROKE_OPACITY,SVGParamFieldID.FILL_OPACITY].includes(e),l=null===(s=null===(i=null==n?void 0:n.shadowRoot)||void 0===i?void 0:i.getElementById("footer-input"))||void 0===s?void 0:s.querySelector("#"+e);t?(null==l||l.removeAttribute("disabled"),r&&(null===(o=null==l?void 0:l.previousElementSibling)||void 0===o||o.removeAttribute("disabled"))):(null==l||l.setAttribute("disabled",""),r&&(null===(a=null==l?void 0:l.previousElementSibling)||void 0===a||a.setAttribute("disabled","")))}))}}).setAreFieldsEnabled,"f"),__classPrivateFieldGet(this,_Editor_setAreFieldsEnabled,"f").call(this,Object.values(SVGParamFieldID),!1),updateStyleInputFields(__classPrivateFieldGet(this,_Editor_self,"f"),__classPrivateFieldGet(this,_Editor_currentParams,"f")),window.addEventListener("resize",(()=>{setTimeout((()=>this.redrawShapes()),50)}))}}_Editor_selectedTool=new WeakMap,_Editor_drawLayer=new WeakMap,_Editor_previewLayer=new WeakMap,_Editor_connection=new WeakMap,_Editor_self=new WeakMap,_Editor_offset=new WeakMap,_Editor_shapes=new WeakMap,_Editor_currentParams=new WeakMap,_Editor_isShapeOnlyBeingSelected=new WeakMap,_Editor_setAreFieldsEnabled=new WeakMap,_Editor_selectedShape=new WeakMap,_Editor_drawContext=new WeakMap,_Editor_previewContext=new WeakMap,_Editor_createShape=new WeakMap,_Editor_handleUpdateShapes=new WeakMap,_Editor_onHandleSelectShape=new WeakMap,_Editor_onMoveShape=new WeakMap,_Editor_openDownloadDialog=new WeakMap,_Editor_deleteShapeById=new WeakMap;const fontCheck=new Set(["Arial","Arial Black","Bahnschrift","Calibri","Cambria","Cambria Math","Candara","Comic Sans MS","Consolas","Constantia","Corbel","Courier New","Ebrima","Franklin Gothic Medium","Gabriola","Gadugi","Georgia","HoloLens MDL2 Assets","Impact","Ink Free","Javanese Text","Leelawadee UI","Lucida Console","Lucida Sans Unicode","Malgun Gothic","Marlett","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Sans Serif","Microsoft Tai Le","Microsoft YaHei","Microsoft Yi Baiti","MingLiU-ExtB","Mongolian Baiti","MS Gothic","MV Boli","Myanmar Text","Nirmala UI","Palatino Linotype","Segoe MDL2 Assets","Segoe Print","Segoe Script","Segoe UI","Segoe UI Historic","Segoe UI Emoji","Segoe UI Symbol","SimSun","Sitka","Sylfaen","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings","Yu Gothic","American Typewriter","Andale Mono","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Avenir","Avenir Next","Avenir Next Condensed","Baskerville","Big Caslon","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bradley Hand","Brush Script MT","Chalkboard","Chalkboard SE","Chalkduster","Charter","Cochin","Comic Sans MS","Copperplate","Courier","Courier New","Didot","DIN Alternate","DIN Condensed","Futura","Geneva","Georgia","Gill Sans","Helvetica","Helvetica Neue","Herculanum","Hoefler Text","Impact","Lucida Grande","Luminari","Marker Felt","Menlo","Microsoft Sans Serif","Monaco","Noteworthy","Optima","Palatino","Papyrus","Phosphate","Rockwell","Savoye LET","SignPainter","Skia","Snell Roundhand","Tahoma","Times","Times New Roman","Trattatello","Trebuchet MS","Verdana","Zapfino"].sort()),getFonts=()=>__awaiter(void 0,void 0,void 0,(function*(){yield document.fonts.ready;const e=new Set;for(const t of fontCheck.values())document.fonts.check(`12px "${t}"`)&&e.add(t);return e}));var _Keeper_ws,_Connection_userId,_Connection_url,_Connection_port,_Connection_roomId,_Connection_keeper,_Connection_chat,_Connection_parseResponse,_Connection_startKeepingConnectionAlive,_Connection_sendShapeWithLock;class Keeper{constructor(e){_Keeper_ws.set(this,void 0),this.destroy=()=>{__classPrivateFieldGet(this,_Keeper_ws,"f").removeEventListener("message",(e=>{"ping"===JSON.parse(e.data).event&&__classPrivateFieldGet(this,_Keeper_ws,"f").send('{"event":"pong"}')}))},__classPrivateFieldSet(this,_Keeper_ws,e,"f"),e.addEventListener("message",(t=>{"ping"===JSON.parse(t.data).event&&e.send('{"event":"pong"}')}))}}_Keeper_ws=new WeakMap;class Connection{constructor(e="",t="user_"+nanoid(5),i,s,o,a,n="localhost",r="8080"){_Connection_userId.set(this,void 0),_Connection_url.set(this,void 0),_Connection_port.set(this,void 0),_Connection_roomId.set(this,void 0),_Connection_keeper.set(this,void 0),_Connection_chat.set(this,void 0),this.disconnect=()=>{this.ws.close(),this.onResetEditor()},this.joinRoom=e=>{this.connect(__classPrivateFieldGet(this,_Connection_url,"f"),__classPrivateFieldGet(this,_Connection_port,"f"),e)},this.getRoom=()=>__classPrivateFieldGet(this,_Connection_roomId,"f"),_Connection_parseResponse.set(this,(e=>{var t;const i=JSON.parse(e.data);if("ping"===i.event||"pong"===i.event)return i;const{value:s}=i,o=__rest(i,["value"]),a="string"==typeof s?s:null===(t=JSON.parse(s))||void 0===t?void 0:t.map((e=>JSON.parse(e)));return Object.assign(Object.assign({},o),{value:a})})),_Connection_startKeepingConnectionAlive.set(this,(e=>(__classPrivateFieldGet(this,_Connection_keeper,"f")&&__classPrivateFieldGet(this,_Connection_keeper,"f").destroy(),__classPrivateFieldSet(this,_Connection_keeper,new Keeper(e),"f"),__classPrivateFieldGet(this,_Connection_keeper,"f")))),this.setChat=e=>{__classPrivateFieldSet(this,_Connection_chat,e,"f")},this.createNewWebSocket=()=>{const e=new WebSocket(`ws://${__classPrivateFieldGet(this,_Connection_url,"f")}:${__classPrivateFieldGet(this,_Connection_port,"f")}`);return e.onopen=()=>{const t={event:"join-room",roomId:__classPrivateFieldGet(this,_Connection_roomId,"f"),value:JSON.stringify(this.onGetAllShapes().map((e=>e.getDeconstructedShapeData()))),user:Connection.userName};e.send(JSON.stringify(t))},e.addEventListener("message",(e=>{var t,i;const s=__classPrivateFieldGet(this,_Connection_parseResponse,"f").call(this,e),{value:o,event:a,user:n,userId:r}=s;switch(a){case"message":{const e=document.createElement("div");e.setAttribute("class","chat-entry");const i=document.createElement("div"),s=document.createElement("div");i.innerHTML=n?n+":":"",s.innerHTML=o,e.appendChild(i),e.appendChild(s),null===(t=__classPrivateFieldGet(this,_Connection_chat,"f"))||void 0===t||t.appendChild(e)}break;case"get-shapes":this.onUpdateShapes(null!==(i=JSON.parse(o))&&void 0!==i?i:[])}})),__classPrivateFieldGet(this,_Connection_startKeepingConnectionAlive,"f").call(this,e),e},this.sendChatMessage=e=>{if(!e)return;const t=JSON.stringify({event:"message",roomId:__classPrivateFieldGet(this,_Connection_roomId,"f"),user:Connection.userName,userId:__classPrivateFieldGet(this,_Connection_userId,"f"),value:e});this.ws.send(t)},this.sendShapes=e=>{e.length&&JSON.stringify({event:""})},_Connection_sendShapeWithLock.set(this,((e,t=!0)=>{let i=[];Array.isArray(e)?(e.forEach((e=>e.isLocked=t)),i=e):(e.isLocked=t,i=[e]);const s=JSON.stringify({event:t?"lock-shapes":"unlock-shapes",roomId:__classPrivateFieldGet(this,_Connection_roomId,"f"),user:Connection.userName,userId:__classPrivateFieldGet(this,_Connection_userId,"f"),value:i.map((e=>JSON.stringify(e.getDeconstructedShapeData())))});this.ws.send(s)})),this.lockShapes=e=>{__classPrivateFieldGet(this,_Connection_sendShapeWithLock,"f").call(this,e,!0)},this.unlockShapes=e=>{__classPrivateFieldGet(this,_Connection_sendShapeWithLock,"f").call(this,e,!1)},this.deleteShapes=e=>{const t=JSON.stringify({event:"delete-shapes",roomId:__classPrivateFieldGet(this,_Connection_roomId,"f"),user:Connection.userName,userId:__classPrivateFieldGet(this,_Connection_userId,"f"),value:e});this.ws.send(t)},this.updateShapes=e=>{let t=[];t=Array.isArray(e)?e:[e];const i=JSON.stringify({event:"update-shapes",roomId:__classPrivateFieldGet(this,_Connection_roomId,"f"),user:Connection.userName,userId:__classPrivateFieldGet(this,_Connection_userId,"f"),value:t.map((e=>JSON.stringify(e.getDeconstructedShapeData())))});this.ws.send(i)},this.connect=(e=__classPrivateFieldGet(this,_Connection_url,"f"),t=__classPrivateFieldGet(this,_Connection_port,"f"),i)=>{this.disconnect(),e=e,t=t,this.createNewWebSocket()},__classPrivateFieldSet(this,_Connection_url,n,"f"),__classPrivateFieldSet(this,_Connection_port,r,"f"),__classPrivateFieldSet(this,_Connection_roomId,e,"f"),Connection.userName=t,__classPrivateFieldSet(this,_Connection_userId,nanoid(),"f"),this.ws=this.createNewWebSocket(),__classPrivateFieldSet(this,_Connection_keeper,__classPrivateFieldGet(this,_Connection_startKeepingConnectionAlive,"f").call(this,this.ws),"f"),this.onDeleteShapes=i,this.onUpdateShapes=s,this.onGetAllShapes=o,this.onResetEditor=a}}_Connection_userId=new WeakMap,_Connection_url=new WeakMap,_Connection_port=new WeakMap,_Connection_roomId=new WeakMap,_Connection_keeper=new WeakMap,_Connection_chat=new WeakMap,_Connection_parseResponse=new WeakMap,_Connection_startKeepingConnectionAlive=new WeakMap,_Connection_sendShapeWithLock=new WeakMap,Connection.userName="user_"+nanoid(5);const menuButtonStyles=r$2`:host{display:none;z-index:100;position:absolute}#button-container{display:inline-block;cursor:pointer}.bar1,.bar2,.bar3{width:39px;height:5px;background-color:#666;border-radius:10px;margin:6px 0;transition:.4s}.isActive .bar1{-webkit-transform:rotate(-45deg) translate(-9px,6px);transform:rotate(-45deg) translate(-9px,6px)}.isActive .bar2{opacity:0}.isActive .bar3{-webkit-transform:rotate(45deg) translate(-8px,-8px);transform:rotate(45deg) translate(-8px,-8px)}@media only screen and (max-width:960px){:host{display:flex}}`;let MenuButton=class extends s{toggleButton(e){var t;const i=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("button-container");null==i||i.classList.toggle("isActive")}render(){return p`<div id="button-container" @click="${this.toggleButton}"><div class="bar1"></div><div class="bar2"></div><div class="bar3"></div></div>`}};MenuButton.styles=[menuButtonStyles],MenuButton=__decorate([n("menu-button")],MenuButton);const layoutStyle=r$2`:host{height:100%;transition:all 1s;display:flex;flex-direction:column;background-color:#2196f3}#footer{display:flex;flex-direction:column;padding:10px 0;border-top:1px solid rgba(0,0,0,.3);border-bottom:1px solid rgba(0,0,0,.3);background-color:rgba(255,255,255,.8)}#footer #footer-fields{border:none;flex:2 1 auto;display:flex;flex-direction:column}#footer-fields>#footer-input{width:100%;justify-content:space-between;display:flex}#footer #footer-input #left-input-section{display:flex;flex-direction:column;gap:5px}#footer #footer-input #right-input-section{visibility:hidden;border:none;padding:0 20px 20px;background-color:inherit;border-left:1px solid rgba(0,0,0,.3);display:flex;flex-direction:column;gap:5px}#footer #footer-input-fields{display:flex;flex-direction:column}#footer #footer-submit-button{width:100%;display:flex;justify-content:flex-end}#stroke-opacity-input{max-width:'20px'}`,layoutHeaderStyle=r$2`#header{background-color:rgba(255,255,255,.8);width:100%}`,layoutContentStyle=r$2`#content{flex:1 1 auto;display:flex}#draw-container{margin:0;padding:0;top:0;left:0;background-color:#fff;flex:1 1 auto;overflow:auto;display:flex;position:relative}#drawzone{top:0;left:0;position:absolute}#right-main-section{display:flex;flex:1 2 220px;max-width:15%;flex-direction:column;padding:20px 15px 0;background-color:rgba(255,255,255,.8);overflow-y:auto}#preview-layer{top:0;left:0;position:absolute;z-index:1;pointer-events:none}#chat{height:100%;display:flex;flex-direction:column;flex:2 0 auto;border-top:1px solid rgba(0,0,0,.4)}#connection-info{border-top:1px solid rgba(0,0,0,.4);display:flex;flex-direction:column;flex:0 1 20%}#connection-section{display:flex;flex-direction:column}#connection-info #connect-form>label{display:flex}#connection-info #connect-form>label>#connect-form-label{display:flex;flex-direction:column;justify-content:flex-end}#connection-info #connect-form{display:flex;flex-direction:column;align-items:center;padding-bottom:20px}#connection-info #connect-form>:first-child{display:flex;flex-direction:column;width:100%;gap:10px}#connection-info #connect-form>:first-child label{flex:auto;flex-direction:column;display:flex}#chat #chatbox{height:100%;height:-moz-available;height:-webkit-fill-available;height:fill-available;flex:1 .5 auto;overflow:auto;background-color:#fff}#chat #chatbox .chat-entry{display:flex;padding:5px;flex-direction:column;align-items:flex-end}#connect-button-container{display:flex;padding-top:20px;justify-content:center}#room-information{display:flex;flex-direction:column;padding-bottom:20px}#room-information>#disconnect-button-container{padding-top:10px;align-self:flex-start}#connection-info #chatbox .chat-entry:nth-child(2n + 1){background-color:rgba(0,0,0,.1)}#connection-info #chatbox .chat-entry :first-child{align-self:flex-start}#chat #chat-form{display:flex;padding-top:10px}#chat #chat-form #message-field{width:100%}#position-container{border-top:1px solid rgba(0,0,0,.4);display:flex;justify-content:flex-end;padding:10px 10px 0 0}`,getToolboxButtonsProps=e=>[{toolName:"Draw Tool",class:"draw-ool",onClick:()=>e(Tools_List.DRAW),icon:"public/images/draw.svg",id:Tools_List.DRAW},{toolName:"Line Tool",onClick:()=>e(Tools_List.LINE),icon:"public/images/line.svg",id:Tools_List.LINE},{toolName:"Rect Tool",icon:"public/images/rectangle.svg",onClick:()=>e(Tools_List.RECT),id:Tools_List.RECT},{toolName:"Ellipse Tool - Hold CTRL for circle mode",onClick:()=>e(Tools_List.ELLIPSE),icon:"public/images/ellipse.svg",id:Tools_List.ELLIPSE},{toolName:"Text Tool",onClick:()=>e(Tools_List.TEXT),icon:"public/images/text.svg",id:Tools_List.TEXT},{toolName:"Select Tool",onClick:()=>e(Tools_List.SELECT),icon:"public/images/select.svg",id:Tools_List.SELECT},{toolName:"Move Tool",onClick:()=>e(Tools_List.MOVE),icon:"public/images/move.svg",id:Tools_List.MOVE,disabled:!0},{toolName:"Delete",onClick:()=>e(Tools_List.DELETE),icon:"public/images/delete.svg",id:Tools_List.DELETE},{toolName:"Unselect",onClick:()=>e(null),icon:"public/images/unselect.svg",id:Tools_List.UNSELECT}];let SVGEditor=class extends s{constructor(){super(),this.width=0,this.height=0,this.editor=null,this.handleSelectTool=e=>{var t;null===(t=this.editor)||void 0===t||t.onSelectTool(e)},this.handleJoinRoom=()=>{var e,t,i,s,o,a,n;if(this.editor){const r=(null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("room")).value,l=(null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("user")).value;this.connection=new Connection(r,l||void 0,this.editor.deleteFromShapes,this.editor.updateShapes,this.editor.getAllShapes,this.editor.resetEditor),this.connection.setChat(null===(i=this.shadowRoot)||void 0===i?void 0:i.getElementById("chatbox")),this.editor.setConnection(this.connection),null===(o=null===(s=this.shadowRoot)||void 0===s?void 0:s.getElementById("message-field"))||void 0===o||o.removeAttribute("disabled"),null===(n=null===(a=this.shadowRoot)||void 0===a?void 0:a.getElementById("send-message-button"))||void 0===n||n.removeAttribute("disabled"),document.title=document.title+" | Room:"+r,this.hideConnectForm()}},this.handleSVGParamChange=(e,t)=>{var i,s,o,a,n,r,l,d,h,c,_,p,v;let u;const f=[SVGParamFieldID.FILL_COLOR,SVGParamFieldID.FILL_OPACITY],g=[SVGParamFieldID.STROKE_COLOR,SVGParamFieldID.STROKE_OPACITY];if([...f,...g].includes(t)){let e,h;g.includes(t)?(e=null===(s=null===(i=this.shadowRoot)||void 0===i?void 0:i.getElementById(SVGParamFieldID.STROKE_OPACITY))||void 0===s?void 0:s.value,h=null===(a=null===(o=this.shadowRoot)||void 0===o?void 0:o.getElementById(SVGParamFieldID.STROKE_COLOR))||void 0===a?void 0:a.value,u=hexToRGBA(null!=h?h:"#000000",e)):(e=null===(r=null===(n=this.shadowRoot)||void 0===n?void 0:n.getElementById(SVGParamFieldID.FILL_OPACITY))||void 0===r?void 0:r.value,h=null===(d=null===(l=this.shadowRoot)||void 0===l?void 0:l.getElementById(SVGParamFieldID.FILL_COLOR))||void 0===d?void 0:d.value,u=hexToRGBA(null!=h?h:"#000000",e))}else SVGParamFieldID.LINE_DASH===t?(u=null===(c=null===(h=this.shadowRoot)||void 0===h?void 0:h.getElementById(SVGParamFieldID.LINE_DASH))||void 0===c?void 0:c.value.trim().split(/[\s,]+/).filter((e=>!!e)).map((e=>parseInt(e))),u.some((e=>!isFinite(e)))&&(u=[0])):u=null===(p=null===(_=this.shadowRoot)||void 0===_?void 0:_.getElementById(t))||void 0===p?void 0:p.value;null===(v=this.editor)||void 0===v||v.setShapeParam(e,u)},this.hideConnectForm=()=>{var e,t;const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("connect-form");i&&(i.style.display="none");const s=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("room-information");s&&(s.style.display="flex")},this.hideRoomInformation=()=>{var e,t;const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("connect-form");i&&(i.style.display="flex");const s=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("room-information");s&&(s.style.display="none")},this.handleLeaveRoom=()=>{var e,t,i,s,o;null===(e=this.connection)||void 0===e||e.disconnect(),null===(i=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("message-field"))||void 0===i||i.setAttribute("disabled",""),null===(o=null===(s=this.shadowRoot)||void 0===s?void 0:s.getElementById("send-message-button"))||void 0===o||o.setAttribute("disabled",""),document.title="SVG Editor",this.hideRoomInformation()},this.handleSendMessage=()=>{var e,t,i;const s=null===(t=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("message-field"))||void 0===t?void 0:t.value;null===(i=this.connection)||void 0===i||i.sendChatMessage(s)},this.updateResize=()=>{this.width=window.innerWidth,this.height=window.innerHeight},__awaiter(void 0,void 0,void 0,(function*(){yield document.fonts.ready;const e=new Set;for(const t of fontCheck.values())document.fonts.check(`12px "${t}"`)&&e.add(t);return e})).then((e=>this.availableFonts=e))}firstUpdated(){var e,t;return __awaiter(this,void 0,void 0,(function*(){this.updateResize(),this.hideRoomInformation();const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("drawzone");i.addEventListener("mousemove",(e=>{var t;const s=i.getBoundingClientRect(),o=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("position");o&&(o.innerHTML=`x:${e.clientX-s.left} - y:${e.clientY-s.top}`)})),i.addEventListener("mouseout",(e=>{var t;const i=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("position");i&&(i.innerHTML="- - -")}));const s=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("preview-layer");i&&(new ResizeObserver(this.updateResize).observe(i),this.editor=new Editor(i,s,[s.offsetLeft,s.offsetTop],this))}))}render(){var e,t,i,s;const o=(a=this.handleSelectTool,[{toolName:"Draw Tool",class:"draw-ool",onClick:()=>a(Tools_List.DRAW),icon:"public/images/draw.svg",id:Tools_List.DRAW},{toolName:"Line Tool",onClick:()=>a(Tools_List.LINE),icon:"public/images/line.svg",id:Tools_List.LINE},{toolName:"Rect Tool",icon:"public/images/rectangle.svg",onClick:()=>a(Tools_List.RECT),id:Tools_List.RECT},{toolName:"Ellipse Tool - Hold CTRL for circle mode",onClick:()=>a(Tools_List.ELLIPSE),icon:"public/images/ellipse.svg",id:Tools_List.ELLIPSE},{toolName:"Text Tool",onClick:()=>a(Tools_List.TEXT),icon:"public/images/text.svg",id:Tools_List.TEXT},{toolName:"Select Tool",onClick:()=>a(Tools_List.SELECT),icon:"public/images/select.svg",id:Tools_List.SELECT},{toolName:"Move Tool",onClick:()=>a(Tools_List.MOVE),icon:"public/images/move.svg",id:Tools_List.MOVE,disabled:!0},{toolName:"Delete",onClick:()=>a(Tools_List.DELETE),icon:"public/images/delete.svg",id:Tools_List.DELETE},{toolName:"Unselect",onClick:()=>a(null),icon:"public/images/unselect.svg",id:Tools_List.UNSELECT}]);var a;return p`<div id="content"><div id="draw-container"><canvas id="drawzone" height="${this.height}" width="${this.width}"></canvas><canvas id="preview-layer" height="${this.height}" width="${this.width}"></canvas></div><div id="right-main-section"><tool-box id="tool-box" .tools="${o}"></tool-box><span id="connection-section" status="disconnected"><div id="connection-info"><h3>Connection</h3><div id="connect-form"><div><label><div id="username-form-label">Username:</div><input id="user" type="text" maxlength="10" placeholder="${null!==(e=Connection.userName)&&void 0!==e?e:""}"></label> <label><div id="connect-form-label">Room ID:</div><input id="room" type="text"></label></div><div id="connect-button-container"><button @click="${this.handleJoinRoom}">Connect</button></div></div><div id="room-information"><div>Connected as ${Connection.userName}<br>Room ID: ${null===(t=this.connection)||void 0===t?void 0:t.getRoom()}</div><div id="disconnect-button-container"><button @click="${this.handleLeaveRoom}">Disconnect</button></div></div></div><div id="chat"><h3>Chat</h3><div id="chatbox"></div><div id="chat-form"><input disabled="disabled" id="message-field" type="text" placeholder="Message..."> <button id="send-message-button" disabled="disabled" @click="${this.handleSendMessage}">Send</button></div></div></span></div></div><dialog-section .onSave="${null===(i=this.editor)||void 0===i?void 0:i.onSave}" .onSelectSvgFile="${null===(s=this.editor)||void 0===s?void 0:s.importSVG}"></dialog-section><div id="footer"><fieldset id="footer-fields"><div id="footer-input"><div id="left-input-section"><div><label>Stroke width: <input type="number" id="stroke-width-input" @input="${()=>this.handleSVGParamChange("strokeWidth",SVGParamFieldID.STROKE_WIDTH)}"></label> <label>Line dash: <input type="text" id="line-dash-input" placeholder="3,3,3,12..." @input="${()=>this.handleSVGParamChange("lineDash",SVGParamFieldID.LINE_DASH)}"></label> <label>Linecap: <select @input="${()=>this.handleSVGParamChange("lineCap",SVGParamFieldID.LINE_CAP)}" id="line-cap-input"><option value="round">Round edge</option><option value="butt">Flat edge</option></select></label></div><div id="footer-input-fields"><div><label>Color: <input type="color" id="stroke-color-input" @change="${()=>this.handleSVGParamChange("stroke",SVGParamFieldID.STROKE_COLOR)}"></label> <label>Opacity: <input type="range" min="0" step="0.1" max="1" @input="${e=>{updateNextSiblingValue(e),this.handleSVGParamChange("stroke",SVGParamFieldID.STROKE_OPACITY)}}"> <input id="stroke-opacity-input" type="number" @change="${e=>{updatePreviousSiblingValue(e),this.handleSVGParamChange("stroke",SVGParamFieldID.STROKE_OPACITY)}}"></label></div><div><label>Fill: <input type="color" id="fill-color-input" @input="${()=>this.handleSVGParamChange("fill",SVGParamFieldID.FILL_COLOR)}"></label> <label>Opacity: <input type="range" min="0" max="1" step="0.01" @input="${e=>{updateNextSiblingValue(e),this.handleSVGParamChange("fill",SVGParamFieldID.FILL_OPACITY)}}"> <input id="fill-opacity-input" type="number" @change="${e=>{updatePreviousSiblingValue(e),this.handleSVGParamChange("fill",SVGParamFieldID.FILL_OPACITY)}}"></label></div></div></div><fieldset id="right-input-section"><label>Font size:<input type="number" id="text-font-size-input" @input="${()=>this.handleSVGParamChange("fontSize",SVGParamFieldID.TEXT_FONT_SIZE)}"></label> <label>Font family: <select id="text-font-family-input" @input="${()=>this.handleSVGParamChange("fontFamily",SVGParamFieldID.TEXT_FONT_FAMILY)}">${this.availableFonts&&Array.from(this.availableFonts).map((e=>p`<option value="${e}">${e}</option>`))}</select></label> <label>Text: <input type="text" id="text-input" @input="${()=>this.handleSVGParamChange("text",SVGParamFieldID.TEXT)}"></label></fieldset></div></fieldset><div id="position-container"><span id="position">- - -</span></div></div>`}};SVGEditor.styles=[layoutStyle,layoutHeaderStyle,layoutContentStyle],__decorate([t()],SVGEditor.prototype,"width",void 0),__decorate([t()],SVGEditor.prototype,"height",void 0),__decorate([t()],SVGEditor.prototype,"editor",void 0),__decorate([t()],SVGEditor.prototype,"connection",void 0),__decorate([t()],SVGEditor.prototype,"availableFonts",void 0),SVGEditor=__decorate([n("svg-editor")],SVGEditor);
